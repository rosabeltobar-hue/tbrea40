/*! For license information please see main.f6e90175.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},150:(e,t,n)=>{n.d(t,{KO:()=>Z,MF:()=>J,Sx:()=>$,Wp:()=>X,j6:()=>H,om:()=>q,xZ:()=>K});var r=n(555),i=n(606),o=n(965),a=n(776),s=n(799);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.6",d=new o.Vy("@firebase/app"),h="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",b="@firebase/database",w="@firebase/data-connect",_="@firebase/database-compat",S="@firebase/functions",E="@firebase/functions-compat",k="@firebase/installations",x="@firebase/installations-compat",T="@firebase/messaging",C="@firebase/messaging-compat",I="@firebase/performance",A="@firebase/performance-compat",R="@firebase/remote-config",N="@firebase/remote-config-compat",P="@firebase/storage",D="@firebase/storage-compat",O="@firebase/firestore",L="@firebase/ai",j="@firebase/firestore-compat",M="firebase",F="[DEFAULT]",U={[c]:"fire-core",[h]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[b]:"fire-rtdb",[w]:"fire-data-connect",[_]:"fire-rtdb-compat",[S]:"fire-fn",[E]:"fire-fn-compat",[k]:"fire-iid",[x]:"fire-iid-compat",[T]:"fire-fcm",[C]:"fire-fcm-compat",[I]:"fire-perf",[A]:"fire-perf-compat",[R]:"fire-rc",[N]:"fire-rc-compat",[P]:"fire-gcs",[D]:"fire-gcs-compat",[O]:"fire-fst",[j]:"fire-fst-compat",[L]:"fire-vertex","fire-js":"fire-js",[M]:"fire-js-all"},V=new Map,z=new Map,B=new Map;function W(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function q(e){const t=e.name;if(B.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;B.set(t,e);for(const n of V.values())W(n,e);for(const n of z.values())W(n,e);return!0}function H(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const G={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Q=new a.FA("app","Firebase",G);class Y{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}const J="12.6.0";function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=(0,r.A)({name:F,automaticDataCollectionEnabled:!0},t),s=o.name;if("string"!==typeof s||!s)throw Q.create("bad-app-name",{appName:String(s)});if(n||(n=(0,a.T9)()),!n)throw Q.create("no-options");const l=V.get(s);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(o,l.config))return l;throw Q.create("duplicate-app",{appName:s})}const c=new i.h1(s);for(const r of B.values())c.addComponent(r);const u=new Y(n,o,c);return V.set(s,u),u}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=V.get(e);if(!t&&e===F&&(0,a.T9)())return X();if(!t)throw Q.create("no-app",{appName:e});return t}function Z(e,t,n){var r;let o=null!==(r=U[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}q(new i.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,s.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",q(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),q(new i.uA("heartbeat",e=>new oe(e),"PRIVATE")),Z(c,u,ce),Z(c,u,"esm2020"),Z("fire-js","")},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+I(l,0):o,_(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+I(s=e[c],c);l+=A(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,u=o+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(_,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,x=null,T=-1,C=5,I=-1;function A(){return!(t.unstable_now()-I<C)}function R(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?E():(k=!1,x=null)}}else k=!1}if("function"===typeof b)E=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=R,E=function(){P.postMessage(null)}}else E=function(){y(R,0)};function D(e){x=e,k||(k=!0,E())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(_,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},403:(e,t,n)=>{var r;n.d(t,{E_:()=>l,F3:()=>s}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class i extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const o=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},o=n.Plugins=n.Plugins||{},a=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),s=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=a,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==a(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(a()))||!!s(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),u.proxy;const d=a(),h=s(e);let f;const p=o=>{let a;const s=function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const p=(async()=>(!f&&d in c?f=f="function"===typeof c[d]?await c[d]():c[d]:null!==t&&!f&&"web"in c&&(f=f="function"===typeof c.web?await c.web():c.web),f))().then(t=>{const s=((t,o)=>{var a,s;if(!h){if(t)return null===(s=t[o])||void 0===s?void 0:s.bind(t);throw new i('"'.concat(e,'" plugin is not implemented on ').concat(d),r.Unimplemented)}{const r=null===h||void 0===h?void 0:h.methods.find(e=>o===e.name);if(r)return"promise"===r.rtype?t=>n.nativePromise(e,o.toString(),t):(t,r)=>n.nativeCallback(e,o.toString(),t,r);if(t)return null===(a=t[o])||void 0===a?void 0:a.bind(t)}})(t,o);if(s){const e=s(...l);return a=null===e||void 0===e?void 0:e.remove,e}throw new i('"'.concat(e,".").concat(o,'()" is not implemented on ').concat(d),r.Unimplemented)});return"addListener"===o&&(p.remove=async()=>a()),p};return s.toString=()=>"".concat(o.toString(),"() { [capacitor code] }"),Object.defineProperty(s,"name",{value:o,writable:!1,configurable:!1}),s},m=p("addListener"),g=p("removeListener"),y=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return h?y:m;case"removeListener":return g;default:return p(t)}}});return o[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(c),...h?[d]:[]])}),v},n.Exception=i,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},a=(e=>e.Capacitor=o(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),s=a.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new a.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new a.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),i=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(i,"; ").concat(o,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}s("CapacitorCookies",{web:()=>new d});const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),n=Object.keys(e).map(e=>e.toLocaleLowerCase());return n.reduce((n,r,i)=>(n[r]=e[t[i]],n),{})}(e.headers),i=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(i.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class f extends l{async request(e){const t=h(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let o,a;return Array.isArray(i)?(a="",i.forEach(e=>{o=t?encodeURIComponent(e):e,a+="".concat(r,"=").concat(o,"&")}),a.slice(0,-1)):(o=t?encodeURIComponent(i):i,a="".concat(r,"=").concat(o)),"".concat(e,"&").concat(a)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,i=await fetch(r,t),o=i.headers.get("content-type")||"";let a,s,{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await i.blob(),a=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(s);break;case"json":a=await i.json();break;default:a=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:a,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}s("CapacitorHttp",{web:()=>new f})},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},579:(e,t,n)=>{e.exports=n(153)},606:(e,t,n)=>{n.d(t,{h1:()=>s,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case x:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,ke=null;function xe(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ee||null!==ke)&&(Ae(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){je=!0,Me=e}};function ze(e,t,n,r,i,o,a,s,l){je=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,kt,xt,Tt=!1,Ct=[],It=null,At=null,Rt=null,Nt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void xt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==At&&zt(At,e),null!==Rt&&zt(Rt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Wt=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=jt(It,e,t,n,r,i),!0;case"dragenter":return At=jt(At,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,jt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,jt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(M({},fn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return kn}var Tn=M({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),In=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Nn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,_e(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},kr={};function xr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=xr("animationend"),Cr=xr("animationiteration"),Ir=xr("animationstart"),Ar=xr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Or=Nr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(ze.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne(function(){var r=o,i=_e(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Cr:case Ir:l=yn;break;case Ar:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:wi(l),f=null==c?s:wi(c),(s=new u(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,s,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(qn(s))if(Xn)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Pe(n,o))&&a.unshift(Hr(n,l,s)):i||null!=(l=Pe(n,o))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function ki(e){return{current:e}}function xi(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function Ti(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ci={},Ii=ki(Ci),Ai=ki(!1),Ri=Ci;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){xi(Ai),xi(Ii)}function Oi(e,t,n){if(Ii.current!==Ci)throw Error(o(168));Ti(Ii,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ri=Ii.current,Ti(Ii,e),Ti(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,xi(Ai),xi(Ii),Ti(Ii,e)):xi(Ai),Ti(Ai,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var Wi=[],qi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Wi[qi++]=Ki,Wi[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=o+e}else Ji=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=ki(null),wo=null,_o=null,So=null;function Eo(){So=_o=wo=null}function ko(e){var t=bo.current;xi(bo),e._currentValue=t}function xo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){wo=e,So=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ss=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===wo)throw Error(o(308));_o=e,wo.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var Io=null;function Ao(e){null===Io?Io=[e]:Io.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ul|=a,e.lanes=a,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(oc(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(oc(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=ic(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=jo(e,i,r))&&(oc(t,e,r,n),Mo(t,e,r))}};function qo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Pi(t)?Ri:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Do(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Pi(t)?Ri:Ii.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Wo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Qo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Qo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Qo(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Yo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(i,d),io&&$i(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&$i(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,m),c}function g(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return io&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),io&&$i(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Jo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=Qo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((o=Fc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=Qo(r,o,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(a,r.mode,l)).return=r,r=o}return s(r);case P:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(L(a))return g(r,o,a,l);Yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Vc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Zo=$o(!0),ea=$o(!1),ta={},na=ki(ta),ra=ki(ta),ia=ki(ta);function oa(e){if(e===ta)throw Error(o(174));return e}function aa(e,t){switch(Ti(ia,t),Ti(ra,e),Ti(na,ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(na),Ti(na,t)}function sa(){xi(na),xi(ra),xi(ia)}function la(e){oa(ia.current);var t=oa(na.current),n=le(t,e.type);t!==n&&(Ti(ra,e),Ti(na,n))}function ca(e){ra.current===e&&(xi(na),xi(ra))}var ua=ki(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ha=[];function fa(){for(var e=0;e<ha.length;e++)ha[e]._workInProgressVersionPrimary=null;ha.length=0}var pa=w.ReactCurrentDispatcher,ma=w.ReactCurrentBatchConfig,ga=0,ya=null,va=null,ba=null,wa=!1,_a=!1,Sa=0,Ea=0;function ka(){throw Error(o(321))}function xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ta(e,t,n,r,i,a){if(ga=a,ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pa.current=null===e||null===e.memoizedState?cs:us,e=n(r,i),_a){a=0;do{if(_a=!1,Sa=0,25<=a)throw Error(o(301));a+=1,ba=va=null,t.updateQueue=null,pa.current=ds,e=n(r,i)}while(_a)}if(pa.current=ls,t=null!==va&&null!==va.next,ga=0,ba=va=ya=null,wa=!1,t)throw Error(o(300));return e}function Ca(){var e=0!==Sa;return Sa=0,e}function Ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ba?ya.memoizedState=ba=e:ba=ba.next=e,ba}function Aa(){if(null===va){var e=ya.alternate;e=null!==e?e.memoizedState:null}else e=va.next;var t=null===ba?ya.memoizedState:ba.next;if(null!==t)ba=t,va=e;else{if(null===e)throw Error(o(310));e={memoizedState:(va=e).memoizedState,baseState:va.baseState,baseQueue:va.baseQueue,queue:va.queue,next:null},null===ba?ya.memoizedState=ba=e:ba=ba.next=e}return ba}function Ra(e,t){return"function"===typeof t?t(e):t}function Na(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=va,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((ga&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,ya.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(Ss=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ya.lanes|=a,Ul|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(Ss=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Da(){}function Oa(e,t){var n=ya,r=Aa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,Ss=!0),r=r.queue,Ka(Ma.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ba&&1&ba.memoizedState.tag){if(n.flags|=2048,za(9,ja.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ga)||La(n,t,i)}return i}function La(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ja(e,t,n,r){t.value=n,t.getSnapshot=r,Fa(t)&&Ua(e)}function Ma(e,t,n){return n(function(){Fa(t)&&Ua(e)})}function Fa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ua(e){var t=No(e,1);null!==t&&oc(t,e,1,-1)}function Va(e){var t=Ia();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:e},t.queue=e,e=e.dispatch=is.bind(null,ya,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return Aa().memoizedState}function Wa(e,t,n,r){var i=Ia();ya.flags|=e,i.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function qa(e,t,n,r){var i=Aa();r=void 0===r?null:r;var o=void 0;if(null!==va){var a=va.memoizedState;if(o=a.destroy,null!==r&&xa(r,a.deps))return void(i.memoizedState=za(t,n,o,r))}ya.flags|=e,i.memoizedState=za(1|t,n,o,r)}function Ha(e,t){return Wa(8390656,8,e,t)}function Ka(e,t){return qa(2048,8,e,t)}function Ga(e,t){return qa(4,2,e,t)}function Qa(e,t){return qa(4,4,e,t)}function Ya(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qa(4,4,Ya.bind(null,t,e),n)}function Xa(){}function $a(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Za(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function es(e,t,n){return 0===(21&ga)?(e.baseState&&(e.baseState=!1,Ss=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ya.lanes|=n,Ul|=n,e.baseState=!0),t)}function ts(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ma.transition;ma.transition={};try{e(!1),t()}finally{bt=n,ma.transition=r}}function ns(){return Aa().memoizedState}function rs(e,t,n){var r=ic(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},os(e))as(t,n);else if(null!==(n=Ro(e,t,n,r))){oc(n,e,r,rc()),ss(n,t,r)}}function is(e,t,n){var r=ic(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(os(e))as(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Ao(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ro(e,t,i,r))&&(oc(n,e,r,i=rc()),ss(n,t,r))}}function os(e){var t=e.alternate;return e===ya||null!==t&&t===ya}function as(e,t){_a=wa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ss(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ls={readContext:Co,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:function(e,t){return Ia().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Ha,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4194308,4,Ya.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=Ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ia();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rs.bind(null,ya,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ia().memoizedState=e},useState:Va,useDebugValue:Xa,useDeferredValue:function(e){return Ia().memoizedState=e},useTransition:function(){var e=Va(!1),t=e[0];return e=ts.bind(null,e[1]),Ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ya,i=Ia();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ga)||La(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ha(Ma.bind(null,r,a,e),[e]),r.flags|=2048,za(9,ja.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ia(),t=Pl.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=Sa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ea++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:$a,useContext:Co,useEffect:Ka,useImperativeHandle:Ja,useInsertionEffect:Ga,useLayoutEffect:Qa,useMemo:Za,useReducer:Na,useRef:Ba,useState:function(){return Na(Ra)},useDebugValue:Xa,useDeferredValue:function(e){return es(Aa(),va.memoizedState,e)},useTransition:function(){return[Na(Ra)[0],Aa().memoizedState]},useMutableSource:Da,useSyncExternalStore:Oa,useId:ns,unstable_isNewReconciler:!1},ds={readContext:Co,useCallback:$a,useContext:Co,useEffect:Ka,useImperativeHandle:Ja,useInsertionEffect:Ga,useLayoutEffect:Qa,useMemo:Za,useReducer:Pa,useRef:Ba,useState:function(){return Pa(Ra)},useDebugValue:Xa,useDeferredValue:function(e){var t=Aa();return null===va?t.memoizedState=e:es(t,va.memoizedState,e)},useTransition:function(){return[Pa(Ra)[0],Aa().memoizedState]},useMutableSource:Da,useSyncExternalStore:Oa,useId:ns,unstable_isNewReconciler:!1};function hs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ms="function"===typeof WeakMap?WeakMap:Map;function gs(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),ps(0,t)},n}function ys(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ps(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ms;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function bs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ws(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=w.ReactCurrentOwner,Ss=!1;function Es(e,t,n,r){t.child=null===e?ea(t,null,n,r):Zo(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=Ta(e,t,n,r,o,i),n=Ca(),null===e||Ss?(io&&n&&eo(t),t.flags|=1,Es(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=jc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(Ss=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(Ss=!0)}}return As(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(jl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(jl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(jl,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(jl,Ll),Ll|=r;return Es(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,r,i){var o=Pi(n)?Ri:Ii.current;return o=Ni(t,o),To(t,i),n=Ta(e,t,n,r,o,i),r=Ca(),null===e||Ss?(io&&r&&eo(t),t.flags|=1,Es(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Rs(e,t,n,r,i){if(Pi(n)){var o=!0;ji(t)}else o=!1;if(To(t,i),null===t.stateNode)Ks(e,t),Ho(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Ni(t,c=Pi(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Ko(t,a,r,c),Po=!1;var h=t.memoizedState;a.state=h,Uo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ai.current||Po?("function"===typeof u&&(Bo(t,n,u,r),l=t.memoizedState),(s=Po||qo(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yo(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Ni(t,l=Pi(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Ko(t,a,r,l),Po=!1,h=t.memoizedState,a.state=h,Uo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ai.current||Po?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(c=Po||qo(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,o,i)}function Ns(e,t,n,r,i,o){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Gs(e,t,o);r=t.stateNode,_s.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,s,o)):Es(e,t,s,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),aa(e,t.containerInfo)}function Ds(e,t,n,r,i){return po(),mo(i),t.flags|=256,Es(e,t,n,r),t.child}var Os,Ls,js,Ms,Fs={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ua,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Uc(l,i,0,null),e=Fc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Fs,e):zs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=fs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(a=Fc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Fs,a);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=fs(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),Ss||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,No(e,i),oc(r,e,i,-1))}return vc(),Bs(e,t,s,r=fs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=jc(r,s):(s=Fc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Us(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=jc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zs(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&mo(r),Zo(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xo(e.return,t,n)}function qs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Es(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===da(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,o);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ks(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Js(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ys(t),null;case 3:return r=t.stateNode,sa(),xi(Ai),xi(Ii),fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(cc(oo),oo=null))),Ls(e,t),Ys(t),null;case 5:ca(t);var i=oa(ia.current);if(n=t.type,null!==e&&null!=t.stateNode)js(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ys(t),null}if(e=oa(na.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=oa(ia.current),oa(na.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ys(t),null;case 13:if(xi(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),a=!1}else null!==oo&&(cc(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Ml&&(Ml=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return sa(),Ls(e,t),null===e&&Br(t.stateNode.containerInfo),Ys(t),null;case 10:return ko(t.type._context),Ys(t),null;case 19:if(xi(ua),null===(a=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Qs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=da(e))){for(t.flags|=128,Qs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Hl&&(t.flags|=128,r=!0,Qs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ys(t),null}else 2*Xe()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Qs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ua.current,Ti(ua,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return sa(),xi(Ai),xi(Ii),fa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ca(t),null;case 13:if(xi(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ua),null;case 4:return sa(),null;case 10:return ko(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},js=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,oa(na.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Zs=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var il=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&rl(t,n,o)}i=i.next}while(i!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Zs||nl(n,t);case 6:var r=fl,i=pl;fl=null,ml(e,t,n),pl=i,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(fl,n.stateNode));break;case 4:r=fl,i=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&rl(n,t,a),i=i.next}while(i!==r)}ml(e,t,n);break;case 1:if(!Zs&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,ml(e,t,n),Zs=r):ml(e,t,n);break;default:ml(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(o(160));gl(a,s,i),fl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),wl(e),4&r){try{ol(3,e,e.return),al(3,e)}catch(g){Cc(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:vl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(vl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(vl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(vl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:vl(t,e),wl(e);break;case 13:vl(t,e),wl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(ql=Xe())),4&r&&yl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(u=Zs)||d,vl(t,e),Zs=u):vl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,tl=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),wl(e),4&r&&yl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),hl(e,ul(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;dl(e,ul(e),a);break;default:throw Error(o(161))}}catch(Xo){Cc(e,e.return,Xo)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){tl=e,Sl(e,t,n)}function Sl(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var i=tl,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$s;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=$s;var c=Zs;if($s=a,(Zs=l)&&!c)for(tl=i;null!==tl;)l=(a=tl).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,tl=l):xl(i);for(;null!==o;)tl=o,Sl(o,t,n),o=o.sibling;tl=i,$s=s,Zs=c}El(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,tl=o):El(e)}}function El(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Zs||512&t.flags&&sl(t)}catch(f){Cc(t,t.return,f)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function kl(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function xl(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(Xo){Cc(t,n,Xo)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Xo){Cc(t,i,Xo)}}var o=t.return;try{sl(t)}catch(Xo){Cc(t,o,Xo)}break;case 5:var a=t.return;try{sl(t)}catch(Xo){Cc(t,a,Xo)}}}catch(Xo){Cc(t,t.return,Xo)}if(t===e){tl=null;break}var s=t.sibling;if(null!==s){s.return=t.return,tl=s;break}tl=t.return}}var Tl,Cl=Math.ceil,Il=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Rl=w.ReactCurrentBatchConfig,Nl=0,Pl=null,Dl=null,Ol=0,Ll=0,jl=ki(0),Ml=0,Fl=null,Ul=0,Vl=0,zl=0,Bl=null,Wl=null,ql=0,Hl=1/0,Kl=null,Gl=!1,Ql=null,Yl=null,Jl=!1,Xl=null,$l=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&Nl)?Xe():-1!==tc?tc:tc=Xe()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Ol?Ol&-Ol:null!==go.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function oc(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(o(185));yt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(Vl|=n),4===Ml&&uc(e,Ol)),ac(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Hl=Xe()+500,Ui&&Bi()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Pl?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(dc.bind(null,e)):zi(dc.bind(null,e)),ai(function(){0===(6&Nl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(tc=-1,nc=0,0!==(6&Nl))throw Error(o(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bc(e,r);else{t=r;var i=Nl;Nl|=2;var a=yc();for(Pl===e&&Ol===t||(Kl=null,Hl=Xe()+500,mc(e,t));;)try{_c();break}catch(l){gc(e,l)}Eo(),Il.current=a,Nl=i,null!==Dl?t=0:(Pl=null,Ol=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=lc(e,i))),1===t)throw n=Fl,mc(e,0),uc(e,r),ac(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bc(e,r))&&(0!==(a=pt(e))&&(r=a,t=lc(e,a))),1===t))throw n=Fl,mc(e,0),uc(e,r),ac(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,Wl,Kl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=ql+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,Wl,Kl),t);break}kc(e,Wl,Kl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,Wl,Kl),r);break}kc(e,Wl,Kl);break;default:throw Error(o(329))}}}return ac(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function lc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Wl,Wl=n,null!==t&&cc(t)),e}function cc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function uc(e,t){for(t&=~zl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Nl))throw Error(o(327));xc();var t=ht(e,0);if(0===(1&t))return ac(e,Xe()),null;var n=bc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Fl,mc(e,0),uc(e,t),ac(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Wl,Kl),ac(e,Xe()),null}function hc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Hl=Xe()+500,Ui&&Bi())}}function fc(e){null!==Xl&&0===Xl.tag&&0===(6&Nl)&&xc();var t=Nl;Nl|=1;var n=Rl.transition,r=bt;try{if(Rl.transition=null,bt=1,e)return e()}finally{bt=r,Rl.transition=n,0===(6&(Nl=t))&&Bi()}}function pc(){Ll=jl.current,xi(jl)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:sa(),xi(Ai),xi(Ii),fa();break;case 5:ca(r);break;case 4:sa();break;case 13:case 19:xi(ua);break;case 10:ko(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Dl=e=jc(e.current,null),Ol=Ll=t,Ml=0,Fl=null,zl=Vl=Ul=0,Wl=Bl=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(r=(n=Io[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Io=null}return e}function gc(e,t){for(;;){var n=Dl;try{if(Eo(),pa.current=ls,wa){for(var r=ya.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}wa=!1}if(ga=0,ba=va=ya=null,_a=!1,Sa=0,Al.current=null,null===n||null===n.return){Ml=1,Fl=t,Dl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=bs(s);if(null!==p){p.flags&=-257,ws(p,s,l,0,t),1&p.mode&&vs(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){vs(a,u,t),vc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=bs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ws(y,s,l,0,t),mo(hs(c,l));break e}}a=c=hs(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,gs(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,ys(a,l,t));break e}}a=a.return}while(null!==a)}Ec(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function yc(){var e=Il.current;return Il.current=ls,null===e?ls:e}function vc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&Ul)&&0===(268435455&Vl)||uc(Pl,Ol)}function bc(e,t){var n=Nl;Nl|=2;var r=yc();for(Pl===e&&Ol===t||(Kl=null,mc(e,t));;)try{wc();break}catch(i){gc(e,i)}if(Eo(),Nl=n,Il.current=r,null!==Dl)throw Error(o(261));return Pl=null,Ol=0,Ml}function wc(){for(;null!==Dl;)Sc(Dl)}function _c(){for(;null!==Dl&&!Ye();)Sc(Dl)}function Sc(e){var t=Tl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Ec(e):Dl=t,Al.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Js(n,t,Ll)))return void(Dl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function kc(e,t,n){var r=bt,i=Rl.transition;try{Rl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Xl);if(0!==(6&Nl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Pl&&(Dl=Pl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,function(){return xc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Rl.transition,Rl.transition=null;var s=bt;bt=1;var l=Nl;Nl|=4,Al.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(vo){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(vo){Cc(t,t.return,vo)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=il,il=!1}(e,n),bl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Je(),Nl=l,bt=s,Rl.transition=a}else e.current=n;if(Jl&&(Jl=!1,Xl=e,$l=i),a=e.pendingLanes,0===a&&(Yl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&$l)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,Bi()}(e,t,n,r)}finally{Rl.transition=i,bt=r}return null}function xc(){if(null!==Xl){var e=wt($l),t=Rl.transition,n=bt;try{if(Rl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Nl))throw Error(o(331));var i=Nl;for(Nl|=4,tl=e.current;null!==tl;){var a=tl,s=a.child;if(0!==(16&tl.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:ol(8,d,a)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}tl=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,tl=s;else e:for(;null!==tl;){if(0!==(2048&(a=tl).flags))switch(a.tag){case 0:case 11:case 15:ol(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,tl=v;break e}tl=a.return}}var b=e.current;for(tl=b;null!==tl;){var w=(s=tl).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,tl=w;else e:for(s=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(S){Cc(l,l.return,S)}if(l===s){tl=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,tl=_;break e}tl=l.return}}if(Nl=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Rl.transition=t}}return!1}function Tc(e,t,n){e=jo(e,t=gs(0,t=hs(n,t),1),1),t=rc(),null!==e&&(yt(e,1,t),ac(e,t))}function Cc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=jo(t,e=ys(t,e=hs(n,e),1),1),e=rc(),null!==t&&(yt(t,1,e),ac(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ol&n)===n&&(4===Ml||3===Ml&&(130023424&Ol)===Ol&&500>Xe()-ql?mc(e,0):zl|=n),ac(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=No(e,t))&&(yt(e,t,n),ac(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ac(e,n)}function Pc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Dc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Fc(n.children,i,a,t);case k:s=8,i|=8;break;case x:return(e=Oc(12,n,t,2|i)).elementType=x,e.lanes=a,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=a,e;case R:return(e=Oc(19,n,t,i)).elementType=R,e.lanes=a,e;case D:return Uc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case I:s=11;break e;case N:s=14;break e;case P:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Fc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,i,o,a,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Oc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function qc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Hc(e,t,n,r,i,o,a,s,l){return(e=Wc(n,r,!0,e,0,o,0,s,l)).context=qc(null),n=e.current,(o=Lo(r=rc(),i=ic(n))).callback=void 0!==t&&null!==t?t:null,jo(n,o,i),e.current.lanes=i,yt(e,i,r),ac(e,r),e}function Kc(e,t,n,r){var i=t.current,o=rc(),a=ic(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=jo(i,t,a))&&(oc(e,i,a,o),Mo(e,i,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)Ss=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ss=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),po();break;case 5:la(t);break;case 1:Pi(t.type)&&ji(t);break;case 4:aa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(Ti(ua,1&ua.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ti(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Gs(e,t,n)}(e,t,n);Ss=0!==(131072&e.flags)}else Ss=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ks(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);To(t,n),i=Ta(null,t,r,e,i,n);var a=Ca();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(t),i.updater=Wo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Ns(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),Es(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ks(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),i){case 0:t=As(null,t,r,e,n);break e;case 1:t=Rs(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=xs(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Uo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ds(e,t,r,n,i=hs(Error(o(423)),t));break e}if(r!==i){t=Ds(e,t,r,n,i=hs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Gs(e,t,n);break e}Es(e,t,r,n)}t=t.child}return t;case 5:return la(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Is(e,t),Es(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Vs(e,t,n);case 4:return aa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):Es(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return Es(e,t,t.pendingProps,n),t.child;case 8:case 12:return Es(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(bo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ai.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Lo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),xo(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Es(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Co(i)),t.flags|=1,Es(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),xs(e,t,r,i=yo(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Ks(e,t),t.tag=1,Pi(r)?(e=!0,ji(t)):e=!1,To(t,n),Ho(t,r,i),Go(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tu(){}function nu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Gc(a);s.call(e)}}Kc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gc(a);o.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",tu);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),fc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gc(l);s.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",tu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),fc(function(){Kc(t,l,n,r)}),l}(n,t,e,i,r);return Gc(a)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Kc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Kc(null,e,null,null)}),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ac(t,Xe()),0===(6&Nl)&&(Hl=Xe()+500,Bi()))}break;case 13:fc(function(){var t=No(e,1);if(null!==t){var n=rc();oc(t,e,1,n)}}),Yc(e,1)}},St=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)oc(t,e,134217728,rc());Yc(e,134217728)}},Et=function(e){if(13===e.tag){var t=ic(e),n=No(e,t);if(null!==n)oc(n,e,t,rc());Yc(e,t)}},kt=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=hc,Ae=fc;var ru={usingClientEntryPoint:!1,Events:[bi,wi,_i,Te,Ce,hc]},iu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ou={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{it=au.inject(ou),ot=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(o(40));return!!e._reactRootContainer&&(fc(function(){nu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return nu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},776:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>L,g:()=>O,dM:()=>D,u:()=>l,Uj:()=>s,Fy:()=>v,tD:()=>W,bD:()=>F,hp:()=>B,T9:()=>f,Tj:()=>d,yU:()=>h,XA:()=>p,mS:()=>c,Ku:()=>K,ZQ:()=>S,sr:()=>T,zJ:()=>g,c1:()=>x,Im:()=>M,lT:()=>I,zW:()=>N,jZ:()=>E,lV:()=>C,nr:()=>A,Ov:()=>R,gE:()=>y,Am:()=>V,I9:()=>z,P1:()=>_,eX:()=>P});var r=n(555);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==l)throw new a;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDhj5l-c2o2U3Yc3ZN_rnbMlf8-MNCWfEA",REACT_APP_FIREBASE_AUTH_DOMAIN:"tbreakapp.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"tbreakapp",REACT_APP_FIREBASE_STORAGE_BUCKET:"tbreakapp.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"152648510768",REACT_APP_FIREBASE_APP_ID:"1:152648510768:web:3f3d7df7e4f1d608be2cf5",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-JDVY4C21J4",REACT_APP_DONATION_FUNCTION_URL:"https://us-central1-tbreakapp.cloudfunctions.net/donations"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}const b={};let w=!1;function _(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function k(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function x(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function T(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return!k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return!k()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function D(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class O extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,O.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(j,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new O(n,o,t)}}const j=/\{\$([^}]+)}/g;function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(U(n)&&U(o)){if(!F(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U(e){return null!==e&&"object"===typeof e}function V(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function B(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function W(e,t){const n=new q(e,t);return n.subscribe.bind(n)}class q{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function K(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{n.d(t,{MR:()=>v,P2:()=>y});var r=n(555);const i=(e,t)=>t.some(t=>e instanceof t);let o,a;const s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return c.set(o,t.sort?t.sort():[t]),m(o)}}function p(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,t)}(e),i(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(m(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=p(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=m(a);return r&&a.addEventListener("upgradeneeded",e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),m(n).then(()=>{})}const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],_=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(_.get(t))return _.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return _.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(h)},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".655588aa.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-typescript:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,[a,s,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkreact_typescript=self.webpackChunkreact_typescript||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n.t(r,2),o=n(391);function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=n(555);const l=["sri"],c=["page"],u=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var p="popstate";function m(){return S(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return b("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:w(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function g(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,s.A)((0,s.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l="POP",c=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:m.location,delta:t})}function f(e){return E(e)}null==u&&(u=0,a.replaceState((0,s.A)((0,s.A)({},a.state),{},{idx:u}),""));let m={get action(){return l},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(p,h),c=e,()=>{i.removeEventListener(p,h),c=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=b(m.location,e,t);n&&n(r,e),u=d()+1;let s=v(r,u),h=m.createHref(r);try{a.pushState(s,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}o&&c&&c({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let r=b(m.location,e,t);n&&n(r,e),u=d();let i=v(r,u),s=m.createHref(r);a.replaceState(i,"",s),o&&c&&c({action:l,location:m.location,delta:0})},go:e=>a.go(e)};return m}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),g(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:w(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function k(e,t){return x(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function x(e,t,n,r){let i=V(("string"===typeof t?_(t):t).pathname||"/",n);if(null==i)return null;let o=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=U(i);a=j(o[s],e,r)}return a}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;g(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Q([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of C(e.path))o(e,t,!0,r);else o(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=C(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,A=3,R=2,N=1,P=10,D=-2,O=e=>"*"===e;function L(e,t){let n=e.split("/"),r=n.length;return n.some(O)&&(r+=D),t&&(r+=R),n.filter(e=>!O(e)).reduce((e,t)=>e+(I.test(t)?A:""===t?N:P),r)}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:Q([o,u.pathname]),pathnameBase:Y(Q([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=Q([o,u.pathnameBase]))}return a}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=F(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B=e=>z.test(e);function W(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=_(e):(r=(0,s.A)({},e),g(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),g(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),g(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let o,a=""===e||""===r.pathname,l=a?"/":r.pathname;if(null==l)o=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:o=""}="string"===typeof e?_(e):e;if(r)if(B(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),y(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?W(r.substring(1),"/"):W(r,n)}else t=n;return{pathname:t,search:J(i),hash:X(o)}}(r,o),u=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function Z(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ne=r.createContext(null);ne.displayName="DataRouter";var re=r.createContext(null);re.displayName="DataRouterState";var ie=r.createContext(!1);var oe=r.createContext({isTransitioning:!1});oe.displayName="ViewTransition";var ae=r.createContext(new Map);ae.displayName="Fetchers";var se=r.createContext(null);se.displayName="Await";var le=r.createContext(null);le.displayName="Navigation";var ce=r.createContext(null);ce.displayName="Location";var ue=r.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var de=r.createContext(null);de.displayName="RouteError";function he(){return null!=r.useContext(ce)}function fe(){return g(he(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ce).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){r.useContext(le).static||r.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=r.useContext(ue);return e?function(){let{router:e}=xe("useNavigate"),t=Ce("useNavigate"),n=r.useRef(!1);me(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(n.current,pe),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,(0,s.A)({fromRouteId:t},i)))},[e,t]);return i}():function(){g(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ne),{basename:t,navigator:n}=r.useContext(le),{matches:i}=r.useContext(ue),{pathname:o}=fe(),a=JSON.stringify(K(i)),s=r.useRef(!1);me(()=>{s.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(s.current,pe),!s.current)return;if("number"===typeof r)return void n.go(r);let l=G(r,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,a,o,e]);return l}()}r.createContext(null);function ye(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ue),{pathname:i}=fe(),o=JSON.stringify(K(n));return r.useMemo(()=>G(e,JSON.parse(o),i,"path"===t),[e,o,i,t])}function ve(e,t,n,i,o){g(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=r.useContext(le),{matches:l}=r.useContext(ue),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Re(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=fe();if(t){var v;let e="string"===typeof t?_(t):t;g("/"===h||(null===(v=e.pathname)||void 0===v?void 0:v.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let b=p.pathname||"/",w=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=k(e,{pathname:w});y(f||null!=S,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==S||void 0!==S[S.length-1].route.element||void 0!==S[S.length-1].route.Component||void 0!==S[S.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=Ee(S&&S.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Q([h,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,n,i,o);return t&&E?r.createElement(ce.Provider,{value:{location:(0,s.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},E):E}function be(){let e=Ie(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,s)}var we=r.createElement(be,null),_e=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ue.Provider,{value:this.props.routeContext},r.createElement(de.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Se(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(ne);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ue.Provider,{value:t},i)}function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));g(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let s=!1,l=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){s=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}let c=n&&i?(e,t)=>{var r,o;i(e,{location:n.location,params:null!==(r=null===(o=n.matches)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.params)&&void 0!==r?r:{},unstable_pattern:Z(n.matches),errorInfo:t})}:void 0;return o.reduceRight((e,i,u)=>{let d,h=!1,f=null,p=null;n&&(d=a&&i.route.id?a[i.route.id]:void 0,f=i.route.errorElement||we,s&&(l<0&&0===u?(Re("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),g=()=>{let t;return t=d?f:h?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(_e,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function ke(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xe(e){let t=r.useContext(ne);return g(t,ke(e)),t}function Te(e){let t=r.useContext(re);return g(t,ke(e)),t}function Ce(e){let t=function(e){let t=r.useContext(ue);return g(t,ke(e)),t}(e),n=t.matches[t.matches.length-1];return g(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ie(){var e;let t=r.useContext(de),n=Te("useRouteError"),i=Ce("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ae={};function Re(e,t,n){t||Ae[e]||(Ae[e]=!0,y(!1,n))}var Ne={};function Pe(e,t){e||Ne[t]||(Ne[t]=!0,console.warn(t))}i.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function De(e){let{to:t,replace:n,state:i,relative:o}=e;g(he(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(le);y(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=r.useContext(ue),{pathname:l}=fe(),c=ge(),u=G(t,K(s),l,"path"===o),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:i,relative:o})},[c,d,o,n,i]),null}function Oe(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:n=null,location:i,navigationType:o="POP",navigator:a,static:s=!1,unstable_useTransitions:l}=e;g(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:a,static:s,unstable_useTransitions:l,future:{}}),[c,a,s,l]);"string"===typeof i&&(i=_(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,v=r.useMemo(()=>{let e=V(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:o}},[c,d,h,f,p,m,o]);return y(null!=v,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:r.createElement(le.Provider,{value:u},r.createElement(ce.Provider,{children:n,value:v}))}function je(e){let{children:t,location:n}=e;return ve(Me(t),n)}r.Component;function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Me(e.props.children,o));g(e.type===Oe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Me(e.props.children,o)),n.push(a)}),n}var Fe="get",Ue="application/x-www-form-urlencoded";function Ve(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var ze=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||Be.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function qe(e,t){let n,r,i,o,a;if(Ve(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?V(a,t):null,n=e.getAttribute("method")||Fe,i=We(e.getAttribute("enctype"))||Ue,o=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?V(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Fe,i=We(e.getAttribute("formenctype"))||We(a.getAttribute("enctype"))||Ue,o=new FormData(a,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fe,r=null,i=Ue,a=e}var s;return o&&"text/plain"===i&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function He(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ke(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===V(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ge(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qe(e){return null!=e&&"string"===typeof e.page}function Ye(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,n,r,i,o){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>a(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Xe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function $e(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Qe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=r.useContext(ne);return He(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=r.useContext(re);return He(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=r.createContext(void 0);function rt(){let e=r.useContext(nt);return He(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}nt.displayName="FrameworkContext";function at(e){let{page:t}=e,n=a(e,c),{router:i}=et(),o=r.useMemo(()=>k(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?r.createElement(lt,(0,s.A)({page:t,matches:o},n)):null}function st(e){let{manifest:t,routeModules:n}=rt(),[i,o]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return $e((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ge(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ye).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,s.A)((0,s.A)({},e),{},{rel:"prefetch",as:"style"}):(0,s.A)((0,s.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||o(e)}),()=>{r=!0}},[e,t,n]),i}function lt(e){let{page:t,matches:n}=e,i=a(e,u),o=fe(),{manifest:l,routeModules:c}=rt(),{basename:d}=et(),{loaderData:h,matches:f}=tt(),p=r.useMemo(()=>Je(t,n,f,l,o,"data"),[t,n,f,l,o]),m=r.useMemo(()=>Je(t,n,f,l,o,"assets"),[t,n,f,l,o]),g=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=l.routes[t.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=c[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ke(t,d,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[d,h,o,l,p,n,t,c]),y=r.useMemo(()=>Xe(m,l),[m,l]),v=st(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",(0,s.A)({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",(0,s.A)({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",(0,s.A)({key:t,nonce:i.nonce},n))}))}var ct=!1;function ut(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:o,routeDiscovery:c,ssr:u}=rt(),{router:d,static:h,staticContext:f}=et(),{matches:p}=tt(),m=r.useContext(ie),g=Ze(c,u);o&&(o.didRenderScripts=!0);let y=ot(p,null,i);r.useEffect(()=>{ct=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let o=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];He(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:a,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=i,u=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=a(e,l),i=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(o.pop();o.length>0;)c.push("/".concat(o.join("/"))),o.pop();c.forEach(e=>{let n=k(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let u=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return(0,s.A)((0,s.A)({},r),{},{routes:u,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",(0,s.A)((0,s.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),r.createElement("script",(0,s.A)((0,s.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),b=ct||m?[]:(w=t.entry.imports.concat(Xe(y,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let _="object"===typeof t.sri?t.sri:{};return Pe(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:_[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:_[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:_[t],suppressHydrationWarning:!0})),v)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ht(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,o=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return r.createElement(ft,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(ft,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function ft(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:o,children:a}=e,{routeModules:s}=rt();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!o?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?r.createElement(ut,null):null)))}var pt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{pt&&(window.__reactRouterVersion="7.10.1")}catch(Py){}function mt(e){let{basename:t,children:n,unstable_useTransitions:i,window:o}=e,a=r.useRef();null==a.current&&(a.current=m({window:o,v5Compat:!0}));let s=a.current,[l,c]=r.useState({action:s.action,location:s.location}),u=r.useCallback(e=>{!1===i?c(e):r.startTransition(()=>c(e))},[i]);return r.useLayoutEffect(()=>s.listen(u),[s,u]),r.createElement(Le,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:!0===i})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=r.forwardRef(function(e,t){let n,{onClick:i,discover:o="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:f,target:p,to:m,preventScrollReset:v,viewTransition:b}=e,_=a(e,d),{basename:S,unstable_useTransitions:E}=r.useContext(le),k="string"===typeof m&&gt.test(m),x=!1;if("string"===typeof m&&k&&(n=m,pt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=V(t.pathname,S);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:x=!0}catch(Py){y(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let T=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(le),{hash:o,pathname:a,search:s}=ye(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:Q([n,a])),i.createHref({pathname:l,search:s,hash:o})}(m,{relative:c}),[C,I,A]=function(e,t){let n=r.useContext(nt),[i,o]=r.useState(!1),[a,s]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{o(!0)},m=()=>{o(!1),s(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:it(l,p),onBlur:it(c,m),onMouseEnter:it(u,p),onMouseLeave:it(d,m),onTouchStart:it(h,p)}]:[!1,f,{}]}(l,_),R=function(e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s,unstable_useTransitions:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ge(),u=fe(),d=ye(e,{relative:a});return r.useCallback(h=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(h,t)){h.preventDefault();let t=void 0!==n?n:w(u)===w(d),f=()=>c(e,{replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:s});l?r.startTransition(()=>f()):f()}},[u,c,d,n,i,t,e,o,a,s,l])}(m,{replace:h,state:f,target:p,preventScrollReset:v,relative:c,viewTransition:b,unstable_useTransitions:E});let N=r.createElement("a",(0,s.A)((0,s.A)((0,s.A)({},_),A),{},{href:n||T,onClick:x||u?i:function(e){i&&i(e),e.defaultPrevented||R(e)},ref:dt(t,I),target:p,"data-discover":k||"render"!==o?void 0:"true"}));return C&&!k?r.createElement(r.Fragment,null,N,r.createElement(at,{page:T})):N});yt.displayName="Link";var vt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:l=!1,style:c,to:u,viewTransition:d,children:f}=e,p=a(e,h),m=ye(u,{relative:p.relative}),y=fe(),v=r.useContext(re),{navigator:b,basename:w}=r.useContext(le),_=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(oe);g(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_t("useViewTransitionState"),o=ye(e,{relative:t});if(!n.isTransitioning)return!1;let a=V(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=V(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=M(o.pathname,s)||null!=M(o.pathname,a)}(m)&&!0===d,S=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,E=y.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(E=E.toLowerCase(),k=k?k.toLowerCase():null,S=S.toLowerCase()),k&&w&&(k=V(k,w)||k);const x="/"!==S&&S.endsWith("/")?S.length-1:S.length;let T,C=E===S||!l&&E.startsWith(S)&&"/"===E.charAt(x),I=null!=k&&(k===S||!l&&k.startsWith(S)&&"/"===k.charAt(S.length)),A={isActive:C,isPending:I,isTransitioning:_},R=C?n:void 0;T="function"===typeof o?o(A):[o,C?"active":null,I?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let N="function"===typeof c?c(A):c;return r.createElement(yt,(0,s.A)((0,s.A)({},p),{},{"aria-current":R,className:T,ref:t,style:N,to:u,viewTransition:d}),"function"===typeof f?f(A):f)});vt.displayName="NavLink";var bt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:o,reloadDocument:l,replace:c,state:u,method:d=Fe,action:h,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:v}=e,b=a(e,f),{unstable_useTransitions:_}=r.useContext(le),S=kt(),E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(le),i=r.useContext(ue);g(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a=(0,s.A)({},ye(e||".",{relative:t})),l=fe();if(null==e){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Q([n,a.pathname]));return w(a)}(h,{relative:m}),k="get"===d.toLowerCase()?"get":"post",x="string"===typeof h&&gt.test(h);return r.createElement("form",(0,s.A)((0,s.A)({ref:t,method:k,action:E,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,a=()=>S(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:c,state:u,relative:m,preventScrollReset:y,viewTransition:v});_&&!1!==o?r.startTransition(()=>a()):a()}},b),{},{"data-discover":x||"render"!==n?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _t(e){let t=r.useContext(ne);return g(t,wt(e)),t}bt.displayName="Form";var St=0,Et=()=>"__".concat(String(++St),"__");function kt(){let{router:e}=_t("useSubmit"),{basename:t}=r.useContext(le),n=Ce("useRouteId"),i=e.fetch,o=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:s,encType:l,formData:c,body:u}=qe(e,t);if(!1===r.navigate){let e=r.fetcherKey||Et();await i(e,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||s,formEncType:r.encType||l,flushSync:r.flushSync})}else await o(r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||s,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,o,t,n])}var xt=n(150);(0,xt.KO)("firebase","12.6.0","app");var Tt=n(776),Ct=n(965),It=n(606);const At=["providerId"],Rt=["uid","auth","stsTokenManager"],Nt=["providerId","signInMethod"];function Pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dt=Pt,Ot=new Tt.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lt=new Ct.Vy("@firebase/auth");function jt(e){if(Lt.logLevel<=Ct.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lt.error("Auth (".concat(xt.MF,"): ").concat(e),...n)}}function Mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zt(e,...n)}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zt(e,...n)}function Ut(e,t,n){const r=(0,s.A)((0,s.A)({},Dt()),{},{[t]:n});return new Tt.FA("auth","Firebase",r).create(t,{appName:e.name})}function Vt(e){return Ut(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ot.create(e,...n)}function Bt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw zt(t,...r)}}function Wt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jt(t),new Error(t)}function qt(e,t){e||Wt(t)}function Ht(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kt(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Qt{constructor(e,t){this.shortDelay=e,this.longDelay=t,qt(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,Tt.jZ)()||(0,Tt.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kt()||(0,Tt.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Yt(e,t){qt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Jt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$t=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zt=new Qt(3e4,6e4);function en(e,t){return e.tenantId&&!t.tenantId?(0,s.A)((0,s.A)({},t),{},{tenantId:e.tenantId}):t}async function tn(e,t,n,r){return nn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,Tt.Am)((0,s.A)({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=(0,s.A)({method:t,headers:l},i);return(0,Tt.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,Tt.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),Jt.fetch()(await on(e,e.config.apiHost,n,a),c)})}async function nn(e,t,n){e._canInitEmulator=!1;const r=(0,s.A)((0,s.A)({},Xt),t);try{const t=new sn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ln(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ln(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ln(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ln(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ut(e,s,a);Mt(e,s)}}catch(Py){if(Py instanceof Tt.g)throw Py;Mt(e,"network-request-failed",{message:String(Py)})}}async function rn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await tn(e,t,n,r,i);return"mfaPendingCredential"in o&&Mt(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function on(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?Yt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if($t.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function an(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ft(this.auth,"network-request-failed")),Zt.get())})}}function ln(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ft(e,t,r);return i.customData._tokenResponse=n,i}function cn(e){return void 0!==e&&void 0!==e.enterprise}class un{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return an(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dn(e,t){return tn(e,"GET","/v2/recaptchaConfig",en(e,t))}async function hn(e,t){return tn(e,"POST","/v1/accounts:lookup",t)}function fn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Py){}}function pn(e){return 1e3*Number(e)}function mn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return jt("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,Tt.u)(n);return e?JSON.parse(e):(jt("Failed to decode base64 JWT payload"),null)}catch(Py){return jt("Caught error parsing JWT payload as JSON",null===Py||void 0===Py?void 0:Py.toString()),null}}function gn(e){const t=mn(e);return Bt(t,"internal-error"),Bt("undefined"!==typeof t.exp,"internal-error"),Bt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function yn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Py){throw Py instanceof Tt.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Py)&&e.auth.currentUser===e&&await e.auth.signOut(),Py}}class vn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Py){return void((null===Py||void 0===Py?void 0:Py.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yn(e,hn(n,{idToken:r}));Bt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?_n(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new bn(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function _n(e){return e.map(e=>{let{providerId:t}=e,n=a(e,At);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt("undefined"!==typeof e.idToken,"internal-error"),Bt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):gn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(0!==e.length,"internal-error");const t=gn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nn(e,{},async()=>{const n=(0,Tt.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await on(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,Tt.zJ)(e.emulatorConfig.host)&&(s.credentials="include"),Jt.fetch()(o,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Sn;return n&&(Bt("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Bt("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Bt("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sn,this.toJSON())}_performRefresh(){return Wt("not implemented")}}function En(e,t){Bt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class kn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,Rt);this.providerId="firebase",this.proactiveRefresh=new vn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yn(this,this.stsTokenManager.getToken(this.auth,e));return Bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,Tt.Ku)(e),r=await n.getIdToken(t),i=mn(r);Bt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:fn(pn(i.auth_time)),issuedAtTime:fn(pn(i.iat)),expirationTime:fn(pn(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,Tt.Ku)(e);await wn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,s.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kn((0,s.A)((0,s.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await wn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,xt.xZ)(this.auth.app))return Promise.reject(Vt(this.auth));const e=await this.getIdToken();return await yn(this,async function(e,t){return tn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,s.A)((0,s.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,s.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:_,providerData:S,stsTokenManager:E}=t;Bt(b&&E,e,"internal-error");const k=Sn.fromJSON(this.name,E);Bt("string"===typeof b,e,"internal-error"),En(d,e.name),En(h,e.name),Bt("boolean"===typeof w,e,"internal-error"),Bt("boolean"===typeof _,e,"internal-error"),En(f,e.name),En(p,e.name),En(m,e.name),En(g,e.name),En(y,e.name),En(v,e.name);const x=new kn({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:k,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(x.providerData=S.map(e=>(0,s.A)({},e))),g&&(x._redirectEventId=g),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Sn;r.updateFromServerResponse(t);const i=new kn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await wn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Bt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?_n(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new Sn;a.updateFromIdToken(n);const s=new kn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new bn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,l),s}}const xn=new Map;function Tn(e){qt(e instanceof Function,"Expected a class definition");let t=xn.get(e);return t?(qt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xn.set(e,t),t)}class Cn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cn.type="NONE";const In=Cn;function An(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Rn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=An(this.userKey,r.apiKey,i),this.fullPersistenceKey=An("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await hn(this.auth,{idToken:e}).catch(()=>{});return t?kn._fromGetAccountInfoResponse(this.auth,t,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Rn(Tn(In),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Tn(In);const o=An(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await hn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await kn._fromGetAccountInfoResponse(e,r,t)}else n=kn._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new Rn(i,e,n)):new Rn(i,e,n)}}function Nn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ln(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mn(t))return"Blackberry";if(Fn(t))return"Webos";if(Dn(t))return"Safari";if((t.includes("chrome/")||On(t))&&!t.includes("edge/"))return"Chrome";if(jn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/firefox\//i.test(e)}function Dn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/crios\//i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/iemobile/i.test(e)}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/android/i.test(e)}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/blackberry/i.test(e)}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/webos/i.test(e)}function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return Un(e)||jn(e)||Fn(e)||Mn(e)||/windows phone/i.test(e)||Ln(e)}function zn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Nn((0,Tt.ZQ)());break;case"Worker":t="".concat(Nn((0,Tt.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xt.MF,"/").concat(r)}class Bn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Py){r(Py)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Py){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Py||void 0===Py?void 0:Py.message})}}}class Wn{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new Bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Rn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Py){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await hn(this,{idToken:e}),n=await kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,xt.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(o=n)||void 0===o?void 0:o._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==a||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(Py){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Py))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Py){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wn(e)}catch(Py){if((null===Py||void 0===Py?void 0:Py.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,xt.xZ)(this.app))return Promise.reject(Vt(this));const t=e?(0,Tt.Ku)(e):null;return t&&Bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,xt.xZ)(this.app)?Promise.reject(Vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,xt.xZ)(this.app)?Promise.reject(Vt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return tn(e,"GET","/v2/passwordPolicy",en(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Wn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tt.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return tn(e,"POST","/v2/accounts:revokeToken",en(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tn(e)||this._popupRedirectResolver;Bt(t,this,"argument-error"),this.redirectPersistenceManager=await Rn.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,xt.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Lt.logLevel<=Ct.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lt.warn("Auth (".concat(xt.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Hn(e){return(0,Tt.Ku)(e)}class Kn{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,Tt.tD)(e=>this.observer=e)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qn(e){return Gn.loadJS(e)}function Yn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Jn{constructor(){this.enterprise=new Xn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $n="NO_RECAPTCHA";class Zn{constructor(e){this.type="recaptcha-enterprise",this.auth=Hn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;cn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n($n)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Jn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new un(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&cn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Gn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Qn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function er(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Zn(e);let a;if(i)a=$n;else try{a=await o.verify(n)}catch(c){a=await o.verify(n,!0)}const l=(0,s.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function tr(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await er(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await er(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await er(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function nr(e){const t=Hn(e),n=await dn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new un(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Zn(t).verify()}}function rr(e,t,n){const r=Hn(e);Bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=ir(t),{host:a,port:s}=function(e){const t=ir(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:or(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:or(t)}}}(t),l=null===s?"":":".concat(s),c={url:"".concat(o,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Bt((0,Tt.bD)(c,r.config.emulator)&&(0,Tt.bD)(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,(0,Tt.zJ)(a)?((0,Tt.gE)("".concat(o,"//").concat(a).concat(l)),(0,Tt.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ir(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function or(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ar{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wt("not implemented")}_getIdTokenResponse(e){return Wt("not implemented")}_linkToIdToken(e,t){return Wt("not implemented")}_getReauthenticationResolver(e){return Wt("not implemented")}}async function sr(e,t){return tn(e,"POST","/v1/accounts:signUp",t)}async function lr(e,t){return rn(e,"POST","/v1/accounts:signInWithPassword",en(e,t))}async function cr(e,t){return tn(e,"POST","/v1/accounts:sendOobCode",en(e,t))}async function ur(e,t){return cr(e,t)}class dr extends ar{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new dr(e,t,"password")}static _fromEmailAndCode(e,t){return new dr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return tr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithEmailLink",en(e,t))}(e,{email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return tr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithEmailLink",en(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hr(e,t){return rn(e,"POST","/v1/accounts:signInWithIdp",en(e,t))}class fr extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,Nt);if(!n||!r)return null;const o=new fr(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return hr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,Tt.Am)(t)}return e}}async function pr(e,t){return tn(e,"POST","/v1/accounts:sendVerificationCode",en(e,t))}const mr={USER_NOT_FOUND:"user-not-found"};class gr extends ar{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,t));if(n.temporaryProof)throw ln(e,"account-exists-with-different-credential",n);return n}(e,(0,s.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,(0,s.A)((0,s.A)({},t),{},{operation:"REAUTH"})),mr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new gr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class yr{constructor(e){var t,n,r,i,o,a;const s=(0,Tt.I9)((0,Tt.hp)(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Bt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,Tt.I9)((0,Tt.hp)(e)).link,n=t?(0,Tt.I9)((0,Tt.hp)(t)).deep_link_id:null,r=(0,Tt.I9)((0,Tt.hp)(e)).deep_link_id;return(r?(0,Tt.I9)((0,Tt.hp)(r)).link:null)||r||n||t||e}(e);try{return new yr(t)}catch(n){return null}}}class vr{constructor(){this.providerId=vr.PROVIDER_ID}static credential(e,t){return dr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=yr.parseLink(t);return Bt(n,"argument-error"),dr._fromEmailAndCode(e,n.code,n.tenantId)}}vr.PROVIDER_ID="password",vr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",vr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class br{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wr extends br{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _r extends wr{constructor(){super("facebook.com")}static credential(e){return fr._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _r.credential(t.oauthAccessToken)}catch(n){return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com",_r.PROVIDER_ID="facebook.com";class Sr extends wr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fr._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch(i){return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com",Sr.PROVIDER_ID="google.com";class Er extends wr{constructor(){super("github.com")}static credential(e){return fr._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Er.credential(t.oauthAccessToken)}catch(n){return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com",Er.PROVIDER_ID="github.com";class kr extends wr{constructor(){super("twitter.com")}static credential(e,t){return fr._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return kr.credential(n,r)}catch(i){return null}}}async function xr(e,t){return rn(e,"POST","/v1/accounts:signUp",en(e,t))}kr.TWITTER_SIGN_IN_METHOD="twitter.com",kr.PROVIDER_ID="twitter.com";class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await kn._fromIdTokenResponse(e,n,r),o=Cr(n);return new Tr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cr(n);return new Tr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ir extends Tt.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ir.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ir(e,t,n,r)}}function Ar(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ir._fromErrorAndOperation(e,n,t,r);throw n})}async function Rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await yn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tr._forOperation(e,"link",r)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,xt.xZ)(r.app))return Promise.reject(Vt(r));const i="reauthenticate";try{const o=await yn(e,Ar(r,i,t,e),n);Bt(o.idToken,r,"internal-error");const a=mn(o.idToken);Bt(a,r,"internal-error");const{sub:s}=a;return Bt(e.uid===s,r,"user-mismatch"),Tr._forOperation(e,i,o)}catch(Py){throw(null===Py||void 0===Py?void 0:Py.code)==="auth/".concat("user-not-found")&&Mt(r,"user-mismatch"),Py}}async function Pr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,xt.xZ)(e.app))return Promise.reject(Vt(e));const r="signIn",i=await Ar(e,r,t),o=await Tr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Dr(e,t){return Pr(Hn(e),t)}function Or(e,t,n){var r;Bt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Bt("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Lr(e){const t=Hn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function jr(e,t){return tn(e,"POST","/v2/accounts/mfaEnrollment:start",en(e,t))}new WeakMap;const Mr="__sak";class Fr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mr,"1"),this.storage.removeItem(Mr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ur extends Fr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,Tt.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ur.type="LOCAL";const Vr=Ur;function zr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Br(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Wr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Br(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return zr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Br(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Br(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=zr(n);const i=setInterval(()=>{const e=zr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Wr.type="COOKIE";class qr extends Fr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qr.type="SESSION";const Hr=qr;class Kr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Kr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Kr.receivers=[];class Qr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=Gr("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Yr(){return window}function Jr(){return"undefined"!==typeof Yr().WorkerGlobalScope&&"function"===typeof Yr().importScripts}const Xr="firebaseLocalStorageDb",$r="firebaseLocalStorage",Zr="fbase_key";class ei{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ti(e,t){return e.transaction([$r],t?"readwrite":"readonly").objectStore($r)}function ni(){const e=indexedDB.open(Xr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore($r,{keyPath:Zr})}catch(Py){n(Py)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains($r)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Xr);return new ei(e).toPromise()}(),t(await ni()))})})}async function ri(e,t,n){const r=ti(e,!0).put({[Zr]:t,value:n});return new ei(r).toPromise()}function ii(e,t){const n=ti(e,!0).delete(t);return new ei(n).toPromise()}class oi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ni()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Py){if(t++>3)throw Py;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kr._getInstance(Jr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Qr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ni();return await ri(e,Mr,"1"),await ii(e,Mr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ri(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ti(e,!1).get(t),r=await new ei(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ii(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ti(e,!1).getAll();return new ei(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}oi.type="LOCAL";const ai=oi;function si(e,t){return tn(e,"POST","/v2/accounts/mfaSignIn:start",en(e,t))}Yn("rcb"),new Qt(3e4,6e4);const li="recaptcha";async function ci(e,t,n){if(!e._getRecaptchaConfig())try{await nr(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Bt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=tr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return jr(e,await ui(e,t,n))}return jr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Bt("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Bt(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=tr(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return si(e,await ui(e,t,n))}return si(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=tr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return pr(e,await ui(e,t,n))}return pr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ui(e,t,n){Bt(n.type===li,e,"argument-error");const r=await n.verify();Bt("string"===typeof r,e,"argument-error");const i=(0,s.A)({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class di{constructor(e){this.providerId=di.PROVIDER_ID,this.auth=Hn(e)}verifyPhoneNumber(e,t){return ci(this.auth,e,(0,Tt.Ku)(t))}static credential(e,t){return gr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return di.credentialFromTaggedObject(t)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?gr._fromTokenResponse(n,r):null}}function hi(e,t){return t?Tn(t):(Bt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}di.PROVIDER_ID="phone",di.PHONE_SIGN_IN_METHOD="phone";class fi extends ar{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pi(e){return Pr(e.auth,new fi(e),e.bypassAuthState)}function mi(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),Nr(n,new fi(e),e.bypassAuthState)}async function gi(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),Rr(n,new fi(e),e.bypassAuthState)}class yi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Py){this.reject(Py)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(Py){this.reject(Py)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pi;case"linkViaPopup":case"linkViaRedirect":return gi;case"reauthViaPopup":case"reauthViaRedirect":return mi;default:Mt(this.auth,"internal-error")}}resolve(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vi=new Qt(2e3,1e4);class bi extends yi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){qt(1===this.filter.length,"Popup operations only handle one event");const e=Gr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vi.get())};e()}}bi.currentPopupAction=null;const wi=new Map;class _i extends yi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ki(t),r=Ei(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Py){e=()=>Promise.reject(Py)}wi.set(this.auth._key(),e)}return this.bypassAuthState||wi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Si(e,t){wi.set(e._key(),t)}function Ei(e){return Tn(e._redirectPersistence)}function ki(e){return An("pendingRedirect",e.config.apiKey,e.name)}async function xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,xt.xZ)(e.app))return Promise.reject(Vt(e));const r=Hn(e),i=hi(r,t),o=new _i(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ti{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ii(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ii(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ft(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ci(e))}saveEventToCache(e){this.cachedEventUids.add(Ci(e)),this.lastProcessedEventTime=Date.now()}}function Ci(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ii(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ri=/^https?/;async function Ni(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return tn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Pi(r))return}catch(n){}Mt(e,"unauthorized-domain")}function Pi(e){const t=Ht(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ri.test(n))return!1;if(Ai.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Di=new Qt(3e4,6e4);function Oi(){const e=Yr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Li(e){return new Promise((t,n)=>{var r,i;function o(){Oi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Oi(),n(Ft(e,"network-request-failed"))},timeout:Di.get()})}if(null!==(r=Yr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Yr().gapi)||void 0===i||!i.load){const t=Yn("iframefcb");return Yr()[t]=()=>{gapi.load?o():n(Ft(e,"network-request-failed"))},Qn("".concat(Gn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw ji=null,e})}let ji=null;const Mi=new Qt(5e3,15e3),Fi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ui=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vi(e){const t=e.config;Bt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:xt.MF},i=Ui.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,Tt.Am)(r).slice(1))}async function zi(e){const t=await function(e){return ji=ji||Li(e),ji}(e),n=Yr().gapi;return Bt(n,e,"internal-error"),t.open({where:document.body,url:Vi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ft(e,"network-request-failed"),o=Yr().setTimeout(()=>{r(i)},Mi.get());function a(){Yr().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Bi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Py){}}}function qi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=(0,s.A)((0,s.A)({},Bi),{},{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,Tt.ZQ)().toLowerCase();n&&(l=On(u)?"_blank":n),Pn(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Un(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Wi(null);const h=window.open(t||"",l,d);Bt(h,e,"popup-blocked");try{h.focus()}catch(Py){}return new Wi(h)}const Hi="__/auth/handler",Ki="emulator/auth/handler",Gi=encodeURIComponent("fac");async function Qi(e,t,n,r,i,o){Bt(e.config.authDomain,e,"auth-domain-config-required"),Bt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xt.MF,eventId:i};if(t instanceof br){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,Tt.Im)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof wr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hi);return Yt(t,Ki)}(e),"?").concat((0,Tt.Am)(s).slice(1)).concat(c)}const Yi="webStorageSupport";const Ji=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hr,this._completeRedirectFn=xi,this._overrideRedirectResult=Si}async _openPopup(e,t,n,r){var i;qt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return qi(e,await Qi(e,t,n,Ht(),r),Gr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Yr().location.href=e}(await Qi(e,t,n,Ht(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await zi(e),n=new Ti(e);return t.register("authEvent",t=>{Bt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yi,{type:Yi},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Yi];void 0!==i&&t(!!i),Mt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ni(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vn()||Dn()||Un()}};var Xi="@firebase/auth",$i="1.11.1";class Zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const eo=(0,Tt.XA)("authIdTokenMaxAge")||300;let to=null;var no;Gn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ft("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},no="Browser",(0,xt.om)(new It.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Bt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:no,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(no)},c=new qn(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,xt.om)(new It.uA("auth-internal",e=>(e=>new Zi(e))(Hn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xt.KO)(Xi,$i,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(no)),(0,xt.KO)(Xi,$i,"esm2020");var ro,io,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ao={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);c.l(e)<=0&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=s;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(o=a(n)).j(t);d(c)||c.l(e)>0;)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),a=e.i(t)>>>16,s=65535&e.i(t);n[2*i+2*t]+=o*s,p(n,2*i+2*t),n[2*i+2*t+1]+=r*s,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,io=ao.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=s;for(let s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s);const e=parseInt(t.substring(s,s+o),n);o<8?(o=a(Math.pow(n,o)),i=i.j(o).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},ro=ao.Integer=r}).apply("undefined"!==typeof oo?oo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var so,lo,co,uo,ho,fo,po,mo,go="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},yo={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof go&&go];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=s).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function E(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,k),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),A=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++A,this.da=this.fa=!1}function N(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(N(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}j.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=F(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new R(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)z(e,t[o],n,r,i);return null}return n=J(n),e&&e[I]?e.J(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new j(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)x||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=J(n),e&&e[I]?e.K(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=J(n),e&&e[I]?(e=e.i,(o=String(t).toString())in e.g&&((n=F(t=e.g[o],n,r,i))>-1&&(N(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):N(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof j?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){E.call(this),this.i=new j(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;L(t=new k(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,E),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)N(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,ae=o.JSON.parse,se=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){k.call(this,"d")}function he(){k.call(this,"c")}u(de,k),u(he,k);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){k.call(this,fe.Ja,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(we,k),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var ke,xe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Ae(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},ke=new Ce;var Pe={},De={};function Oe(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ne,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=z(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var l=s[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function je(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=_e(l(e.aa,e),t)}function Ve(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}Jt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=_e(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ye(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),a.L){Je(r.h,a);var s=a,c=r.O;c&&(s.H=c),s.D&&(Ve(s),Fe(s)),r.g=a}else Yt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Re.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!je(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),We(this,t)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(s),s.P=!0,be(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Ee(this.i,this.l,n,null),We(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ae(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(Xo){}},Re.prototype.cancel=function(){this.K=!0,Be(this)},Re.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=st(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(st(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",st(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=_t(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(_t(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Et(){this.g=new se}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function xt(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function At(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=At(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function Nt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=_t(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new xt(this.i,this.h)},u(xt,X),(e=xt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Nt,X);var Pt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),Mt(e)}function Lt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function jt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Lt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Re(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Wt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function qt(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Ht(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||_(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Rt(r,e.u,e.o),n=new Re(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Gt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(bo){throw e.push(o+"type="+encodeURIComponent("_badmap")),bo}}catch(bo){r&&r(n)}}if(l){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||_(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Jt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=_e(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Rt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Le(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Je(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new we(r,n)),Ht(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=_e(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Jt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new Se;if(o.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Nt(new kt({ab:n})):new Nt(e.ma)).Fa(e.L),t}function sn(){}function ln(){}function cn(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Nt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ot(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ot(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Nt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?jt(this):this.Xa())},e.Xa=function(){jt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Re(this,this.j,e);let o=this.o;if(this.U&&(o?(o=D(o),L(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),o&&(this.R?t="headers="+Ie(At(o))+"&"+t:this.u&&Rt(n,this.u,o)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=_e(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Wt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Jt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=sn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Ht(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,sn),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,mo=yo.createWebChannelTransport=function(){return new ln},po=yo.getStatEventTarget=function(){return me()},fo=yo.Event=fe,ho=yo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,uo=yo.ErrorCode=xe,Te.COMPLETE="complete",co=yo.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,lo=yo.WebChannel=ce,yo.FetchXmlHttpFactory=kt,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,so=yo.XhrIo=Nt}).apply("undefined"!==typeof go?go:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const vo="@firebase/firestore",bo="4.9.2";class wo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wo.UNAUTHENTICATED=new wo(null),wo.GOOGLE_CREDENTIALS=new wo("google-credentials-uid"),wo.FIRST_PARTY=new wo("first-party-uid"),wo.MOCK_USER=new wo("mock-user");let _o="12.3.0";const So=new Ct.Vy("@firebase/firestore");function Eo(){return So.logLevel}function ko(e){if(So.logLevel<=Ct.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.debug("Firestore (".concat(_o,"): ").concat(e),...i)}}function xo(e){if(So.logLevel<=Ct.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.error("Firestore (".concat(_o,"): ").concat(e),...i)}}function To(e){if(So.logLevel<=Ct.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.warn("Firestore (".concat(_o,"): ").concat(e),...i)}}function Co(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Io(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ao(e,r,n)}function Ao(e,t,n){let r="FIRESTORE (".concat(_o,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw xo(r),new Error(r)}function Ro(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ao(t,i,r)}function No(e,t){return e}const Po={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Do extends Tt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Lo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class jo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wo.UNAUTHENTICATED))}shutdown(){}}class Mo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fo{constructor(e){this.t=e,this.currentUser=wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ro(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oo,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ko("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ko("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oo)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ko("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ro("string"==typeof t.accessToken,31837,{l:t}),new Lo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ro(null===e||"string"==typeof e,2055,{h:e}),new wo(e)}}class Uo{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=wo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Uo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bo{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,xt.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ro(void 0===this.o,3512);const n=e=>{null!=e.error&&ko("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ko("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ko("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ko("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ro("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new zo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class qo{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Wo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ho(e,t){return e<t?-1:e>t?1:0}function Ko(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Yo(n)===Yo(i)?Ho(n,i):Yo(n)?1:-1}return Ho(e.length,t.length)}const Go=55296,Qo=57343;function Yo(e){const t=e.charCodeAt(0);return t>=Go&&t<=Qo}function Jo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Xo="__name__";class $o{constructor(e,t,n){void 0===t?t=0:t>e.length&&Io(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Io(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=$o.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ho(e.length,t.length)}static compareSegments(e,t){const n=$o.isNumericId(e),r=$o.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?$o.extractNumericId(e).compare($o.extractNumericId(t)):Ko(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class Zo extends $o{construct(e,t,n){return new Zo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Do(Po.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Zo(e)}static emptyPath(){return new Zo([])}}const ea=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ta extends $o{construct(e,t,n){return new ta(e,t,n)}static isValidIdentifier(e){return ea.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ta.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Xo}static keyField(){return new ta([Xo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Do(Po.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Do(Po.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Do(Po.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Do(Po.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ta(t)}static emptyPath(){return new ta([])}}class na{constructor(e){this.path=e}static fromPath(e){return new na(Zo.fromString(e))}static fromName(e){return new na(Zo.fromString(e).popFirst(5))}static empty(){return new na(Zo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new na(new Zo(e.slice()))}}function ra(e,t,n){if(!n)throw new Do(Po.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ia(e){if(!na.isDocumentKey(e))throw new Do(Po.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function oa(e){if(na.isDocumentKey(e))throw new Do(Po.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function aa(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function sa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Io(12329,{type:typeof e})}function la(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Do(Po.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sa(e);throw new Do(Po.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ca(e,t){const n={typeString:e};return t&&(n.value=t),n}function ua(e,t){if(!aa(e))throw new Do(Po.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Do(Po.INVALID_ARGUMENT,n);return!0}const da=-62135596800,ha=1e6;class fa{static now(){return fa.fromMillis(Date.now())}static fromDate(e){return fa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ha);return new fa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Do(Po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Do(Po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<da)throw new Do(Po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Do(Po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ha}_compareTo(e){return this.seconds===e.seconds?Ho(this.nanoseconds,e.nanoseconds):Ho(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ua(e,fa._jsonSchema))return new fa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-da;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fa._jsonSchemaVersion="firestore/timestamp/1.0",fa._jsonSchema={type:ca("string",fa._jsonSchemaVersion),seconds:ca("number"),nanoseconds:ca("number")};class pa{static fromTimestamp(e){return new pa(e)}static min(){return new pa(new fa(0,0))}static max(){return new pa(new fa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ma=-1;class ga{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ga.UNKNOWN_ID=-1;function ya(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pa.fromTimestamp(1e9===r?new fa(n+1,0):new fa(n,r));return new ba(i,na.empty(),t)}function va(e){return new ba(e.readTime,e.key,ma)}class ba{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ba(pa.min(),na.empty(),ma)}static max(){return new ba(pa.max(),na.empty(),ma)}}function wa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=na.comparator(e.documentKey,t.documentKey),0!==n?n:Ho(e.largestBatchId,t.largestBatchId))}const _a="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ea(e){if(e.code!==Po.FAILED_PRECONDITION||e.message!==_a)throw e;ko("LocalStore","Unexpectedly lost primary lease")}class ka{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Io(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ka((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ka?t:ka.resolve(t)}catch(e){return ka.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ka.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ka.reject(t)}static resolve(e){return new ka((t,n)=>{t(e)})}static reject(e){return new ka((t,n)=>{n(e)})}static waitFor(e){return new ka((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=ka.resolve(!1);for(const n of e)t=t.next(e=>e?ka.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ka((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new ka((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function xa(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(e){return"IndexedDbTransactionError"===e.name}class Ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ca.ce=-1;const Ia=-1;function Aa(e){return null==e}function Ra(e){return 0===e&&1/e==-1/0}function Na(e){return"number"==typeof e&&Number.isInteger(e)&&!Ra(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Pa="\x01";function Da(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=La(t)),t=Oa(e.get(n),t);return La(t)}function Oa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Pa:n+="\x01\x11";break;default:n+=t}}return n}function La(e){return e+Pa+"\x01"}const ja="remoteDocuments",Ma="owner",Fa="mutationQueues",Ua="mutations";const Va="documentMutations",za="remoteDocumentsV14",Ba="remoteDocumentGlobal",Wa="targets",qa="targetDocuments",Ha="targetGlobal",Ka="collectionParents",Ga="clientMetadata",Qa="bundles",Ya="namedQueries",Ja="indexConfiguration",Xa="indexState",$a="indexEntries",Za="documentOverlays",es="globals",ts=[Fa,Ua,Va,ja,Wa,Ma,Ha,qa,Ga,Ba,Ka,Qa,Ya],ns=[Fa,Ua,Va,za,Wa,Ma,Ha,qa,Ga,Ba,Ka,Qa,Ya,Za],rs=ns,is=[...rs,Ja,Xa,$a];function os(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function as(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ss(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ls{constructor(e,t){this.comparator=e,this.root=t||us.EMPTY}insert(e,t){return new ls(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new ls(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}}class cs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class us{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:us.RED,this.left=null!=r?r:us.EMPTY,this.right=null!=i?i:us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new us(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return us.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Io(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Io(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Io(27949);return e+(this.isRed()?0:1)}}us.EMPTY=null,us.RED=!0,us.BLACK=!1,us.EMPTY=new class{constructor(){this.size=0}get key(){throw Io(57766)}get value(){throw Io(16141)}get color(){throw Io(16727)}get left(){throw Io(29726)}get right(){throw Io(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new us(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ds{constructor(e){this.comparator=e,this.data=new ls(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hs(this.data.getIterator())}getIteratorFrom(e){return new hs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ds))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ds(this.comparator);return t.data=e,t}}class hs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fs{constructor(e){this.fields=e,e.sort(ta.comparator)}static empty(){return new fs([])}unionWith(e){let t=new ds(ta.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ps extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ps("Invalid base64 string: "+e):e}}(e);return new ms(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ms(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ho(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const gs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(e){if(Ro(!!e,39018),"string"==typeof e){let t=0;const n=gs.exec(e);if(Ro(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vs(e.seconds),nanos:vs(e.nanos)}}function vs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bs(e){return"string"==typeof e?ms.fromBase64String(e):ms.fromUint8Array(e)}const ws="server_timestamp",_s="__type__",Ss="__previous_value__",Es="__local_write_time__";function ks(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[_s])||void 0===t?void 0:t.stringValue)===ws}function xs(e){const t=e.mapValue.fields[Ss];return ks(t)?xs(t):t}function Ts(e){const t=ys(e.mapValue.fields[Es].timestampValue);return new fa(t.seconds,t.nanos)}class Cs{constructor(e,t,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=c}}const Is="(default)";class As{constructor(e,t){this.projectId=e,this.database=t||Is}static empty(){return new As("","")}get isDefaultDatabase(){return this.database===Is}isEqual(e){return e instanceof As&&e.projectId===this.projectId&&e.database===this.database}}const Rs="__type__",Ns="__max__",Ps={mapValue:{fields:{__type__:{stringValue:Ns}}}},Ds="__vector__",Os="value";function Ls(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ks(e)?4:$s(e)?9007199254740991:Js(e)?10:11:Io(28295,{value:e})}function js(e,t){if(e===t)return!0;const n=Ls(e);if(n!==Ls(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ts(e).isEqual(Ts(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ys(e.timestampValue),r=ys(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bs(e.bytesValue).isEqual(bs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vs(e.geoPointValue.latitude)===vs(t.geoPointValue.latitude)&&vs(e.geoPointValue.longitude)===vs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vs(e.integerValue)===vs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vs(e.doubleValue),r=vs(t.doubleValue);return n===r?Ra(n)===Ra(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jo(e.arrayValue.values||[],t.arrayValue.values||[],js);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(os(n)!==os(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!js(n[i],r[i])))return!1;return!0}(e,t);default:return Io(52216,{left:e})}}function Ms(e,t){return void 0!==(e.values||[]).find(e=>js(e,t))}function Fs(e,t){if(e===t)return 0;const n=Ls(e),r=Ls(t);if(n!==r)return Ho(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ho(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vs(e.integerValue||e.doubleValue),r=vs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Us(e.timestampValue,t.timestampValue);case 4:return Us(Ts(e),Ts(t));case 5:return Ko(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bs(e),r=bs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ho(n[i],r[i]);if(0!==e)return e}return Ho(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ho(vs(e.latitude),vs(t.latitude));return 0!==n?n:Ho(vs(e.longitude),vs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Vs(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a[Os])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Os])||void 0===r?void 0:r.arrayValue,u=Ho((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Vs(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ps.mapValue&&t===Ps.mapValue)return 0;if(e===Ps.mapValue)return 1;if(t===Ps.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Ko(r[a],o[a]);if(0!==e)return e;const t=Fs(n[r[a]],i[o[a]]);if(0!==t)return t}return Ho(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Io(23264,{he:n})}}function Us(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ho(e,t);const n=ys(e),r=ys(t),i=Ho(n.seconds,r.seconds);return 0!==i?i:Ho(n.nanos,r.nanos)}function Vs(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fs(n[i],r[i]);if(e)return e}return Ho(n.length,r.length)}function zs(e){return Bs(e)}function Bs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ys(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return bs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return na.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Bs(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Bs(e.fields[i]));return n+"}"}(e.mapValue):Io(61005,{value:e})}function Ws(e){switch(Ls(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xs(e);return t?16+Ws(t):16;case 5:return 2*e.stringValue.length;case 6:return bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Ws(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return as(e.fields,(e,n)=>{t+=e.length+Ws(n)}),t}(e.mapValue);default:throw Io(13486,{value:e})}}function qs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hs(e){return!!e&&"integerValue"in e}function Ks(e){return!!e&&"arrayValue"in e}function Gs(e){return!!e&&"nullValue"in e}function Qs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ys(e){return!!e&&"mapValue"in e}function Js(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Rs])||void 0===t?void 0:t.stringValue)===Ds}function Xs(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return as(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Xs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xs(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function $s(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ns}class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ys(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xs(t)}setAll(e){let t=ta.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Xs(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ys(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ys(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){as(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Zs(Xs(this.value))}}function el(e){const t=[];return as(e.fields,(e,n)=>{const r=new ta([e]);if(Ys(n)){const e=el(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new fs(t)}class tl{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tl(e,0,pa.min(),pa.min(),pa.min(),Zs.empty(),0)}static newFoundDocument(e,t,n,r){return new tl(e,1,t,pa.min(),n,r,0)}static newNoDocument(e,t){return new tl(e,2,t,pa.min(),pa.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new tl(e,3,t,pa.min(),pa.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}function rl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?na.comparator(na.fromName(a.referenceValue),n.key):Fs(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function il(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!js(e.position[n],t.position[n]))return!1;return!0}class ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function al(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sl{}class ll extends sl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new gl(e,t,n):"array-contains"===t?new wl(e,n):"in"===t?new _l(e,n):"not-in"===t?new Sl(e,n):"array-contains-any"===t?new El(e,n):new ll(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yl(e,n):new vl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Fs(t,this.value)):null!==t&&Ls(this.value)===Ls(t)&&this.matchesComparison(Fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Io(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cl extends sl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new cl(e,t)}matches(e){return ul(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ul(e){return"and"===e.op}function dl(e){return hl(e)&&ul(e)}function hl(e){for(const t of e.filters)if(t instanceof cl)return!1;return!0}function fl(e){if(e instanceof ll)return e.field.canonicalString()+e.op.toString()+zs(e.value);if(dl(e))return e.filters.map(e=>fl(e)).join(",");{const t=e.filters.map(e=>fl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function pl(e,t){return e instanceof ll?function(e,t){return t instanceof ll&&e.op===t.op&&e.field.isEqual(t.field)&&js(e.value,t.value)}(e,t):e instanceof cl?function(e,t){return t instanceof cl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&pl(n,t.filters[r]),!0)}(e,t):void Io(19439)}function ml(e){return e instanceof ll?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(zs(e.value))}(e):e instanceof cl?function(e){return e.op.toString()+" {"+e.getFilters().map(ml).join(" ,")+"}"}(e):"Filter"}class gl extends ll{constructor(e,t,n){super(e,t,n),this.key=na.fromName(n.referenceValue)}matches(e){const t=na.comparator(e.key,this.key);return this.matchesComparison(t)}}class yl extends ll{constructor(e,t){super(e,"in",t),this.keys=bl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vl extends ll{constructor(e,t){super(e,"not-in",t),this.keys=bl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>na.fromName(e.referenceValue))}class wl extends ll{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ks(t)&&Ms(t.arrayValue,this.value)}}class _l extends ll{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ms(this.value.arrayValue,t)}}class Sl extends ll{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ms(this.value.arrayValue,t)}}class El extends ll{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ks(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ms(this.value.arrayValue,e))}}class kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function xl(e){return new kl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Tl(e){const t=No(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>fl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Aa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>zs(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>zs(e)).join(",")),t.Te=e}return t.Te}function Cl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!al(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!il(e.startAt,t.startAt)&&il(e.endAt,t.endAt)}function Il(e){return na.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Al{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rl(e,t,n,r,i,o,a,s){return new Al(e,t,n,r,i,o,a,s)}function Nl(e){return new Al(e)}function Pl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dl(e){return null!==e.collectionGroup}function Ol(e){const t=No(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ds(ta.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ol(r,n))}),e.has(ta.keyField().canonicalString())||t.Ie.push(new ol(ta.keyField(),n))}return t.Ie}function Ll(e){const t=No(e);return t.Ee||(t.Ee=jl(t,Ol(e))),t.Ee}function jl(e,t){if("F"===e.limitType)return xl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ol(e.field,t)});const n=e.endAt?new nl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new nl(e.startAt.position,e.startAt.inclusive):null;return xl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ml(e,t){const n=e.filters.concat([t]);return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fl(e,t,n){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ul(e,t){return Cl(Ll(e),Ll(t))&&e.limitType===t.limitType}function Vl(e){return"".concat(Tl(Ll(e)),"|lt:").concat(e.limitType)}function zl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ml(e)).join(", "),"]")),Aa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>zs(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>zs(e)).join(",")),"Target(".concat(t,")")}(Ll(e)),"; limitType=").concat(e.limitType,")")}function Bl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):na.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ol(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=rl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ol(e),t))&&!(e.endAt&&!function(e,t,n){const r=rl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ol(e),t))}(e,t)}function Wl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ql(e){return(t,n)=>{let r=!1;for(const i of Ol(e)){const e=Hl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Hl(e,t,n){const r=e.field.isKeyField()?na.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fs(r,i):Io(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Io(19790,{direction:e.dir})}}class Kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ss(this.inner)}size(){return this.innerSize}}const Gl=new ls(na.comparator);function Ql(){return Gl}const Yl=new ls(na.comparator);function Jl(){let e=Yl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xl(e){let t=Yl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $l(){return ec()}function Zl(){return ec()}function ec(){return new Kl(e=>e.toString(),(e,t)=>e.isEqual(t))}const tc=new ls(na.comparator),nc=new ds(na.comparator);function rc(){let e=nc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ic=new ds(Ho);function oc(){return ic}function ac(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(t)?"-0":t}}function sc(e){return{integerValue:""+e}}function lc(e,t){return Na(t)?sc(t):ac(e,t)}class cc{constructor(){this._=void 0}}function uc(e,t,n){return e instanceof fc?function(e,t){const n={fields:{[_s]:{stringValue:ws},[Es]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ks(t)&&(t=xs(t)),t&&(n.fields[Ss]=t),{mapValue:n}}(n,t):e instanceof pc?mc(e,t):e instanceof gc?yc(e,t):function(e,t){const n=hc(e,t),r=bc(n)+bc(e.Ae);return Hs(n)&&Hs(e.Ae)?sc(r):ac(e.serializer,r)}(e,t)}function dc(e,t,n){return e instanceof pc?mc(e,t):e instanceof gc?yc(e,t):n}function hc(e,t){return e instanceof vc?function(e){return Hs(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class fc extends cc{}class pc extends cc{constructor(e){super(),this.elements=e}}function mc(e,t){const n=wc(t);for(const r of e.elements)n.some(e=>js(e,r))||n.push(r);return{arrayValue:{values:n}}}class gc extends cc{constructor(e){super(),this.elements=e}}function yc(e,t){let n=wc(t);for(const r of e.elements)n=n.filter(e=>!js(e,r));return{arrayValue:{values:n}}}class vc extends cc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bc(e){return vs(e.integerValue||e.doubleValue)}function wc(e){return Ks(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class _c{constructor(e,t){this.field=e,this.transform=t}}class Sc{constructor(e,t){this.version=e,this.transformResults=t}}class Ec{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ec}static exists(e){return new Ec(void 0,e)}static updateTime(e){return new Ec(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xc{}function Tc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jc(e.key,Ec.none()):new Nc(e.key,e.data,Ec.none());{const n=e.data,r=Zs.empty();let i=new ds(ta.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Pc(e.key,r,new fs(i.toArray()),Ec.none())}}function Cc(e,t,n){e instanceof Nc?function(e,t,n){const r=e.value.clone(),i=Oc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pc?function(e,t,n){if(!kc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Oc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Dc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ic(e,t,n,r){return e instanceof Nc?function(e,t,n,r){if(!kc(e.precondition,t))return n;const i=e.value.clone(),o=Lc(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Pc?function(e,t,n,r){if(!kc(e.precondition,t))return n;const i=Lc(e.fieldTransforms,r,t),o=t.data;return o.setAll(Dc(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return kc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ac(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=hc(r.transform,e||null);null!=i&&(null===n&&(n=Zs.empty()),n.set(r.field,i))}return n||null}function Rc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pc&&t instanceof pc||e instanceof gc&&t instanceof gc?Jo(e.elements,t.elements,js):e instanceof vc&&t instanceof vc?js(e.Ae,t.Ae):e instanceof fc&&t instanceof fc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nc extends xc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pc extends xc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Oc(e,t,n){const r=new Map;Ro(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,dc(a,s,n[i]))}return r}function Lc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,uc(e,o,t))}return r}class jc extends xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mc extends xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ic(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ic(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zl();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Tc(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(pa.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rc())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(e,t)=>Rc(e,t))&&Jo(this.baseMutations,e.baseMutations,(e,t)=>Rc(e,t))}}class Uc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ro(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=tc;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Uc(e,t,n,r)}}class Vc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class zc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bc,Wc;function qc(e){switch(e){case Po.OK:return Io(64938);case Po.CANCELLED:case Po.UNKNOWN:case Po.DEADLINE_EXCEEDED:case Po.RESOURCE_EXHAUSTED:case Po.INTERNAL:case Po.UNAVAILABLE:case Po.UNAUTHENTICATED:return!1;case Po.INVALID_ARGUMENT:case Po.NOT_FOUND:case Po.ALREADY_EXISTS:case Po.PERMISSION_DENIED:case Po.FAILED_PRECONDITION:case Po.ABORTED:case Po.OUT_OF_RANGE:case Po.UNIMPLEMENTED:case Po.DATA_LOSS:return!0;default:return Io(15467,{code:e})}}function Hc(e){if(void 0===e)return xo("GRPC error has no .code"),Po.UNKNOWN;switch(e){case Bc.OK:return Po.OK;case Bc.CANCELLED:return Po.CANCELLED;case Bc.UNKNOWN:return Po.UNKNOWN;case Bc.DEADLINE_EXCEEDED:return Po.DEADLINE_EXCEEDED;case Bc.RESOURCE_EXHAUSTED:return Po.RESOURCE_EXHAUSTED;case Bc.INTERNAL:return Po.INTERNAL;case Bc.UNAVAILABLE:return Po.UNAVAILABLE;case Bc.UNAUTHENTICATED:return Po.UNAUTHENTICATED;case Bc.INVALID_ARGUMENT:return Po.INVALID_ARGUMENT;case Bc.NOT_FOUND:return Po.NOT_FOUND;case Bc.ALREADY_EXISTS:return Po.ALREADY_EXISTS;case Bc.PERMISSION_DENIED:return Po.PERMISSION_DENIED;case Bc.FAILED_PRECONDITION:return Po.FAILED_PRECONDITION;case Bc.ABORTED:return Po.ABORTED;case Bc.OUT_OF_RANGE:return Po.OUT_OF_RANGE;case Bc.UNIMPLEMENTED:return Po.UNIMPLEMENTED;case Bc.DATA_LOSS:return Po.DATA_LOSS;default:return Io(39323,{code:e})}}(Wc=Bc||(Bc={}))[Wc.OK=0]="OK",Wc[Wc.CANCELLED=1]="CANCELLED",Wc[Wc.UNKNOWN=2]="UNKNOWN",Wc[Wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wc[Wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wc[Wc.NOT_FOUND=5]="NOT_FOUND",Wc[Wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wc[Wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wc[Wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wc[Wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wc[Wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wc[Wc.ABORTED=10]="ABORTED",Wc[Wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wc[Wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wc[Wc.INTERNAL=13]="INTERNAL",Wc[Wc.UNAVAILABLE=14]="UNAVAILABLE",Wc[Wc.DATA_LOSS=15]="DATA_LOSS";let Kc=null;function Gc(){return new TextEncoder}const Qc=new ro([4294967295,4294967295],0);function Yc(e){const t=Gc().encode(e),n=new io;return n.update(t),new Uint8Array(n.digest())}function Jc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ro([n,r],0),new ro([i,o],0)]}class Xc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $c("Invalid padding: ".concat(t));if(n<0)throw new $c("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new $c("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new $c("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ro.fromNumber(n)));return 1===r.compare(Qc)&&(r=new ro([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Yc(e),[n,r]=Jc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xc(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=Yc(e),[n,r]=Jc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Zc(pa.min(),r,new ls(Ho),Ql(),rc())}}class eu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new eu(n,t,rc(),rc(),rc())}}class tu{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class nu{constructor(e,t){this.targetId=e,this.Ce=t}}class ru{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ms.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class iu{constructor(){this.ve=0,this.Fe=su(),this.Me=ms.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rc(),t=rc(),n=rc();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Io(38017,{changeType:i})}}),new eu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=su()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ro(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ou{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ql(),this.Je=au(),this.He=au(),this.Ye=new ls(Ho)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Io(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Il(o))if(0===n){const e=new na(o.path);this.et(t,e,tl.newNoDocument(e,pa.min()))}else Ro(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Kc)||void 0===i||i.lt(function(e,t,n,r,i){var o,a,s,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=bs(n).toUint8Array()}catch(e){if(e instanceof ps)return To("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Xc(o,r,i)}catch(e){return To(e instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Il(i.target)){const t=new na(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,tl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=rc();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Zc(e,t,this.Ye,this.je,n);return this.je=Ql(),this.Je=au(),this.He=au(),this.Ye=new ls(Ho),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new iu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ds(Ho),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ds(Ho),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ko("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iu),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function au(){return new ls(na.comparator)}function su(){return new ls(na.comparator)}const lu={asc:"ASCENDING",desc:"DESCENDING"},cu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uu={and:"AND",or:"OR"};class du{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hu(e,t){return e.useProto3Json||Aa(t)?t:{value:t}}function fu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function pu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mu(e,t){return fu(e,t.toTimestamp())}function gu(e){return Ro(!!e,49232),pa.fromTimestamp(function(e){const t=ys(e);return new fa(t.seconds,t.nanos)}(e))}function yu(e,t){return vu(e,t).canonicalString()}function vu(e,t){const n=function(e){return new Zo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bu(e){const t=Zo.fromString(e);return Ro(Uu(t),10190,{key:t.toString()}),t}function wu(e,t){return yu(e.databaseId,t.path)}function _u(e,t){const n=bu(t);if(n.get(1)!==e.databaseId.projectId)throw new Do(Po.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Do(Po.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new na(xu(n))}function Su(e,t){return yu(e.databaseId,t)}function Eu(e){const t=bu(e);return 4===t.length?Zo.emptyPath():xu(t)}function ku(e){return new Zo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xu(e){return Ro(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Tu(e,t,n){return{name:wu(e,t),fields:n.value.mapValue.fields}}function Cu(e,t){let n;if(t instanceof Nc)n={update:Tu(e,t.key,t.value)};else if(t instanceof jc)n={delete:wu(e,t.key)};else if(t instanceof Pc)n={update:Tu(e,t.key,t.data),updateMask:Fu(t.fieldMask)};else{if(!(t instanceof Mc))return Io(16599,{Vt:t.type});n={verify:wu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof fc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Io(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Io(27497)}(e,t.precondition)),n}function Iu(e,t){return{documents:[Su(e,t.path)]}}function Au(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Su(e,i);const o=function(e){if(0!==e.length)return Mu(cl.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Lu(e.field),direction:Pu(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=hu(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ru(e){let t=Eu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ro(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Nu(e);return t instanceof cl&&dl(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new ol(ju(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Aa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new nl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new nl(n,t)}(n.endAt)),Rl(t,i,a,o,s,"F",l,c)}function Nu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ju(e.unaryFilter.field);return ll.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ju(e.unaryFilter.field);return ll.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ju(e.unaryFilter.field);return ll.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ju(e.unaryFilter.field);return ll.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Io(61313);default:return Io(60726)}}(e):void 0!==e.fieldFilter?function(e){return ll.create(ju(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Io(58110);default:return Io(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cl.create(e.compositeFilter.filters.map(e=>Nu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Io(1026)}}(e.compositeFilter.op))}(e):Io(30097,{filter:e})}function Pu(e){return lu[e]}function Du(e){return cu[e]}function Ou(e){return uu[e]}function Lu(e){return{fieldPath:e.canonicalString()}}function ju(e){return ta.fromServerFormat(e.fieldPath)}function Mu(e){return e instanceof ll?function(e){if("=="===e.op){if(Qs(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NAN"}};if(Gs(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qs(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NAN"}};if(Gs(e.value))return{unaryFilter:{field:Lu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(e.field),op:Du(e.op),value:e.value}}}(e):e instanceof cl?function(e){const t=e.getFilters().map(e=>Mu(e));return 1===t.length?t[0]:{compositeFilter:{op:Ou(e.op),filters:t}}}(e):Io(54877,{filter:e})}function Fu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Uu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Vu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pa.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pa.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ms.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zu{constructor(e){this.yt=e}}function Bu(e){const t=Ru({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fl(t,t.limit,"L"):t}class Wu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vs(e.integerValue));else if("doubleValue"in e){const n=vs(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ra(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ys(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(bs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?$s(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Js(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Io(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Os,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(vs(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),na.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Wu.Kt=new Wu;class qu{constructor(){this.Cn=new Hu}addToCollectionParentIndex(e,t){return this.Cn.add(t),ka.resolve()}getCollectionParents(e,t){return ka.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ka.resolve()}deleteFieldIndex(e,t){return ka.resolve()}deleteAllFieldIndexes(e){return ka.resolve()}createTargetIndexes(e,t){return ka.resolve()}getDocumentsMatchingTarget(e,t){return ka.resolve(null)}getIndexType(e,t){return ka.resolve(0)}getFieldIndexes(e,t){return ka.resolve([])}getNextCollectionGroupToUpdate(e){return ka.resolve(null)}getMinOffset(e,t){return ka.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,t){return ka.resolve(ba.min())}updateCollectionGroup(e,t,n){return ka.resolve()}updateIndexEntries(e,t){return ka.resolve()}}class Hu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ds(Zo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ds(Zo.comparator)).toArray()}}new Uint8Array(0);const Ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gu=41943040;class Qu{static withCacheSize(e){return new Qu(e,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Qu.DEFAULT_COLLECTION_PERCENTILE=10,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qu.DEFAULT=new Qu(Gu,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qu.DISABLED=new Qu(-1,0,0);class Yu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yu(0)}static cr(){return new Yu(-1)}}const Ju="LruGarbageCollector",Xu=1048576;function $u(e,t){let[n,r]=e,[i,o]=t;const a=Ho(n,i);return 0===a?Ho(r,o):a}class Zu{constructor(e){this.Ir=e,this.buffer=new ds($u),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();$u(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ed{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ko(Ju,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ta(e)?ko(Ju,"Ignoring IndexedDB error during garbage collection: ",e):await Ea(e)}await this.Vr(3e5)})}}class td{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ka.resolve(Ca.ce);const n=new Zu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ko("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(Ku)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ko("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ku):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ko("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Eo()<=Ct.$b.DEBUG&&ko("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-s)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ka.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function nd(e,t){return new td(e,t)}class rd{constructor(){this.changes=new Kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ka.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class id{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class od{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ic(n.mutation,e,fs.empty(),fa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,rc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rc();const r=$l();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Jl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$l();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,rc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ql();const o=ec(),a=ec();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Pc)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Ic(a.mutation,t,a.mutation.getFieldMask(),fa.now())):o.set(t.key,fs.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new id(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ec();let r=new ls((e,t)=>e-t),i=rc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||fs.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||rc()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=Zl();l.forEach(e=>{if(!i.has(e)){const r=Tc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return ka.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return na.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ka.resolve($l());let a=ma,s=i;return o.next(t=>ka.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ka.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,rc())).next(e=>({batchId:a,changes:Xl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new na(t)).next(e=>{let t=Jl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Jl();return this.indexManager.getCollectionParents(e,i).next(a=>ka.forEach(a,a=>{const s=function(e,t){return new Al(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tl.newInvalidDocument(r)))});let n=Jl();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Ic(o.mutation,r,fs.empty(),fa.now()),Bl(t,r)&&(n=n.insert(e,r))}),n})}}class ad{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ka.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:gu(e.createTime)}}(t)),ka.resolve()}getNamedQuery(e,t){return ka.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Bu(e.bundledQuery),readTime:gu(e.readTime)}}(t)),ka.resolve()}}class sd{constructor(){this.overlays=new ls(na.comparator),this.qr=new Map}getOverlay(e,t){return ka.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$l();return ka.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ka.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ka.resolve()}getOverlaysForCollection(e,t,n){const r=$l(),i=t.length+1,o=new na(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ka.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ls((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$l(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=$l(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ka.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vc(t,n));let i=this.qr.get(t);void 0===i&&(i=rc(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ld{constructor(){this.sessionToken=ms.EMPTY_BYTE_STRING}getSessionToken(e){return ka.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ka.resolve()}}class cd{constructor(){this.Qr=new ds(ud.$r),this.Ur=new ds(ud.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ud(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new ud(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new na(new Zo([])),n=new ud(t,e),r=new ud(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new na(new Zo([])),n=new ud(t,e),r=new ud(t,e+1);let i=rc();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ud(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ud{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return na.comparator(e.key,t.key)||Ho(e.Yr,t.Yr)}static Kr(e,t){return Ho(e.Yr,t.Yr)||na.comparator(e.key,t.key)}}class dd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ds(ud.$r)}checkEmpty(e){return ka.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Fc(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new ud(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ka.resolve(o)}lookupMutationBatch(e,t){return ka.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return ka.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.mutationQueue.length?Ia:this.tr-1)}getAllMutationBatches(e){return ka.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ud(t,0),r=new ud(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),ka.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ds(Ho);return t.forEach(e=>{const t=new ud(e,0),r=new ud(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ka.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;na.isDocumentKey(i)||(i=i.child(""));const o=new ud(new na(i),0);let a=new ds(Ho);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),ka.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ro(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ka.forEach(t.mutations,r=>{const i=new ud(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ud(t,0),r=this.Zr.firstAfterOrEqual(n);return ka.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ka.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hd{constructor(e){this.ri=e,this.docs=new ls(na.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ka.resolve(n?n.document.mutableCopy():tl.newInvalidDocument(t))}getEntries(e,t){let n=Ql();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tl.newInvalidDocument(e))}),ka.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ql();const o=t.path,a=new na(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||wa(va(a),n)<=0||(r.has(a.key)||Bl(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ka.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Io(9500)}ii(e,t){return ka.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new fd(this)}getSize(e){return ka.resolve(this.size)}}class fd extends rd{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ka.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class pd{constructor(e){this.persistence=e,this.si=new Kl(e=>Tl(e),Cl),this.lastRemoteSnapshotVersion=pa.min(),this.highestTargetId=0,this.oi=0,this._i=new cd,this.targetCount=0,this.ai=Yu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ka.resolve()}getLastRemoteSnapshotVersion(e){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ka.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ka.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ka.resolve()}updateTargetData(e,t){return this.Pr(t),ka.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ka.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ka.waitFor(i).next(()=>r)}getTargetCount(e){return ka.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ka.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ka.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ka.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ka.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ka.resolve(n)}containsKey(e,t){return ka.resolve(this._i.containsKey(t))}}class md{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ca(0),this.li=!1,this.li=!0,this.hi=new ld,this.referenceDelegate=e(this),this.Pi=new pd(this),this.indexManager=new qu,this.remoteDocumentCache=function(e){return new hd(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new zu(t),this.Ii=new ad(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new dd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ko("MemoryPersistence","Starting transaction:",e);const r=new gd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ka.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class gd extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Ri=new cd,this.Vi=null}static mi(e){return new yd(e)}get fi(){if(this.Vi)return this.Vi;throw Io(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ka.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ka.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.fi,n=>{const r=na.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,pa.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ka.or([()=>ka.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vd{constructor(e,t){this.persistence=e,this.pi=new Kl(e=>Da(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=nd(this,t)}static mi(e,t){return new vd(e,t)}Ei(){}di(e){return ka.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ka.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ka.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,pa.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ka.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ka.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ka.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ka.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ws(e.data.value)),t}br(e,t,n){return ka.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ka.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=rc(),r=rc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bd(e,t.fromCache,n,r)}}class wd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _d{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,Tt.nr)()?8:xa((0,Tt.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new wd;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Eo()<=Ct.$b.DEBUG&&ko("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ka.resolve()):(Eo()<=Ct.$b.DEBUG&&ko("QueryEngine","Query:",zl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Eo()<=Ct.$b.DEBUG&&ko("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ll(t))):ka.resolve())}ys(e,t){if(Pl(t))return ka.resolve(null);let n=Ll(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Fl(t,null,"F"),n=Ll(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=rc(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,Fl(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Pl(t)||r.isEqual(pa.min())?ka.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?ka.resolve(null):(Eo()<=Ct.$b.DEBUG&&ko("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zl(t)),this.vs(e,o,t,ya(r,ma)).next(e=>e))})}Ds(e,t){let n=new ds(ql(e));return t.forEach((t,r)=>{Bl(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Eo()<=Ct.$b.DEBUG&&ko("QueryEngine","Using full collection scan to execute query:",zl(t)),this.ps.getDocumentsMatchingQuery(e,t,ba.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Sd="LocalStore";class Ed{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ls(Ho),this.xs=new Kl(e=>Tl(e),Cl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new od(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function kd(e,t,n,r){return new Ed(e,t,n,r)}async function xd(e,t){const n=No(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=rc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function Td(e){const t=No(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Cd(e,t,n){let r=rc(),i=rc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ql();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(pa.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ko(Sd,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Id(e,t){const n=No(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ia),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ad(e,t){const n=No(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,ka.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Vu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Rd(e,t,n){const r=No(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ta(e))throw e;ko(Sd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Nd(e,t,n){const r=No(e);let i=pa.min(),o=rc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=No(e),i=r.xs.get(n);return void 0!==i?ka.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Ll(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:pa.min(),n?o:rc())).next(e=>(Pd(r,Wl(t),e),{documents:e,Qs:o})))}function Pd(e,t,n){let r=e.Os.get(t)||pa.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Dd{constructor(){this.activeTargetIds=oc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Od{constructor(){this.Mo=new Dd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ld{Oo(e){}shutdown(){}}const jd="ConnectivityMonitor";class Md{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ko(jd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ko(jd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Ud(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Vd="RestConnection",zd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Is?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Ud(),a=this.zo(e,t.toUriEncodedString());ko(Vd,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:l}=new URL(a),c=(0,Tt.zJ)(l);return this.Jo(e,a,s,n,c).then(t=>(ko(Vd,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw To(Vd,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_o,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=zd[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Wd{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qd="WebChannelConnection";class Hd extends Bd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Ud();return new Promise((i,a)=>{const s=new so;s.setWithCredentials(!0),s.listenOnce(co.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case uo.NO_ERROR:const n=s.getResponseJson();ko(qd,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case uo.TIMEOUT:ko(qd,"RPC '".concat(e,"' ").concat(o," timed out")),a(new Do(Po.DEADLINE_EXCEEDED,"Request time out"));break;case uo.HTTP_ERROR:const r=s.getStatus();if(ko(qd,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Po).indexOf(t)>=0?t:Po.UNKNOWN}(n.status);a(new Do(e,n.message))}else a(new Do(Po.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Do(Po.UNAVAILABLE,"Connection failed."));break;default:Io(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{ko(qd,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);ko(qd,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ud(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mo(),a=po(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");ko(qd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);this.I_(u);let d=!1,h=!1;const f=new Wd({Yo:t=>{h?ko(qd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ko(qd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ko(qd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,lo.EventType.OPEN,()=>{h||(ko(qd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,lo.EventType.CLOSE,()=>{h||(h=!0,ko(qd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,lo.EventType.ERROR,t=>{h||(h=!0,To(qd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Do(Po.UNAVAILABLE,"The operation could not be completed")))}),p(u,lo.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Ro(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){ko(qd,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Bc[e];if(void 0!==t)return Hc(t)}(t),i=a.message;void 0===n&&(n=Po.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Do(n,i)),u.close()}else ko(qd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,fo.STAT_EVENT,t=>{t.stat===ho.PROXY?ko(qd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ho.NOPROXY&&ko(qd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Kd(){return"undefined"!=typeof document?document:null}function Gd(e){return new du(e,!0)}class Qd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ko("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Yd="PersistentStream";class Jd{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Po.RESOURCE_EXHAUSTED?(xo(t.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Po.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Do(Po.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ko(Yd,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ko(Yd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xd extends Jd{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Io(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ro(void 0===t||"string"==typeof t,58123),ms.fromBase64String(t||"")):(Ro(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ms.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Po.UNKNOWN:Hc(e.code);return new Do(t,e.message||"")}(a);n=new ru(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_u(e,r.document.name),o=gu(r.document.updateTime),a=r.document.createTime?gu(r.document.createTime):pa.min(),s=new Zs({mapValue:{fields:r.document.fields}}),l=tl.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new tu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_u(e,r.document),o=r.readTime?gu(r.readTime):pa.min(),a=tl.newNoDocument(i,o),s=r.removedTargetIds||[];n=new tu([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_u(e,r.document),o=r.removedTargetIds||[];n=new tu([],o,i,null)}else{if(!("filter"in t))return Io(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new zc(r,i),a=e.targetId;n=new nu(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?pa.min():t.readTime?gu(t.readTime):pa.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ku(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Il(r)?{documents:Iu(e,r)}:{query:Au(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=pu(e,t.resumeToken);const r=hu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(pa.min())>0){n.readTime=fu(e,t.snapshotVersion.toTimestamp());const r=hu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Io(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ku(this.serializer),t.removeTarget=e,this.q_(t)}}class $d extends Jd{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ro(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ro(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ro(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ro(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?gu(e.updateTime):gu(t);return n.isEqual(pa.min())&&(n=gu(t)),new Sc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=gu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ku(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Cu(this.serializer,e))};this.q_(t)}}class Zd{}class eh extends Zd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Do(Po.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,vu(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Po.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Do(Po.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,vu(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Po.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Do(Po.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class th{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(xo(t),this.aa=!1):ko("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const nh="RemoteStore";class rh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{hh(this)&&(ko(nh,"Restarting streams for network reachability change."),await async function(e){const t=No(e);t.Ea.add(4),await oh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ih(t)}(this))})}),this.Ra=new th(n,r)}}async function ih(e){if(hh(e))for(const t of e.da)await t(!0)}async function oh(e){for(const t of e.da)await t(!1)}function ah(e,t){const n=No(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dh(n)?uh(n):Nh(n).O_()&&lh(n,t))}function sh(e,t){const n=No(e),r=Nh(n);n.Ia.delete(t),r.O_()&&ch(n,t),0===n.Ia.size&&(r.O_()?r.L_():hh(n)&&n.Ra.set("Unknown"))}function lh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nh(e).Y_(t)}function ch(e,t){e.Va.Ue(t),Nh(e).Z_(t)}function uh(e){e.Va=new ou({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Nh(e).start(),e.Ra.ua()}function dh(e){return hh(e)&&!Nh(e).x_()&&e.Ia.size>0}function hh(e){return 0===No(e).Ea.size}function fh(e){e.Va=void 0}async function ph(e){e.Ra.set("Online")}async function mh(e){e.Ia.forEach((t,n)=>{lh(e,t)})}async function gh(e,t){fh(e),dh(e)?(e.Ra.ha(t),uh(e)):e.Ra.set("Unknown")}async function yh(e,t,n){if(e.Ra.set("Online"),t instanceof ru&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ko(nh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await vh(e,n)}else if(t instanceof tu?e.Va.Ze(t):t instanceof nu?e.Va.st(t):e.Va.tt(t),!n.isEqual(pa.min()))try{const t=await Td(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ms.EMPTY_BYTE_STRING,r.snapshotVersion)),ch(e,t);const i=new Vu(r.target,t,n,r.sequenceNumber);lh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ko(nh,"Failed to raise snapshot:",t),await vh(e,t)}}async function vh(e,t,n){if(!Ta(t))throw t;e.Ea.add(1),await oh(e),e.Ra.set("Offline"),n||(n=()=>Td(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ko(nh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ih(e)})}function bh(e,t){return t().catch(n=>vh(e,n,t))}async function wh(e){const t=No(e),n=Ph(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ia;for(;_h(t);)try{const e=await Id(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Sh(t,e)}catch(e){await vh(t,e)}Eh(t)&&kh(t)}function _h(e){return hh(e)&&e.Ta.length<10}function Sh(e,t){e.Ta.push(t);const n=Ph(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Eh(e){return hh(e)&&!Ph(e).x_()&&e.Ta.length>0}function kh(e){Ph(e).start()}async function xh(e){Ph(e).ra()}async function Th(e){const t=Ph(e);for(const n of e.Ta)t.ea(n.mutations)}async function Ch(e,t,n){const r=e.Ta.shift(),i=Uc.from(r,t,n);await bh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wh(e)}async function Ih(e,t){t&&Ph(e).X_&&await async function(e,t){if(function(e){return qc(e)&&e!==Po.ABORTED}(t.code)){const n=e.Ta.shift();Ph(e).B_(),await bh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await wh(e)}}(e,t),Eh(e)&&kh(e)}async function Ah(e,t){const n=No(e);n.asyncQueue.verifyOperationInProgress(),ko(nh,"RemoteStore received new credentials");const r=hh(n);n.Ea.add(3),await oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ih(n)}async function Rh(e,t){const n=No(e);t?(n.Ea.delete(2),await ih(n)):t||(n.Ea.add(2),await oh(n),n.Ra.set("Unknown"))}function Nh(e){return e.ma||(e.ma=function(e,t,n){const r=No(e);return r.sa(),new Xd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ph.bind(null,e),t_:mh.bind(null,e),r_:gh.bind(null,e),H_:yh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),dh(e)?uh(e):e.Ra.set("Unknown")):(await e.ma.stop(),fh(e))})),e.ma}function Ph(e){return e.fa||(e.fa=function(e,t,n){const r=No(e);return r.sa(),new $d(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:xh.bind(null,e),r_:Ih.bind(null,e),ta:Th.bind(null,e),na:Ch.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await wh(e)):(await e.fa.stop(),e.Ta.length>0&&(ko(nh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Dh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Dh(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Do(Po.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oh(e,t){if(xo("AsyncQueue","".concat(t,": ").concat(e)),Ta(e))return new Do(Po.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Lh{static emptySet(e){return new Lh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||na.comparator(t.key,n.key):(e,t)=>na.comparator(e.key,t.key),this.keyedMap=Jl(),this.sortedSet=new ls(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Lh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jh{constructor(){this.ga=new ls(na.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Io(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Mh{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Mh(e,t,Lh.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Fh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Uh{constructor(){this.queries=Vh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=No(e),r=n.queries;n.queries=Vh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Do(Po.ABORTED,"Firestore shutting down"))}}function Vh(){return new Kl(e=>Vl(e),Ul)}async function zh(e,t){const n=No(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Fh,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Oh(e,"Initialization of query '".concat(zl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&Hh(n)}async function Bh(e,t){const n=No(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wh(e,t){const n=No(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Hh(n)}function qh(e,t,n){const r=No(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function Hh(e){e.Ca.forEach(e=>{e.next()})}var Kh,Gh;(Gh=Kh||(Kh={})).Ma="default",Gh.Cache="cache";class Qh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Mh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kh.Cache}}class Yh{constructor(e){this.key=e}}class Jh{constructor(e){this.key=e}}class Xh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rc(),this.mutatedKeys=rc(),this.eu=ql(e),this.tu=new Lh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new jh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Bl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.eu(u,s)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(a=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Io(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,l=s!==this.Za;return this.Za=s,0!==o.length||l?{snapshot:new Mh(this.query,e.tu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rc(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Jh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Yh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=rc();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const $h="SyncEngine";class Zh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ef{constructor(e){this.key=e,this.hu=!1}}class tf{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Kl(e=>Vl(e),Ul),this.Iu=new Map,this.Eu=new Set,this.du=new ls(na.comparator),this.Au=new Map,this.Ru=new cd,this.Vu={},this.mu=new Map,this.fu=Yu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function nf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=kf(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await of(r,t,n,!0),i}async function rf(e,t){const n=kf(e);await of(n,t,!0,!1)}async function of(e,t,n,r){const i=await Ad(e.localStore,Ll(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await af(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&ah(e.remoteStore,i),s}async function af(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Nd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return vf(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Nd(e.localStore,t,!0),a=new Xh(t,o.Qs),s=a.ru(o.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);vf(e,n,c.au);const u=new Zh(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function sf(e,t,n){const r=No(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Ul(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sh(r.remoteStore,i.targetId),gf(r,i.targetId)}).catch(Ea)):(gf(r,i.targetId),await Rd(r.localStore,i.targetId,!0))}async function lf(e,t){const n=No(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sh(n.remoteStore,r.targetId))}async function cf(e,t){const n=No(e);try{const e=await function(e,t){const n=No(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(ms.EMPTY_BYTE_STRING,pa.min()).withLastLimboFreeSnapshotVersion(pa.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&a.push(n.Pi.updateTargetData(e,c))});let s=Ql(),l=rc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Cd(e,o,t.documentUpdates).next(e=>{s=e.ks,l=e.qs})),!r.isEqual(pa.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ka.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ro(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ro(r.hu,14607):e.removedDocuments.size>0&&(Ro(r.hu,42227),r.hu=!1))}),await _f(n,e,t)}catch(e){await Ea(e)}}function uf(e,t,n){const r=No(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=No(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Hh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function df(e,t,n){const r=No(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new ls(na.comparator);e=e.insert(o,tl.newNoDocument(o,pa.min()));const n=rc().add(o),i=new Zc(pa.min(),new Map,new ls(Ho),e,n);await cf(r,i),r.du=r.du.remove(o),r.Au.delete(t),wf(r)}else await Rd(r.localStore,t,!1).then(()=>gf(r,t,n)).catch(Ea)}async function hf(e,t){const n=No(e),r=t.batch.batchId;try{const e=await function(e,t){const n=No(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=ka.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ro(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);mf(n,r,null),pf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _f(n,e)}catch(e){await Ea(e)}}async function ff(e,t,n){const r=No(e);try{const e=await function(e,t){const n=No(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ro(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);mf(r,t,n),pf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _f(r,e)}catch(n){await Ea(n)}}function pf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function mf(e,t,n){const r=No(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||yf(e,t)})}function yf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(sh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),wf(e))}function vf(e,t,n){for(const r of n)r instanceof Yh?(e.Ru.addReference(r.key,t),bf(e,r)):r instanceof Jh?(ko($h,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||yf(e,r.key)):Io(19791,{wu:r})}function bf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ko($h,"New document in limbo: "+n),e.Eu.add(r),wf(e))}function wf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new na(Zo.fromString(t)),r=e.fu.next();e.Au.set(r,new ef(n)),e.du=e.du.insert(n,r),ah(e.remoteStore,new Vu(Ll(Nl(n.path)),r,"TargetPurposeLimboResolution",Ca.ce))}}async function _f(e,t,n){const r=No(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=bd.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=No(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ka.forEach(t,t=>ka.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ka.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ta(e))throw e;ko(Sd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Sf(e,t){const n=No(e);if(!n.currentUser.isEqual(t)){ko($h,"User change. New user:",t.toKey());const e=await xd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Do(Po.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await _f(n,e.Ls)}}function Ef(e,t){const n=No(e),r=n.Au.get(t);if(r&&r.hu)return rc().add(r.key);{let e=rc();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function kf(e){const t=No(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ef.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=df.bind(null,t),t.Pu.H_=Wh.bind(null,t.eventManager),t.Pu.yu=qh.bind(null,t.eventManager),t}function xf(e){const t=No(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ff.bind(null,t),t}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kd(this.persistence,new _d,e.initialUser,this.serializer)}Cu(e){return new md(yd.mi,this.serializer)}Du(e){return new Od}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class Cf extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ro(this.persistence.referenceDelegate instanceof vd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ed(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Qu.withCacheSize(this.cacheSizeBytes):Qu.DEFAULT;return new md(e=>vd.mi(e,t),this.serializer)}}class If{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sf.bind(null,this.syncEngine),await Rh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Uh}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),n=function(e){return new Hd(e)}(e.databaseInfo);return function(e,t,n,r){return new eh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new rh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>uf(this.syncEngine,e,0),Md.v()?new Md:new Ld)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new tf(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=No(e);ko(nh,"RemoteStore shutting down."),t.Ea.add(5),await oh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}If.provider={build:()=>new If};class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Rf="FirestoreClient";class Nf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wo.UNAUTHENTICATED,this.clientId=qo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ko(Rf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ko(Rf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Oh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Pf(e,t){e.asyncQueue.verifyOperationInProgress(),ko(Rf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await xd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Df(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Of(e);ko(Rf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ah(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ah(t.remoteStore,n)),e._onlineComponents=t}async function Of(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ko(Rf,"Using user provided OfflineComponentProvider");try{await Pf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Po.FAILED_PRECONDITION||e.code===Po.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Pf(e,new Tf)}}else ko(Rf,"Using default OfflineComponentProvider"),await Pf(e,new Cf(void 0));return e._offlineComponents}async function Lf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ko(Rf,"Using user provided OnlineComponentProvider"),await Df(e,e._uninitializedComponentsProvider._online)):(ko(Rf,"Using default OnlineComponentProvider"),await Df(e,new If))),e._onlineComponents}function jf(e){return Lf(e).then(e=>e.syncEngine)}async function Mf(e){const t=await Lf(e),n=t.eventManager;return n.onListen=nf.bind(null,t.syncEngine),n.onUnlisten=sf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=rf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lf.bind(null,t.syncEngine),n}function Ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Af({next:s=>{o.Nu(),t.enqueueAndForget(()=>Bh(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new Do(Po.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new Do(Po.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Qh(Nl(n.path),o,{includeMetadataChanges:!0,qa:!0});return zh(e,a)}(await Mf(e),e.asyncQueue,t,n,r)),r.promise}function Uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Af({next:n=>{o.Nu(),t.enqueueAndForget(()=>Bh(e,a)),n.fromCache&&"server"===r.source?i.reject(new Do(Po.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Qh(n,o,{includeMetadataChanges:!0,qa:!0});return zh(e,a)}(await Mf(e),e.asyncQueue,t,n,r)),r.promise}function Vf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const zf=new Map,Bf="firestore.googleapis.com",Wf=!0;class qf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Do(Po.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bf,this.ssl=Wf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Wf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Gu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Xu)throw new Do(Po.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Do(Po.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Do(Po.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Do(Po.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jo;switch(e.type){case"firstParty":return new Vo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Do(Po.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zf.get(e);t&&(ko("ComponentProvider","Removing Datastore"),zf.delete(e),t.terminate())}(this),Promise.resolve()}}class Kf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Kf(this.firestore,e,this._query)}}class Gf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gf(this.firestore,e,this._key)}toJSON(){return{type:Gf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ua(t,Gf._jsonSchema))return new Gf(e,n||null,new na(Zo.fromString(t.referencePath)))}}Gf._jsonSchemaVersion="firestore/documentReference/1.0",Gf._jsonSchema={type:ca("string",Gf._jsonSchemaVersion),referencePath:ca("string")};class Qf extends Kf{constructor(e,t,n){super(e,t,Nl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gf(this.firestore,null,new na(e))}withConverter(e){return new Qf(this.firestore,e,this._path)}}function Yf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Tt.Ku)(e),ra("collection","path",t),e instanceof Hf){const n=Zo.fromString(t,...r);return oa(n),new Qf(e,null,n)}{if(!(e instanceof Gf||e instanceof Qf))throw new Do(Po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zo.fromString(t,...r));return oa(n),new Qf(e.firestore,null,n)}}function Jf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Tt.Ku)(e),1===arguments.length&&(t=qo.newId()),ra("doc","path",t),e instanceof Hf){const n=Zo.fromString(t,...r);return ia(n),new Gf(e,null,new na(n))}{if(!(e instanceof Gf||e instanceof Qf))throw new Do(Po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zo.fromString(t,...r));return ia(n),new Gf(e.firestore,e instanceof Qf?e.converter:null,new na(n))}}const Xf="AsyncQueue";class $f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qd(this,"async_queue_retry"),this._c=()=>{const e=Kd();e&&ko(Xf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Kd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Oo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(Py){if(!Ta(Py))throw Py;ko(Xf,"Operation failed with retryable error: "+Py)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,xo("INTERNAL UNHANDLED ERROR: ",Zf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Dh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Io(47125,{Pc:Zf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function ep(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class tp extends Hf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $f,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $f(e),this._firestoreClient=void 0,await e}}}function np(e){if(e._terminated)throw new Do(Po.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||rp(e),e._firestoreClient}function rp(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Cs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Vf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Nf(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ip{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ip(ms.fromBase64String(e))}catch(e){throw new Do(Po.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ip(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ip._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ua(e,ip._jsonSchema))return ip.fromBase64String(e.bytes)}}ip._jsonSchemaVersion="firestore/bytes/1.0",ip._jsonSchema={type:ca("string",ip._jsonSchemaVersion),bytes:ca("string")};class op{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Do(Po.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ta(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._methodName=e}}class sp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Do(Po.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Do(Po.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ho(this._lat,e._lat)||Ho(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sp._jsonSchemaVersion}}static fromJSON(e){if(ua(e,sp._jsonSchema))return new sp(e.latitude,e.longitude)}}sp._jsonSchemaVersion="firestore/geoPoint/1.0",sp._jsonSchema={type:ca("string",sp._jsonSchemaVersion),latitude:ca("number"),longitude:ca("number")};class lp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:lp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ua(e,lp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new lp(e.vectorValues);throw new Do(Po.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lp._jsonSchemaVersion="firestore/vectorValue/1.0",lp._jsonSchema={type:ca("string",lp._jsonSchemaVersion),vectorValues:ca("object")};const cp=/^__.*__$/;class up{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class dp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Io(40011,{Ac:e})}}class fp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fp((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ap(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(hp(this.Ac)&&cp.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gd(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fp({Ac:e,methodName:t,Dc:n,path:ta.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(e){const t=e._freezeSettings(),n=Gd(e._databaseId);return new pp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gp(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);xp("Data must be an object, but it was:",a,r);const s=Ep(r,a);let l,c;if(o.merge)l=new fs(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Tp(t,r,n);if(!a.contains(i))throw new Do(Po.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Rp(e,i)||e.push(i)}l=new fs(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new up(new Zs(s),l,c)}class yp extends ap{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}class vp extends ap{_toFieldTransform(e){return new _c(e.path,new fc)}isEqual(e){return e instanceof vp}}function bp(e,t,n,r){const i=e.Cc(1,t,n);xp("Data must be an object, but it was:",i,r);const o=[],a=Zs.empty();as(r,(e,r)=>{const s=Ip(t,e,n);r=(0,Tt.Ku)(r);const l=i.yc(s);if(r instanceof yp)o.push(s);else{const e=Sp(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new fs(o);return new dp(a,s,i.fieldTransforms)}function wp(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[Tp(t,r,n)],l=[i];if(o.length%2!=0)throw new Do(Po.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)s.push(Tp(t,o[h])),l.push(o[h+1]);const c=[],u=Zs.empty();for(let h=s.length-1;h>=0;--h)if(!Rp(c,s[h])){const e=s[h];let t=l[h];t=(0,Tt.Ku)(t);const n=a.yc(e);if(t instanceof yp)c.push(e);else{const r=Sp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new fs(c);return new dp(u,d,a.fieldTransforms)}function _p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sp(n,e.Cc(r?4:3,t))}function Sp(e,t){if(kp(e=(0,Tt.Ku)(e)))return xp("Unsupported field value:",t,e),Ep(e,t);if(e instanceof ap)return function(e,t){if(!hp(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sp(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Tt.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return lc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=fa.fromDate(e);return{timestampValue:fu(t.serializer,n)}}if(e instanceof fa){const n=new fa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fu(t.serializer,n)}}if(e instanceof sp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ip)return{bytesValue:pu(t.serializer,e._byteString)};if(e instanceof Gf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:yu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof lp)return function(e,t){return{mapValue:{fields:{[Rs]:{stringValue:Ds},[Os]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ac(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(sa(e)))}(e,t)}function Ep(e,t){const n={};return ss(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):as(e,(e,r)=>{const i=Sp(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function kp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof fa||e instanceof sp||e instanceof ip||e instanceof Gf||e instanceof ap||e instanceof lp)}function xp(e,t,n){if(!kp(n)||!aa(n)){const r=sa(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Tp(e,t,n){if((t=(0,Tt.Ku)(t))instanceof op)return t._internalPath;if("string"==typeof t)return Ip(e,t);throw Ap("Field path arguments must be of type string or ",e,!1,void 0,n)}const Cp=new RegExp("[~\\*/\\[\\]]");function Ip(e,t,n){if(t.search(Cp)>=0)throw Ap("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new op(...t.split("."))._internalPath}catch(r){throw Ap("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ap(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Do(Po.INVALID_ARGUMENT,s+e+l)}function Rp(e,t){return e.some(e=>e.isEqual(t))}class Np{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pp extends Np{data(){return super.data()}}function Dp(e,t){return"string"==typeof t?Ip(e,t):t instanceof op?t._internalPath:t._delegate._internalPath}function Op(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Do(Po.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class jp extends Lp{}function Mp(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Lp&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Vp).length,n=e.filter(e=>e instanceof Fp).length;if(t>1||t>0&&n>0)throw new Do(Po.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Fp extends jp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fp(e,t,n)}_apply(e){const t=this._parse(e);return qp(e._query,t),new Kf(e.firestore,e.converter,Ml(e._query,t))}_parse(e){const t=mp(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Do(Po.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Wp(a,o);const t=[];for(const n of a)t.push(Bp(r,e,n));s={arrayValue:{values:t}}}else s=Bp(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Wp(a,o),s=_p(n,t,a,"in"===o||"not-in"===o);return ll.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Up(e,t,n){const r=t,i=Dp("where",e);return Fp._create(i,r,n)}class Vp extends Lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:cl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)qp(n,i),n=Ml(n,i)}(e._query,t),new Kf(e.firestore,e.converter,Ml(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zp extends jp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(t,n)}(e._query,this._field,this._direction);return new Kf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Al(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Bp(e,t,n){if("string"==typeof(n=(0,Tt.Ku)(n))){if(""===n)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dl(t)&&-1!==n.indexOf("/"))throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Zo.fromString(n));if(!na.isDocumentKey(r))throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qs(e,new na(r))}if(n instanceof Gf)return qs(e,n._key);throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(sa(n),"."))}function Wp(e,t){if(!Array.isArray(e)||0===e.length)throw new Do(Po.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function qp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Do(Po.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Do(Po.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Hp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Io(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return as(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Os].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>vs(e.doubleValue));return new lp(n)}convertGeoPoint(e){return new sp(vs(e.latitude),vs(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ts(e));default:return null}}convertTimestamp(e){const t=ys(e);return new fa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zo.fromString(e);Ro(Uu(n),9688,{name:e});const r=new As(n.get(1),n.get(3)),i=new na(n.popFirst(5));return r.isEqual(t)||xo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Kp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qp extends Np{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Do(Po.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Qp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qp._jsonSchema={type:ca("string",Qp._jsonSchemaVersion),bundleSource:ca("string","DocumentSnapshot"),bundleName:ca("string"),bundle:ca("string")};class Yp extends Qp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Jp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Gp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Yp(this._firestore,this._userDataWriter,n.key,n,new Gp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Do(Po.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Yp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Gp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Yp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Xp(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Do(Po.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Xp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Io(61501,{type:e})}}function $p(e){e=la(e,Gf);const t=la(e.firestore,tp);return Ff(np(t),e._key).then(n=>rm(t,e,n))}Jp._jsonSchemaVersion="firestore/querySnapshot/1.0",Jp._jsonSchema={type:ca("string",Jp._jsonSchemaVersion),bundleSource:ca("string","QuerySnapshot"),bundleName:ca("string"),bundle:ca("string")};class Zp extends Hp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ip(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gf(this.firestore,null,t)}}function em(e,t,n){e=la(e,Gf);const r=la(e.firestore,tp),i=Kp(e.converter,t,n);return nm(r,[gp(mp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ec.none())])}function tm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,Tt.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||ep(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ep(n[o])){var s,l,c;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Gf)d=la(e.firestore,tp),h=Nl(e._key.path),u={next:t=>{n[o]&&n[o](rm(d,e,t))},error:n[o+1],complete:n[o+2]};else{const t=la(e,Kf);d=la(t.firestore,tp),h=t._query;const r=new Zp(d);u={next:e=>{n[o]&&n[o](new Jp(d,r,t,e))},error:n[o+1],complete:n[o+2]},Op(e._query)}return function(e,t,n,r){const i=new Af(r),o=new Qh(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>zh(await Mf(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Bh(await Mf(e),o))}}(np(d),h,a,u)}function nm(e,t){return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=xf(e);try{const e=await function(e,t){const n=No(e),r=fa.now(),i=t.reduce((e,t)=>e.add(t.key),rc());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Ql(),l=rc();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Ac(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Pc(e.key,t,el(t.value.mapValue),Ec.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Xl(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ls(Ho)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await _f(r,e.changes),await wh(r.remoteStore)}catch(e){const t=Oh(e,"Failed to persist write");n.reject(t)}}(await jf(e),t,n)),n.promise}(np(e),t)}function rm(e,t,n){const r=n.docs.get(t._key),i=new Zp(e);return new Qp(e,i,t._key,r,new Gp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_o=e}(xt.MF),(0,xt.om)(new It.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new tp(new Fo(e.getProvider("auth-internal")),new Bo(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Do(Po.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new As(e.options.projectId,t)}(o,r),o);return i=(0,s.A)({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,xt.KO)(vo,bo,e),(0,xt.KO)(vo,bo,"esm2020")}();const im=(0,xt.Wp)({apiKey:"AIzaSyDhj5l-c2o2U3Yc3ZN_rnbMlf8-MNCWfEA",authDomain:"tbreakapp.firebaseapp.com",projectId:"tbreakapp",storageBucket:"tbreakapp.firebasestorage.app",messagingSenderId:"152648510768",appId:"1:152648510768:web:3f3d7df7e4f1d608be2cf5"}),om=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,xt.Sx)();const t=(0,xt.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,xt.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,Tt.bD)(r,null!==t&&void 0!==t?t:{}))return e;Mt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ji,persistence:[ai,Vr,Hr]}),r=(0,Tt.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eo)return;const r=null===t||void 0===t?void 0:t.token;to!==r&&(to=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,Tt.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,Tt.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=(0,Tt.Tj)("auth");return o&&rr(n,"http://".concat(o)),n}(im),am=function(e,t){const n="object"==typeof e?e:(0,xt.Sx)(),r="string"==typeof e?e:t||Is,i=(0,xt.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,Tt.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=la(e,Hf);const i=(0,Tt.zJ)(t),o=e._getSettings(),a=(0,s.A)((0,s.A)({},o),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,Tt.gE)("https://".concat(l)),(0,Tt.P1)("Firestore",!0)),o.host!==Bf&&o.host!==l&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=(0,s.A)((0,s.A)({},o),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,Tt.bD)(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wo.MOCK_USER;else{var u;t=(0,Tt.Fy)(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Do(Po.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wo(i)}e._authCredentials=new Mo(new Lo(t,n))}}(i,...e)}return i}(im),sm=(e,t)=>async function(e,t,n){if((0,xt.xZ)(e.app))return Promise.reject(Vt(e));const r=Hn(e),i=tr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xr,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lr(e),t}),a=await Tr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(om,e,t),lm=(e,t)=>function(e,t,n){return(0,xt.xZ)(e.app)?Promise.reject(Vt(e)):Dr((0,Tt.Ku)(e),vr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lr(e),t})}(om,e,t),cm=e=>async function(e,t,n){const r=Hn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Or(r,i,n),await tr(r,i,"getOobCode",ur,"EMAIL_PASSWORD_PROVIDER")}(om,e),um=e=>function(e,t,n,r){return(0,Tt.Ku)(e).onAuthStateChanged(t,n,r)}(om,t=>{e(t)});var dm=n(579);const hm=(0,r.createContext)({authUser:null,profile:null,user:null}),fm=()=>(0,r.useContext)(hm),pm=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,a]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=um(e=>{i(e)});return()=>e()},[]),(0,r.useEffect)(()=>{if(!n)return void a(null);const e=tm(Jf(am,"users",n.uid),e=>{e.exists()?a(e.data()):a(null)});return()=>e()},[n]);const s={authUser:n,profile:o,user:n};return(0,dm.jsx)(hm.Provider,{value:s,children:t})},mm=async(e,t)=>{const n=Jf(am,"users",e);await em(n,t,{merge:!0})},gm=async e=>{const t=Jf(am,"users",e),n=await $p(t);return n.exists()?n.data():null},ym=async(e,t)=>{var n,r;const i=Jf(am,"users",e),o=await $p(i);if(!o.exists())return;const a=o.data(),s=null!==(n=a.rewards)&&void 0!==n&&n.medals?[...a.rewards.medals]:[];t.medal&&s.push(t.medal),await function(e,t,n){e=la(e,Gf);const r=la(e.firestore,tp),i=mp(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=(0,Tt.Ku)(t))||t instanceof op?wp(i,"updateDoc",e._key,t,n,s):bp(i,"updateDoc",e._key,t),nm(r,[o.toMutation(e._key,Ec.exists(!0))])}(i,{rewards:{coins:((null===(r=a.rewards)||void 0===r?void 0:r.coins)||0)+t.coins,medals:s}})},vm=["You have power over your mind - not outside events. Realize this, and you will find strength. - Marcus Aurelius","The impediment to action advances action. What stands in the way becomes the way. - Marcus Aurelius","He who fears death will never do anything worth of a man who is alive. - Seneca","Wealth consists not in having great possessions, but in having few wants. - Epictetus","It's not what happens to you, but how you react to it that matters. - Epictetus","First say to yourself what you would be; and then do what you have to do. - Epictetus","The happiness of your life depends upon the quality of your thoughts. - Marcus Aurelius","Waste no more time arguing about what a good man should be. Be one. - Marcus Aurelius","Every day is a new opportunity to grow stronger and more resilient.","Your brain is healing. Every hour without use is progress.","Discomfort is temporary. Regret lasts forever. Stay strong.","You're not giving up something - you're gaining clarity, energy, and control.","The urge will pass. It always does. Ride the wave.","Your future self is proud of the choice you're making today.","Healing isn't linear. Bad days don't erase your progress.","You're teaching your brain that you don't need it to feel good.","Every craving you resist makes the next one easier.","Your willpower is a muscle. Today you're making it stronger.","This break is an investment in your mental clarity and emotional stability.","You're proving to yourself that you're in control.","Progress, not perfection. Every day counts.","Your dopamine receptors are healing. Give them time.","The person you'll be after this break is worth the temporary discomfort.","Be here now. This moment is all you have.","Breathe. You've survived every difficult moment before this one.","Your anxiety about the future robs the present of its peace.","Cravings are just thoughts. Thoughts aren't commands.","Notice the urge, acknowledge it, let it pass like a cloud.","40 days of discipline creates a lifetime of freedom.","You didn't come this far to only come this far.","Small daily improvements lead to stunning long-term results.","Your commitment today determines your tomorrow.","Champions are made when no one is watching."],bm=[{title:"4-7-8 Breathing",description:"Inhale for 4 counts, hold for 7, exhale for 8. Calms the nervous system instantly.",duration:"2 minutes",icon:"\ud83e\udec1"},{title:"Progressive Muscle Relaxation",description:"Tense each muscle group for 5 seconds, then release. Start with toes, work up to head.",duration:"10 minutes",icon:"\ud83d\udcaa"},{title:"Cold Shower",description:"30-second cold blast releases endorphins and reduces inflammation. Great for cravings.",duration:"5 minutes",icon:"\ud83d\udebf"},{title:"Nature Walk",description:"Green spaces reduce cortisol by 15%. Just 20 minutes outdoors helps.",duration:"20 minutes",icon:"\ud83c\udf33"},{title:"Box Breathing (Navy SEAL technique)",description:"Inhale 4, hold 4, exhale 4, hold 4. Repeat. Used in high-stress situations.",duration:"5 minutes",icon:"\ud83d\udce6"},{title:"Guided Meditation",description:"Use apps like Headspace, Calm, or Insight Timer. Focus on body scan meditations.",duration:"10-20 minutes",icon:"\ud83e\uddd8"},{title:"Exercise",description:"Even 15 minutes boosts dopamine naturally. Try yoga, running, or bodyweight exercises.",duration:"15-30 minutes",icon:"\ud83c\udfc3"},{title:"Journaling",description:"Write about cravings, emotions, progress. Externalizing thoughts reduces their power.",duration:"10 minutes",icon:"\ud83d\udcdd"}],wm=[{id:"food",title:"Food & Nutrition",icon:"\ud83e\udd57",color:"#4CAF50",lightColor:"#E8F5E9",resources:[{name:"Leafy Greens (Spinach, Kale)",benefits:"Detoxification, liver support",helps:["cleanse","energy"],description:"Rich in chlorophyll which helps eliminate toxins and supports liver function"},{name:"Cruciferous Vegetables (Broccoli, Cauliflower)",benefits:"Speeds up metabolism, cleanse",helps:["cleanse","metabolism"],description:"Contain compounds that activate detox enzymes and speed THC elimination"},{name:"Citrus Fruits (Lemon, Grapefruit)",benefits:"Liver detox, vitamin C boost",helps:["cleanse","immunity"],description:"High in vitamin C and enzymes that support liver detoxification pathways"},{name:"Fatty Fish (Salmon, Mackerel)",benefits:"Brain healing, mood regulation",helps:["mood","brain"],description:"Omega-3 fatty acids restore brain chemistry and reduce inflammation"},{name:"Berries (Blueberries, Strawberries)",benefits:"Antioxidants, brain protection",helps:["brain","cleanse"],description:"High antioxidant content protects brain cells and aids detoxification"},{name:"Whole Grains (Brown Rice, Quinoa)",benefits:"Stable energy, mood balance",helps:["mood","energy"],description:"Complex carbs regulate blood sugar and serotonin production"},{name:"Nuts & Seeds (Walnuts, Chia)",benefits:"Omega-3s, anxiety relief",helps:["anxiety","brain"],description:"Essential fatty acids support nervous system and reduce anxiety"},{name:"Avocados",benefits:"Brain health, stress reduction",helps:["brain","anxiety"],description:"Healthy fats and B vitamins support neurotransmitter production"},{name:"Green Tea",benefits:"Metabolism boost, cleanse",helps:["cleanse","energy"],description:"Catechins accelerate fat metabolism and THC elimination"},{name:"Garlic & Onions",benefits:"Detox support, immunity",helps:["cleanse","immunity"],description:"Sulfur compounds enhance liver detoxification and immune function"}]},{id:"herbs",title:"Herbs & Supplements",icon:"\ud83c\udf3f",color:"#8BC34A",lightColor:"#F1F8E9",resources:[{name:"Milk Thistle",benefits:"Liver protection & regeneration",helps:["cleanse","liver"],description:"Silymarin protects liver cells and enhances detoxification capacity"},{name:"Ashwagandha",benefits:"Stress relief, anxiety reduction",helps:["anxiety","sleep"],description:"Adaptogen that reduces cortisol and calms nervous system"},{name:"Valerian Root",benefits:"Sleep improvement, relaxation",helps:["sleep","anxiety"],description:"Natural sedative that improves sleep quality without grogginess"},{name:"Passionflower",benefits:"Anxiety relief, calm mind",helps:["anxiety","mood"],description:"Increases GABA levels to reduce anxiety and promote relaxation"},{name:"St. John's Wort",benefits:"Mood enhancement, depression relief",helps:["mood","depression"],description:"Natural antidepressant that boosts serotonin and dopamine"},{name:"L-Theanine",benefits:"Calm focus, anxiety reduction",helps:["anxiety","focus"],description:"Amino acid from tea that promotes relaxation without drowsiness"},{name:"5-HTP",benefits:"Mood balance, sleep support",helps:["mood","sleep"],description:"Serotonin precursor that helps regulate mood and sleep cycles"},{name:"Rhodiola Rosea",benefits:"Energy, stress resilience",helps:["energy","anxiety"],description:"Adaptogen that combats fatigue and improves stress response"},{name:"Ginkgo Biloba",benefits:"Brain fog, memory support",helps:["brain","focus"],description:"Improves blood flow to brain, enhances cognitive function"},{name:"Chamomile",benefits:"Sleep, digestive calm",helps:["sleep","anxiety"],description:"Gentle sedative and anti-anxiety herb, promotes restful sleep"}]},{id:"vitamins",title:"Vitamins & Minerals",icon:"\ud83d\udc8a",color:"#FF9800",lightColor:"#FFF3E0",resources:[{name:"Vitamin C (1000-2000mg)",benefits:"Immune boost, detox support",helps:["cleanse","immunity"],description:"Powerful antioxidant that supports liver detoxification"},{name:"B-Complex Vitamins",benefits:"Energy, mood, brain function",helps:["energy","mood","brain"],description:"Essential for neurotransmitter production and energy metabolism"},{name:"Vitamin D3 (2000-4000 IU)",benefits:"Mood regulation, immunity",helps:["mood","immunity"],description:"Deficiency linked to depression; crucial for mental health"},{name:"Magnesium (400-500mg)",benefits:"Sleep, anxiety, muscle relaxation",helps:["sleep","anxiety","relaxation"],description:"Natural relaxant that improves sleep and reduces anxiety"},{name:"Zinc (15-30mg)",benefits:"Immune function, brain health",helps:["immunity","brain"],description:"Supports neurotransmitter function and immune response"},{name:"Omega-3 Fish Oil (1000-2000mg)",benefits:"Brain healing, inflammation",helps:["brain","mood"],description:"EPA/DHA restore brain cell membranes and reduce inflammation"},{name:"N-Acetyl Cysteine (NAC)",benefits:"Glutathione production, detox",helps:["cleanse","liver"],description:"Precursor to glutathione, the body's master detoxifier"},{name:"Probiotics",benefits:"Gut health, mood (gut-brain axis)",helps:["mood","digestion"],description:"90% of serotonin is made in the gut; healthy gut = better mood"},{name:"Melatonin (3-10mg)",benefits:"Sleep regulation",helps:["sleep"],description:"Natural sleep hormone; helps reset disrupted sleep cycles"},{name:"CoQ10",benefits:"Energy production, brain support",helps:["energy","brain"],description:"Cellular energy booster that combats fatigue"}]},{id:"sport",title:"Physical Exercise",icon:"\ud83d\udcaa",color:"#F44336",lightColor:"#FFEBEE",resources:[{name:"Cardio Exercise (Running, Cycling)",benefits:"Speeds THC elimination through sweat",helps:["cleanse","mood"],description:"30-45 min sessions increase metabolism and fat burning where THC is stored",frequency:"4-5 times per week"},{name:"Hot Yoga / Bikram",benefits:"Deep sweating, detoxification",helps:["cleanse","flexibility"],description:"Combines exercise with heat to maximize toxin elimination through sweat",frequency:"3-4 times per week"},{name:"Sauna Sessions",benefits:"Toxin release through sweating",helps:["cleanse","relaxation"],description:"15-20 min sessions help eliminate fat-soluble compounds like THC",frequency:"Daily if possible"},{name:"Swimming",benefits:"Full-body cardio, low impact",helps:["cleanse","anxiety"],description:"Gentle on joints while providing excellent cardiovascular workout",frequency:"3-5 times per week"},{name:"Strength Training",benefits:"Builds muscle, boosts metabolism",helps:["energy","mood"],description:"Increases lean muscle mass which raises basal metabolic rate",frequency:"3 times per week"},{name:"HIIT (High-Intensity Interval)",benefits:"Maximum fat burn, fast cleanse",helps:["cleanse","energy"],description:"Short bursts maximize fat oxidation and THC elimination",frequency:"2-3 times per week"},{name:"Walking in Nature",benefits:"Gentle movement, mental clarity",helps:["mood","anxiety"],description:"Low-impact exercise combined with nature therapy for mental health",frequency:"Daily, 30+ minutes"},{name:"Boxing / Martial Arts",benefits:"Stress release, discipline",helps:["anxiety","mood"],description:"Physical outlet for emotions while building mental strength",frequency:"2-4 times per week"}]},{id:"activities",title:"Wellness Activities",icon:"\ud83e\uddd8\u200d\u2640\ufe0f",color:"#9C27B0",lightColor:"#F3E5F5",resources:[{name:"Meditation (10-20 min)",benefits:"Anxiety relief, mental clarity",helps:["anxiety","focus"],description:"Mindfulness practice that rewires brain patterns and reduces cravings",frequency:"Daily"},{name:"Breathwork (Box Breathing)",benefits:"Immediate anxiety relief",helps:["anxiety","sleep"],description:"4-4-4-4 breathing pattern activates parasympathetic nervous system",frequency:"As needed, 5-10 min"},{name:"Journaling",benefits:"Emotional processing, clarity",helps:["mood","insight"],description:"Writing thoughts and feelings helps process withdrawal emotions",frequency:"Daily, before bed"},{name:"Cold Exposure (Showers)",benefits:"Mood boost, mental resilience",helps:["mood","energy"],description:"30-90 sec cold water increases dopamine and norepinephrine",frequency:"Daily, morning"},{name:"Massage Therapy",benefits:"Muscle tension, relaxation",helps:["anxiety","sleep"],description:"Releases physical tension and promotes parasympathetic state",frequency:"Weekly or bi-weekly"},{name:"Acupuncture",benefits:"Withdrawal symptom relief",helps:["anxiety","sleep","cravings"],description:"Stimulates endorphin release and balances energy systems",frequency:"1-2 times per week"},{name:"Art / Music Therapy",benefits:"Emotional expression, joy",helps:["mood","creativity"],description:"Creative outlets provide healthy dopamine stimulation",frequency:"As desired"},{name:"Social Connection",benefits:"Support, accountability",helps:["mood","motivation"],description:"Spending time with supportive people boosts oxytocin and motivation",frequency:"Multiple times per week"},{name:"Nature Immersion (Forest Bathing)",benefits:"Stress reduction, grounding",helps:["anxiety","mood"],description:"Spending time in nature lowers cortisol and improves mental health",frequency:"Weekly, 2+ hours"},{name:"Sleep Hygiene Routine",benefits:"Restorative sleep",helps:["sleep","recovery"],description:"Consistent bedtime, dark room, cool temp, no screens 1hr before bed",frequency:"Daily"}]}];function _m(e){let{onClose:t,onSubmit:n}=e;const[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)("");return(0,dm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,dm.jsxs)("div",{style:{background:"white",borderRadius:16,padding:30,maxWidth:500,width:"100%",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",animation:"slideInUp 0.4s ease-out"},children:[(0,dm.jsx)("h2",{style:{background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10,textAlign:"center"},children:"\ud83c\udf19 Evening Check-In"}),(0,dm.jsx)("p",{style:{textAlign:"center",color:"var(--gray-medium)",marginBottom:25},children:"How was your day today?"}),(0,dm.jsxs)("div",{style:{marginBottom:25},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12},children:"Rate your day:"}),(0,dm.jsx)("div",{style:{display:"flex",gap:10,justifyContent:"space-around"},children:[{emoji:"\ud83d\ude0a",label:"Great",color:"var(--joy-green)"},{emoji:"\ud83d\ude42",label:"Good",color:"var(--joy-teal)"},{emoji:"\ud83d\ude10",label:"Okay",color:"var(--joy-yellow)"},{emoji:"\ud83d\ude14",label:"Struggling",color:"var(--joy-orange)"},{emoji:"\ud83d\ude1e",label:"Difficult",color:"var(--joy-red)"}].map(e=>(0,dm.jsxs)("button",{onClick:()=>o(e.label),style:{padding:"15px 10px",border:i===e.label?"3px solid ".concat(e.color):"2px solid var(--gray-light)",borderRadius:12,background:i===e.label?"".concat(e.color,"20"):"white",cursor:"pointer",transition:"all 0.2s",flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:5},children:[(0,dm.jsx)("span",{style:{fontSize:"2rem"},children:e.emoji}),(0,dm.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:600},children:e.label})]},e.label))})]}),(0,dm.jsxs)("div",{style:{marginBottom:25},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:8},children:"Any thoughts? (optional)"}),(0,dm.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),placeholder:"How did you handle cravings? What helped? What was challenging?",rows:4,style:{width:"100%",padding:12,borderRadius:8,border:"1px solid var(--gray-light)",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"}})]}),(0,dm.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,dm.jsx)("button",{onClick:t,style:{flex:1,padding:"12px 20px",borderRadius:8,border:"2px solid var(--gray-light)",background:"white",color:"var(--gray-dark)",fontWeight:600,cursor:"pointer"},children:"Skip Tonight"}),(0,dm.jsx)("button",{onClick:()=>{i&&(n(i,a),t())},disabled:!i,style:{flex:2,padding:"12px 20px",borderRadius:8,border:"none",background:i?"var(--gradient-sunset)":"var(--gray-light)",color:"white",fontWeight:600,cursor:i?"pointer":"not-allowed",transition:"transform 0.2s"},onMouseEnter:e=>i&&(e.currentTarget.style.transform="scale(1.05)"),onMouseLeave:e=>i&&(e.currentTarget.style.transform="scale(1)"),children:"Submit Check-In"})]})]})})}function Sm(){var e,t,n,i,o,a,s;const{user:l}=fm(),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!l)return;(async()=>{const e=await gm(l.uid);if(h(e),null!==e&&void 0!==e&&e.startDate){const t=new Date(e.startDate),n=new Date,r=Math.floor((n.getTime()-t.getTime())/864e5);if(p(Math.max(0,r)),e.frequency&&e.yearsOfUse&&e.weight&&e.usageType){const t=function(e,t,n,r,i){let o=30;"light"===e?o=10:"moderate"===e?o=20:"heavy"===e?o=45:"chronic"===e&&(o=90),t>5&&(o+=15),t>10&&(o+=20),"edible"===r&&(o+=10),n>90&&(o+=7);const a=Math.min(100,100*(1-Math.exp(-i/(.4*o))));Math.max(0,o-i);let s="";return s=a<25?"Early detox - stay strong! \ud83d\udcaa":a<50?"Progress building! \ud83c\udf31":a<75?"More than halfway! \ud83d\ude80":a<95?"Almost there! \ud83c\udfaf":"System clear! \ud83c\udf89",{daysClean:i,estimatedDaysToFullClear:o,currentClearancePercent:Math.round(a),status:s}}(e.frequency,e.yearsOfUse,e.weight,e.usageType,r);v(t)}}g(vm[(f||1)%vm.length])})();const e=()=>{const e=new Date,t=e.getHours(),n=localStorage.getItem("lastNightlyCheckIn_".concat(l.uid)),r=e.toDateString();t>=20&&n!==r&&u(!0)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[l]);return(0,dm.jsxs)("div",{style:{padding:20,minHeight:"100vh",background:"linear-gradient(135deg, rgba(26, 188, 156, 0.05) 0%, rgba(142, 68, 173, 0.05) 100%)"},children:[(0,dm.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto"},children:[(0,dm.jsxs)("div",{style:{textAlign:"center",marginBottom:40,animation:"slideInDown 0.6s ease-out"},children:[(0,dm.jsx)("h1",{style:{fontSize:"3.5rem",background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10,animation:"bounce 3s ease-in-out infinite"},children:"\ud83c\udf89 T-Break40 \ud83c\udf89"}),l?(0,dm.jsxs)("div",{children:[(0,dm.jsxs)("p",{style:{fontSize:"1.3rem",color:"var(--joy-teal)",fontWeight:600},children:["\u2728 Welcome, ",l.email,"! \u2728"]}),(0,dm.jsx)("p",{style:{color:"var(--gray-medium)",marginTop:8},children:"You're on an amazing journey to transform your life"})]}):(0,dm.jsxs)("div",{children:[(0,dm.jsx)("p",{style:{fontSize:"1.2rem",color:"var(--joy-purple)",fontWeight:600},children:"Start your 40-day break journey!"}),(0,dm.jsxs)("nav",{style:{marginTop:20,display:"flex",gap:12,justifyContent:"center"},children:[(0,dm.jsx)(yt,{to:"/login",style:{padding:"12px 24px",background:"var(--gradient-cool)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600},children:"Login"}),(0,dm.jsx)(yt,{to:"/signup",style:{padding:"12px 24px",background:"var(--gradient-warm)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600},children:"Signup"})]})]})]}),l&&(0,dm.jsxs)(dm.Fragment,{children:[(0,dm.jsxs)("div",{style:{background:"var(--gradient-sunset)",backgroundSize:"200% 200%",padding:25,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",marginBottom:20,boxShadow:"var(--shadow-lg)",animation:"slideInUp 0.6s ease-out"},children:[(0,dm.jsx)("div",{style:{fontSize:"2rem",marginBottom:10},children:"\ud83d\udcad"}),(0,dm.jsxs)("p",{style:{fontSize:"1.1rem",fontStyle:"italic",margin:0,lineHeight:1.6,color:"rgba(255,255,255,0.98)"},children:['"',m,'"']})]}),y&&(0,dm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.7s ease-out"},children:[(0,dm.jsx)("h3",{style:{background:"var(--gradient-cool)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83e\uddea Metabolite Clearance Tracker"}),(0,dm.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:15,marginBottom:20},children:[(0,dm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-teal-light)",borderRadius:8},children:[(0,dm.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-teal)"},children:f}),(0,dm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Days Clean"})]}),(0,dm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-orange-light)",borderRadius:8},children:[(0,dm.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-orange)"},children:y.estimatedDaysToFullClear-f}),(0,dm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Days Remaining"})]}),(0,dm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-green-light)",borderRadius:8},children:[(0,dm.jsxs)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-green)"},children:[y.currentClearancePercent,"%"]}),(0,dm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Cleared"})]})]}),(0,dm.jsx)("div",{style:{width:"100%",height:20,background:"var(--gray-light)",borderRadius:10,overflow:"hidden",marginBottom:10},children:(0,dm.jsx)("div",{style:{width:"".concat(y.currentClearancePercent,"%"),height:"100%",background:"var(--gradient-forest)",transition:"width 1s ease-out"}})}),(0,dm.jsx)("p",{style:{textAlign:"center",color:"var(--joy-green)",fontWeight:600,margin:0},children:y.status})]}),(0,dm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:[(0,dm.jsx)("h3",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83e\uddd8 Quick Relaxation Techniques"}),(0,dm.jsx)("div",{style:{display:"grid",gap:12},children:bm.slice(0,4).map(e=>(0,dm.jsxs)("div",{style:{padding:15,background:"var(--gray-lightest)",borderRadius:8,borderLeft:"4px solid var(--joy-teal)"},children:[(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:5},children:[(0,dm.jsx)("span",{style:{fontSize:"1.5rem"},children:e.icon}),(0,dm.jsx)("strong",{style:{color:"var(--joy-teal)"},children:e.title}),(0,dm.jsx)("span",{style:{marginLeft:"auto",fontSize:"0.85rem",color:"var(--gray-medium)",background:"white",padding:"4px 8px",borderRadius:4},children:e.duration})]}),(0,dm.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--gray-dark)"},children:e.description})]},e.title))})]}),(0,dm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.9s ease-out"},children:[(0,dm.jsx)("h3",{style:{background:"var(--gradient-forest)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83c\udf1f Wellness Resources & Support"}),(0,dm.jsx)("p",{style:{color:"var(--gray-dark)",marginBottom:20},children:"Click a category to explore resources that help with detox, anxiety, sleep, and more!"}),(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:15,marginBottom:20},children:wm.map(e=>(0,dm.jsxs)("div",{onClick:()=>w(b===e.id?null:e.id),style:{padding:20,background:b===e.id?e.lightColor:"var(--gray-lightest)",borderRadius:12,textAlign:"center",cursor:"pointer",border:b===e.id?"3px solid ".concat(e.color):"3px solid transparent",transition:"all 0.3s ease",transform:b===e.id?"scale(1.05)":"scale(1)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="var(--shadow-lg)"},onMouseLeave:t=>{t.currentTarget.style.transform=b===e.id?"scale(1.05)":"scale(1)",t.currentTarget.style.boxShadow="none"},children:[(0,dm.jsx)("div",{style:{fontSize:"3rem",marginBottom:8},children:e.icon}),(0,dm.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:600,color:e.color},children:e.title})]},e.id))}),b&&(0,dm.jsxs)("div",{style:{background:null===(e=wm.find(e=>e.id===b))||void 0===e?void 0:e.lightColor,padding:20,borderRadius:12,border:"2px solid ".concat(null===(t=wm.find(e=>e.id===b))||void 0===t?void 0:t.color),animation:"slideInUp 0.4s ease-out"},children:[(0,dm.jsxs)("h4",{style:{color:null===(n=wm.find(e=>e.id===b))||void 0===n?void 0:n.color,marginTop:0,marginBottom:15,display:"flex",alignItems:"center",gap:10},children:[(0,dm.jsx)("span",{style:{fontSize:"1.5rem"},children:null===(i=wm.find(e=>e.id===b))||void 0===i?void 0:i.icon}),null===(o=wm.find(e=>e.id===b))||void 0===o?void 0:o.title]}),(0,dm.jsx)("div",{style:{display:"grid",gap:12},children:null===(a=wm.find(e=>e.id===b))||void 0===a?void 0:a.resources.map((e,t)=>{var n,r,i;return(0,dm.jsxs)("div",{style:{padding:15,background:"white",borderRadius:8,boxShadow:"var(--shadow-sm)"},children:[(0,dm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,dm.jsx)("strong",{style:{color:null===(n=wm.find(e=>e.id===b))||void 0===n?void 0:n.color,fontSize:"1.05rem"},children:e.name}),e.frequency&&(0,dm.jsx)("span",{style:{fontSize:"0.75rem",background:null===(r=wm.find(e=>e.id===b))||void 0===r?void 0:r.lightColor,padding:"4px 8px",borderRadius:4,color:null===(i=wm.find(e=>e.id===b))||void 0===i?void 0:i.color,fontWeight:600},children:e.frequency})]}),(0,dm.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--joy-teal)",fontWeight:600,marginBottom:6},children:["\u2713 ",e.benefits]}),(0,dm.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--gray-dark)",lineHeight:1.5},children:e.description}),(0,dm.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:e.helps.map(e=>(0,dm.jsx)("span",{style:{fontSize:"0.7rem",background:"var(--gray-lightest)",padding:"3px 8px",borderRadius:12,color:"var(--gray-medium)",textTransform:"uppercase",fontWeight:600},children:e},e))})]},t)})}),(0,dm.jsx)("button",{onClick:()=>w(null),style:{marginTop:15,padding:"10px 20px",background:null===(s=wm.find(e=>e.id===b))||void 0===s?void 0:s.color,color:"white",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,width:"100%"},children:"\u2190 Back to Categories"})]})]}),(0,dm.jsxs)("div",{style:{background:"var(--gradient-rainbow)",backgroundSize:"200% 200%",padding:20,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",marginBottom:30,boxShadow:"var(--shadow-lg)",animation:"slideInUp 1s ease-out"},children:[(0,dm.jsx)("h2",{style:{color:"white",marginTop:0},children:"\ud83d\ude80 Keep Going! \ud83d\ude80"}),(0,dm.jsx)("p",{style:{color:"rgba(255,255,255,0.95)"},children:"Log your mood, track your progress, and connect with our amazing community!"})]})]}),(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:20},children:[{path:"/checkin",label:"Daily Check-in",icon:"\ud83d\udcdd",color:"var(--gradient-warm)"},{path:"/calendar",label:"Emotion Calendar",icon:"\ud83d\udcc5",color:"var(--gradient-ocean)"},{path:"/chat",label:"Community Chat",icon:"\ud83d\udcac",color:"var(--gradient-cool)"},{path:"/nutrition",label:"Nutrition Center",icon:"\ud83e\udd57",color:"var(--gradient-forest)"},{path:"/estimator",label:"Metabolite Estimator",icon:"\u2697\ufe0f",color:"var(--gradient-sunset)"},{path:"/profile",label:"My Profile",icon:"\ud83d\udc64",color:"var(--gradient-ocean)"},{path:"/donations",label:"\ud83d\udc9a Support Us (Donations)",icon:"\ud83c\udf81",color:"var(--gradient-warm)",isSpecial:!0}].map(e=>(0,dm.jsx)(yt,{to:e.path,style:{textDecoration:"none",color:"inherit",animation:"slideInUp 0.6s ease-out forwards"},children:(0,dm.jsxs)("div",{style:{background:e.color,backgroundSize:"200% 200%",padding:20,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",boxShadow:"var(--shadow-md)",transition:"all var(--transition-normal)",cursor:"pointer",transform:"scale(1)",border:"none"},onMouseEnter:e=>{const t=e.currentTarget;t.style.transform="translateY(-8px) scale(1.05)",t.style.boxShadow="var(--shadow-xl)"},onMouseLeave:e=>{const t=e.currentTarget;t.style.transform="scale(1)",t.style.boxShadow="var(--shadow-md)"},children:[(0,dm.jsx)("div",{style:{fontSize:"3rem",marginBottom:12,animation:"bounce 2s ease-in-out infinite"},children:e.icon}),(0,dm.jsx)("h3",{style:{color:"white",marginTop:0,fontSize:"1.2rem",fontWeight:700,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:e.label}),(0,dm.jsx)("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"0.95rem",margin:0,fontWeight:500},children:e.isSpecial?"Make a difference":"Click to explore"})]})},e.path))}),(0,dm.jsx)("div",{style:{textAlign:"center",marginTop:40,padding:20,background:"white",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:(0,dm.jsx)("p",{style:{fontSize:"1.1rem",color:"var(--gray-dark)"},children:"\ud83d\udcaa Remember: Every day you stay strong, you're building a better tomorrow!"})})]}),c&&(0,dm.jsx)(_m,{onClose:()=>u(!1),onSubmit:async(e,t)=>{l&&(await mm(l.uid,{lastNightlyCheckIn:(new Date).toISOString(),lastNightlyMood:e,lastNightlyNotes:t}),localStorage.setItem("lastNightlyCheckIn_".concat(l.uid),(new Date).toDateString()),u(!1))}})]})}const Em=e=>7===e?"bronze":20===e?"silver":40===e?"gold":null,km=()=>new Promise((e,t)=>{const n=indexedDB.open("tbreak-offline-db",1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("daily-entries")){const e=t.createObjectStore("daily-entries",{keyPath:"id"});e.createIndex("userId","userId",{unique:!1}),e.createIndex("date","date",{unique:!1})}t.objectStoreNames.contains("pending-changes")||t.createObjectStore("pending-changes",{keyPath:"id"}),t.objectStoreNames.contains("metadata")||t.createObjectStore("metadata",{keyPath:"key"})}}),xm=async(e,t,n)=>{const r=await km(),i="".concat(e,"-").concat(Date.now());return new Promise((o,a)=>{const s=r.transaction(["pending-changes"],"readwrite").objectStore("pending-changes").put({id:i,endpoint:e,method:t,data:n,timestamp:Date.now(),synced:!1});s.onerror=()=>a(s.error),s.onsuccess=()=>o(i)})},Tm=()=>navigator.onLine,Cm="dailyEntries",Im=async e=>{try{const r=Jf(am,Cm,e.id);await em(r,e,{merge:!0});try{const n=1===(t=e.dayNumber)?5:t%7===0?10:1;await ym(e.userId,{coins:n,medal:Em(e.dayNumber)})}catch(n){console.warn("Failed to update user rewards:",n)}}catch(r){if(!Tm())return console.log("Offline: Queuing daily entry for sync"),await(async e=>{const t=await km();return new Promise((n,r)=>{const i=t.transaction(["daily-entries"],"readwrite").objectStore("daily-entries").put((0,s.A)((0,s.A)({},e),{},{_synced:!0,_pendingDelete:!1}));i.onerror=()=>r(i.error),i.onsuccess=()=>n()})})(e),await xm("/dailyEntries/".concat(e.id),"PUT",e),{success:!0,queued:!0};throw r}var t},Am=async(e,t)=>{try{const n=Mp(Yf(am,Cm),Up("userId","==",e),Up("dayNumber","==",t)),r=await function(e){e=la(e,Kf);const t=la(e.firestore,tp),n=np(t),r=new Zp(t);return Op(e._query),Uf(n,e._query).then(n=>new Jp(t,r,e,n))}(n);return r.empty?null:r.docs[0].data()}catch(n){if(!Tm()){console.log("Offline: Fetching daily entry from local cache");const n=await(async e=>{const t=await km();return new Promise((n,r)=>{const i=t.transaction(["daily-entries"],"readonly").objectStore("daily-entries").index("userId").getAll(e);i.onerror=()=>r(i.error),i.onsuccess=()=>n(i.result||[])})})(e);return n.find(e=>e.dayNumber===t)||null}throw n}};function Rm(){var e;const{user:t,profile:n}=fm(),[i,o]=(0,r.useState)("\ud83d\ude42"),[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(0),[u,d]=(0,r.useState)("moderate"),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),v=null!==n&&void 0!==n&&n.startDate?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return 1;const n=new Date(e);if(isNaN(n.getTime()))return 1;const r=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),i=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),o=Math.floor((i-r)/864e5);return Math.max(1,o+1)}(n.startDate):1,b=[{emoji:"\ud83d\ude14",label:"Struggling",color:"var(--gradient-sunset)"},{emoji:"\ud83d\ude10",label:"Neutral",color:"var(--gradient-cool)"},{emoji:"\ud83d\ude42",label:"Good",color:"var(--gradient-forest)"},{emoji:"\ud83d\ude04",label:"Excellent",color:"linear-gradient(135deg, #ff6b35 0%, #2ecc71 100%)"}];(0,r.useEffect)(()=>{const e=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderate";const r=Math.max(0,Number(e)||0),i={light:1,moderate:3,heavy:7,chronic:14},o=null!==(t=i[n])&&void 0!==t?t:i.moderate,a=100*(1-Math.pow(.5,r/o)),s=Math.max(0,Math.min(100,a));return Math.round(10*s)/10}(l,u);y(e)},[l,u]),(0,r.useEffect)(()=>{if(!t)return;let e=!0;return(async()=>{try{const n=await Am(t.uid,v);if(!e||!n)return;"number"===typeof n.metaboliteClearPercent&&y(n.metaboliteClearPercent)}catch(n){}})(),()=>{e=!1}},[t]);const w=v/40*100;return(0,dm.jsx)("div",{style:{padding:20,minHeight:"100vh",background:"linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(46, 204, 113, 0.05) 100%)"},children:(0,dm.jsxs)("div",{style:{maxWidth:600,margin:"0 auto"},children:[(0,dm.jsxs)("div",{style:{textAlign:"center",marginBottom:30,animation:"slideInDown 0.6s ease-out"},children:[(0,dm.jsx)("h1",{style:{fontSize:"2.5rem",background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10},children:"\ud83d\udccb Daily Check-in"}),(0,dm.jsxs)("div",{style:{display:"inline-block",padding:"12px 24px",background:"var(--gradient-ocean)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600,fontSize:"1.1rem"},children:["Day ",v," / 40"]})]}),(0,dm.jsxs)("div",{style:{marginBottom:30,background:"white",padding:20,borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",animation:"slideInUp 0.6s ease-out"},children:[(0,dm.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--gray-medium)",marginBottom:8},children:["Progress: ",Math.round(w),"%"]}),(0,dm.jsx)("div",{style:{width:"100%",height:12,background:"var(--gray-light)",borderRadius:"var(--radius-md)",overflow:"hidden"},children:(0,dm.jsx)("div",{style:{width:"".concat(w,"%"),height:"100%",background:"var(--gradient-sunset)",transition:"width 0.5s ease-out"}})})]}),(0,dm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.65s ease-out"},children:[(0,dm.jsx)("label",{style:{display:"block",fontSize:"1.1rem",fontWeight:700,marginBottom:16,color:"var(--joy-purple)"},children:"How do you feel today? \ud83d\ude0a"}),(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:b.map(e=>(0,dm.jsx)("button",{onClick:()=>o(e.emoji),className:i===e.emoji?"active":"",style:{background:i===e.emoji?e.color:"white",color:i===e.emoji?"white":"var(--gray-dark)",border:i===e.emoji?"none":"2px solid var(--gray-light)",fontSize:"2rem",padding:16,borderRadius:"var(--radius-lg)",cursor:"pointer",transition:"all var(--transition-normal)",transform:i===e.emoji?"scale(1.1)":"scale(1)",boxShadow:i===e.emoji?"var(--shadow-lg)":"var(--shadow-sm)"},children:e.emoji},e.emoji))}),i&&(0,dm.jsx)("p",{style:{textAlign:"center",marginTop:16,color:"var(--joy-teal)",fontWeight:600,animation:"slideInUp 0.3s ease-out"},children:null===(e=b.find(e=>e.emoji===i))||void 0===e?void 0:e.label})]}),(0,dm.jsx)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.7s ease-out"},children:(0,dm.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer",fontWeight:600,fontSize:"1.05rem",color:"var(--gray-dark)"},children:[(0,dm.jsx)("input",{type:"checkbox",checked:a,onChange:e=>s(e.target.checked),style:{cursor:"pointer",width:20,height:20}}),(0,dm.jsxs)("span",{children:[a?"\u274c":"\u2705"," I used cannabis today"]})]})}),(0,dm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.75s ease-out"},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12,color:"var(--joy-purple)"},children:"Days since last use: \ud83d\udcc5"}),(0,dm.jsx)("input",{type:"number",min:0,value:l,onChange:e=>c(Number(e.target.value)),style:{width:"100%",padding:12,border:"2px solid var(--gray-light)",borderRadius:"var(--radius-md)",fontSize:"1rem",transition:"all var(--transition-normal)"}})]}),(0,dm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12,color:"var(--joy-purple)"},children:"Usage frequency: \ud83d\udcca"}),(0,dm.jsxs)("select",{value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:"var(--radius-md)",fontSize:"1rem",background:"white",cursor:"pointer",transition:"all var(--transition-normal)"},children:[(0,dm.jsx)("option",{value:"light",children:"\ud83d\udfe2 Light"}),(0,dm.jsx)("option",{value:"moderate",children:"\ud83d\udfe1 Moderate"}),(0,dm.jsx)("option",{value:"heavy",children:"\ud83d\udd34 Heavy"}),(0,dm.jsx)("option",{value:"chronic",children:"\ud83d\udd34\ud83d\udd34 Chronic"})]})]}),null!==g&&(0,dm.jsxs)("div",{style:{background:"var(--gradient-warm)",color:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-lg)",animation:"slideInUp 0.85s ease-out"},children:[(0,dm.jsx)("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:8},children:"Estimated metabolite clearance"}),(0,dm.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:700,marginBottom:12},children:[g,"% \ud83e\uddea"]}),(0,dm.jsx)("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:1.5},children:"Based on your usage pattern, your system should be mostly clear soon!"})]}),p&&(0,dm.jsx)("div",{style:{background:p.includes("Error")?"var(--gradient-sunset)":"var(--gradient-forest)",color:"white",padding:16,borderRadius:"var(--radius-lg)",marginBottom:20,textAlign:"center",fontWeight:600,animation:"slideInUp 0.4s ease-out"},children:p}),(0,dm.jsx)("button",{onClick:async()=>{if(!t)return void m("You need to be logged in to save.");f(!0),m("");const e={id:"".concat(t.uid,"-").concat(v),userId:t.uid,dayNumber:v,date:(new Date).toISOString(),morningMood:i,usedToday:a,metaboliteClearPercent:null!==g&&void 0!==g?g:void 0};try{await Im(e),m("\u2728 Check-in saved! Great job! \u2728"),setTimeout(()=>m(""),3e3)}catch(n){console.error(n),m("\u274c Error saving check-in.")}finally{f(!1)}},disabled:h,style:{width:"100%",padding:18,fontSize:"1.1rem",fontWeight:700,background:h?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:"var(--radius-lg)",cursor:h?"not-allowed":"pointer",transition:"all var(--transition-normal)",boxShadow:"var(--shadow-lg)",transform:h?"scale(0.98)":"scale(1)",animation:"slideInUp 0.9s ease-out"},children:h?"\ud83d\udcbe Saving...":"\u2728 Save My Check-in \u2728"})]})})}function Nm(e){let{entries:t,onSelectDay:n}=e;const r=Array.from({length:40},(e,t)=>t+1);return(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 40px)",gap:"6px",padding:"20px"},children:r.map(e=>{const r=t.find(t=>t.dayNumber===e);return(0,dm.jsx)("div",{onClick:()=>n(r||null),style:{width:40,height:40,borderRadius:8,backgroundColor:(i=null===r||void 0===r?void 0:r.morningMood,o=null===r||void 0===r?void 0:r.usedToday,o?"#ff4d4d":i?"\ud83d\ude1e"===i?"#4db8ff":"\ud83d\ude10"===i?"#f4d03f":"\ud83d\ude42"===i?"#82e0aa":"\ud83d\ude0e"===i?"#f7c600":"#ccc":"#ccc"),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",fontSize:13,color:"#000"},children:e},e);var i,o})})}function Pm(){const{user:e}=fm(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;(async()=>{const t=[];for(let n=1;n<=40;n++){const r=await Am(e.uid,n);r&&t.push(r)}n(t)})()},[e]),(0,dm.jsxs)("div",{style:{padding:20},children:[(0,dm.jsx)("h1",{children:"Emotion Calendar"}),(0,dm.jsx)("p",{children:"Click any day to view notes."}),(0,dm.jsx)(Nm,{entries:t,onSelectDay:e=>o(e)}),i&&(0,dm.jsxs)("div",{style:{marginTop:20,padding:10,border:"1px solid #ccc",borderRadius:8},children:[(0,dm.jsxs)("h3",{children:["Day ",i.dayNumber]}),(0,dm.jsxs)("p",{children:["Mood: ",i.morningMood]}),(0,dm.jsxs)("p",{children:["Used: ",i.usedToday?"Yes":"No"]}),(0,dm.jsx)("p",{children:i.journal||"No journal entry"})]})]})}const Dm="chatMessages",Om=async function(e,t,n,r,i,o,a,l){const c={userId:e,chatDisplayName:t,chatAvatar:n,chatAvatarCustom:arguments.length>9?arguments[9]:void 0,avatarType:r,message:i,streakDays:o,relapse:a,medals:l,coins:arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,createdAt:new vp("serverTimestamp")};try{await function(e,t){const n=la(e.firestore,tp),r=Jf(e),i=Kp(e.converter,t);return nm(n,[gp(mp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ec.exists(!1))]).then(()=>r)}(Yf(am,Dm),c)}catch(u){if(!Tm())return console.log("Offline: Queuing chat message for sync"),await xm("/chatMessages","POST",(0,s.A)((0,s.A)({},c),{},{createdAt:Date.now()})),{success:!0,queued:!0};throw u}},Lm=e=>tm(Mp(Yf(am,Dm),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Dp("orderBy",e);return zp._create(n,t)}("createdAt","desc")),t=>{const n=t.docs.map(e=>{var t,n,r,i,o;const a=e.data();return{id:e.id,userId:a.userId,chatDisplayName:a.chatDisplayName||"Anonymous",chatAvatar:a.chatAvatar||"smile",chatAvatarCustom:a.chatAvatarCustom,avatarType:a.avatarType,message:a.message,streakDays:a.streakDays,relapse:a.relapse,medals:null!==(t=a.medals)&&void 0!==t?t:[],coins:null!==(n=a.coins)&&void 0!==n?n:0,createdAt:null!==(r=null===(i=a.createdAt)||void 0===i||null===(o=i.toMillis)||void 0===o?void 0:o.call(i))&&void 0!==r?r:Date.now()}});e(n)}),jm=(0,r.createContext)(void 0),Mm=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(()=>navigator.onLine),[o,a]=(0,r.useState)(0),[s,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{i(!0),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{const t=e.sync;t&&t.register("sync-offline-data").catch(e=>{console.log("Background sync registration failed (may be unsupported):",e)})})},t=()=>{i(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{const e=async()=>{const e=await(async()=>{const e=await km();return new Promise((t,n)=>{const r=e.transaction(["pending-changes"],"readonly").objectStore("pending-changes").getAll();r.onerror=()=>n(r.error),r.onsuccess=()=>t(r.result||[])})})();a(e.length)};e(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{var n,r,i;"SYNC_COMPLETE"===(null===(n=t.data)||void 0===n?void 0:n.type)?e():"SYNC_START"===(null===(r=t.data)||void 0===r?void 0:r.type)?l(!0):"SYNC_ERROR"===(null===(i=t.data)||void 0===i?void 0:i.type)&&l(!1)});const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,dm.jsx)(jm.Provider,{value:{isOnline:n,pendingChangesCount:o,isSyncing:s},children:t})},Fm=()=>{const e=(0,r.useContext)(jm);if(!e)throw new Error("useOfflineContext must be used within OfflineProvider");return e},Um=[{id:"smile",display:"\ud83d\ude0a",category:"Classic",name:"Happy Face"},{id:"cool",display:"\ud83d\ude0e",category:"Classic",name:"Cool"},{id:"star",display:"\u2b50",category:"Classic",name:"Star"},{id:"fire",display:"\ud83d\udd25",category:"Classic",name:"Fire"},{id:"rocket",display:"\ud83d\ude80",category:"Classic",name:"Rocket"},{id:"brain",display:"\ud83e\udde0",category:"Classic",name:"Brain"},{id:"heart",display:"\u2764\ufe0f",category:"Classic",name:"Heart"},{id:"strong",display:"\ud83d\udcaa",category:"Classic",name:"Strong"},{id:"lion",display:"\ud83e\udd81",category:"Nature",name:"Lion"},{id:"eagle",display:"\ud83e\udd85",category:"Nature",name:"Eagle"},{id:"wolf",display:"\ud83d\udc3a",category:"Nature",name:"Wolf"},{id:"phoenix",display:"\ud83d\udd25\ud83d\udc26",category:"Nature",name:"Phoenix"},{id:"tree",display:"\ud83c\udf33",category:"Nature",name:"Tree"},{id:"mountain",display:"\ud83c\udfd4\ufe0f",category:"Nature",name:"Mountain"},{id:"ocean",display:"\ud83c\udf0a",category:"Nature",name:"Ocean"},{id:"sun",display:"\u2600\ufe0f",category:"Nature",name:"Sun"},{id:"warrior",display:"\u2694\ufe0f",category:"Heroes",name:"Warrior"},{id:"shield",display:"\ud83d\udee1\ufe0f",category:"Heroes",name:"Shield"},{id:"crown",display:"\ud83d\udc51",category:"Heroes",name:"Crown"},{id:"ninja",display:"\ud83e\udd77",category:"Heroes",name:"Ninja"},{id:"viking",display:"\u26a1",category:"Heroes",name:"Viking"},{id:"samurai",display:"\ud83d\udde1\ufe0f",category:"Heroes",name:"Samurai"},{id:"book",display:"\ud83d\udcda",category:"Wisdom",name:"Scholar"},{id:"lightbulb",display:"\ud83d\udca1",category:"Wisdom",name:"Thinker"},{id:"crystal",display:"\ud83d\udd2e",category:"Wisdom",name:"Mystic"},{id:"telescope",display:"\ud83d\udd2d",category:"Wisdom",name:"Explorer"},{id:"atom",display:"\u269b\ufe0f",category:"Wisdom",name:"Scientist"},{id:"lotus",display:"\ud83e\uddd8",category:"Zen",name:"Meditator"},{id:"peace",display:"\u262e\ufe0f",category:"Zen",name:"Peace"},{id:"yin-yang",display:"\u262f\ufe0f",category:"Zen",name:"Balance"},{id:"leaf",display:"\ud83c\udf43",category:"Zen",name:"Zen Leaf"},{id:"bamboo",display:"\ud83c\udf8b",category:"Zen",name:"Bamboo"},{id:"controller",display:"\ud83c\udfae",category:"Gaming",name:"Gamer"},{id:"dice",display:"\ud83c\udfb2",category:"Gaming",name:"Dice"},{id:"trophy",display:"\ud83c\udfc6",category:"Gaming",name:"Champion"},{id:"medal",display:"\ud83e\udd47",category:"Gaming",name:"Gold Medal"},{id:"einstein",display:"\ud83d\udc68\u200d\ud83d\udd2c",category:"Historical",name:"Einstein"},{id:"philosopher",display:"\ud83e\uddd9",category:"Historical",name:"Philosopher"},{id:"artist",display:"\ud83d\udc68\u200d\ud83c\udfa8",category:"Historical",name:"Artist"},{id:"musician",display:"\ud83c\udfb5",category:"Historical",name:"Musician"}],Vm=["Brave","Wise","Strong","Calm","Swift","Noble","Fierce","Bright","Bold","Silent","Free","Rising","Golden","Silver","Crystal","Mystic","Ancient","Eternal","Phoenix","Dragon","Tiger","Eagle","Wolf","Lion","Storm","Thunder","Ocean","Mountain","Forest","Cosmic","Lunar","Solar"],zm=["Warrior","Sage","Guardian","Seeker","Wanderer","Dreamer","Phoenix","Spirit","Soul","Knight","Monk","Ranger","Scholar","Hero","Champion","Voyager","Pioneer","Explorer","Sentinel","Defender","Pathfinder","Traveler","Nomad","Pilgrim","Keeper","Watcher","Shadow","Light"],Bm=()=>{const e=Vm[Math.floor(Math.random()*Vm.length)],t=zm[Math.floor(Math.random()*zm.length)],n=Math.floor(999*Math.random())+1;return"".concat(e).concat(t).concat(n)},Wm="firebasestorage.googleapis.com",qm="storageBucket";class Hm extends Tt.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Qm(e),"Firebase Storage: ".concat(t," (").concat(Qm(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hm.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Km,Gm;function Qm(e){return"storage/"+e}function Ym(){return new Hm(Km.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Jm(){return new Hm(Km.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xm(){return new Hm(Km.CANCELED,"User canceled the upload/download.")}function $m(){return new Hm(Km.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zm(e){return new Hm(Km.INVALID_ARGUMENT,e)}function eg(){return new Hm(Km.APP_DELETED,"The Firebase app was deleted.")}function tg(e,t){return new Hm(Km.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ng(e){throw new Hm(Km.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Km||(Km={}));class rg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=rg.makeFromUrl(e,t)}catch(Py){return new rg(e,"")}if(""===n.path)return n;throw r=e,new Hm(Km.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Wm?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new rg(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Hm(Km.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ig{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function og(e){return"string"===typeof e||e instanceof String}function ag(e){return sg()&&e instanceof Blob}function sg(){return"undefined"!==typeof Blob}function lg(e,t,n,r){if(r<t)throw Zm("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Zm("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function cg(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ug(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function dg(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Gm||(Gm={}));class hg{constructor(e,t,n,r,i,o,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new fg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Gm.NO_ERROR,i=n.getStatus();if(!t||dg(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Gm.ABORT;return void e(!1,new fg(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new fg(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Py){r(Py)}else if(null!==i){const e=Ym();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?eg():Xm())}else{r(Jm())}};this.canceled_?t(0,new fg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function pg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function mg(){const e=pg();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(sg())return new Blob(n);throw new Hm(Km.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function gg(e){if("undefined"===typeof atob)throw t="base-64",new Hm(Km.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const yg="raw",vg="base64",bg="base64url",wg="data_url";class _g{constructor(e,t){this.data=e,this.contentType=t||null}}function Sg(e,t){switch(e){case yg:return new _g(Eg(t));case vg:case bg:return new _g(kg(e,t));case wg:return new _g(function(e){const t=new xg(e);return t.base64?kg(vg,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Py){throw tg(wg,"Malformed data URL.")}return Eg(t)}(t.rest)}(t),new xg(t).contentType)}throw Ym()}function Eg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function kg(e,t){switch(e){case vg:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw tg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case bg:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw tg(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gg(t)}catch(Py){if(Py.message.includes("polyfill"))throw Py;throw tg(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xg{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tg(wg,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Tg{constructor(e,t){let n=0,r="";ag(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ag(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Tg(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Tg(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(sg()){const e=t.map(e=>e instanceof Tg?e.data_:e);return new Tg(mg.apply(null,e))}{const e=t.map(e=>og(e)?Sg(yg,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Tg(r,!0)}}uploadData(){return this.data_}}function Cg(e){let t;try{t=JSON.parse(e)}catch(Py){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ig(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ag(e,t){return t}class Rg{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ag}}let Ng=null;function Pg(){if(Ng)return Ng;const e=[];e.push(new Rg("bucket")),e.push(new Rg("generation")),e.push(new Rg("metageneration")),e.push(new Rg("name","fullPath",!0));const t=new Rg("name");t.xform=function(e,t){return function(e){return!og(e)||e.length<2?e:Ig(e)}(t)},e.push(t);const n=new Rg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Rg("timeCreated")),e.push(new Rg("updated")),e.push(new Rg("md5Hash",null,!0)),e.push(new Rg("cacheControl",null,!0)),e.push(new Rg("contentDisposition",null,!0)),e.push(new Rg("contentEncoding",null,!0)),e.push(new Rg("contentLanguage",null,!0)),e.push(new Rg("contentType",null,!0)),e.push(new Rg("metadata","customMetadata",!0)),Ng=e,Ng}function Dg(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new rg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Og(e,t,n){const r=Cg(t);if(null===r)return null;return Dg(e,r,n)}function Lg(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class jg{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mg(e){if(!e)throw Ym()}function Fg(e,t){return function(n,r){const i=Og(e,r,t);return Mg(null!==i),i}}function Ug(e,t){return function(n,r){const i=Og(e,r,t);return Mg(null!==i),function(e,t,n,r){const i=Cg(t);if(null===i)return null;if(!og(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return cg("/b/"+a(i)+"/o/"+a(o),n,r)+ug({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Vg(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Hm(Km.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Hm(Km.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Hm(Km.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Hm(Km.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function zg(e){const t=Vg(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Hm(Km.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Bg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wg(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=Bg(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Lg(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=Tg.getBlob(c,r,u);if(null===d)throw $m();const h={name:l.fullPath},f=cg(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new jg(f,"POST",Fg(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Vg(t),m}class qg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw ng("cannot .send() more than once");if((0,Tt.zJ)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ng("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ng("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Py){return-1}}getResponse(){if(!this.sent_)throw ng("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ng("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Hg extends qg{initXhr(){this.xhr_.responseType="text"}}function Kg(){return new Hg}class Gg{constructor(e,t){this._service=e,this._location=t instanceof rg?t:rg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gg(e,t)}get root(){const e=new rg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ig(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new rg(this._location.bucket,e);return new Gg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Hm(Km.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Qg(e,t,n){e._throwIfRoot("uploadBytes");const r=Wg(e.storage,e._location,Pg(),new Tg(t,!0),n);return e.storage.makeRequestWithTokens(r,Kg).then(t=>({metadata:t,ref:e}))}function Yg(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=cg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new jg(r,"GET",Ug(e,n),i);return o.errorHandler=zg(t),o}(e.storage,e._location,Pg());return e.storage.makeRequestWithTokens(t,Kg).then(e=>{if(null===e)throw new Hm(Km.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Jg(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new rg(e._location.bucket,n);return new Gg(e.storage,r)}function Xg(e,t){if(e instanceof ey){const n=e;if(null==n._bucket)throw new Hm(Km.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qm+"' property when initializing the app?");const r=new Gg(n,n._bucket);return null!=t?Xg(r,t):r}return void 0!==t?Jg(e,t):e}function $g(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ey)return new Gg(e,t);throw Zm("To use ref(service, url), the first argument must be a Storage instance.")}return Xg(e,t)}function Zg(e,t){const n=null===t||void 0===t?void 0:t[qm];return null==n?null:rg.makeFromBucketSpec(n,e)}class ey{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Wm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?rg.makeFromBucketSpec(r,this._host):Zg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=rg.makeFromBucketSpec(this._url,e):this._bucket=Zg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,xt.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gg(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ig(eg());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=ug(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new hg(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,s)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const ty="@firebase/storage",ny="0.14.0",ry="storage";function iy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,xt.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,Tt.Ku)(e);const n=(0,xt.j6)(e,ry).getImmediate({identifier:t}),r=(0,Tt.yU)("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=(0,Tt.zJ)(t);i&&((0,Tt.gE)("https://".concat(e.host,"/b")),(0,Tt.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:(0,Tt.Fy)(o,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function oy(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new ey(r,i,o,n,xt.MF)}function ay(e){var t;let{onComplete:n,onCancel:i}=e;const{user:o}=fm(),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("Classic"),[h,f]=(0,r.useState)([]),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f([Bm(),Bm(),Bm()])},[]);const w=async()=>{if(!p||!o)return null;try{b(!0);const n=iy(),r="avatars/".concat(o.uid,"_").concat(Date.now(),".jpg"),i=(e=n,t=r,$g(e=(0,Tt.Ku)(e),t)),a=await _(p,200,200);await function(e,t,n){return Qg(e=(0,Tt.Ku)(e),t,n)}(i,a);const s=await function(e){return Yg(e=(0,Tt.Ku)(e))}(i);return s}catch(n){return console.error("Error uploading avatar:",n),alert("Failed to upload avatar. Please try again."),null}finally{b(!1)}var e,t},_=(e,t,n)=>new Promise((r,i)=>{const o=new Image,a=document.createElement("canvas"),s=a.getContext("2d");o.onload=()=>{let e=o.width,l=o.height;e>l?e>t&&(l*=t/e,e=t):l>n&&(e*=n/l,l=n),a.width=e,a.height=l,null===s||void 0===s||s.drawImage(o,0,0,e,l),a.toBlob(e=>{e?r(e):i(new Error("Failed to resize image"))},"image/jpeg",.8)},o.onerror=()=>i(new Error("Failed to load image")),o.src=URL.createObjectURL(e)}),S=(()=>{const e=Um.map(e=>e.category);return Array.from(new Set(e))})();return(0,dm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,dm.jsxs)("div",{style:{background:"white",borderRadius:"var(--radius-lg)",padding:30,maxWidth:600,width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",animation:"slideInUp 0.4s ease-out"},children:[(0,dm.jsx)("h2",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:10},children:"\ud83c\udfad Set Up Your Chat Identity"}),(0,dm.jsx)("p",{style:{color:"var(--gray-dark)",marginBottom:25},children:"Choose an anonymous display name and avatar to protect your privacy in the community chat."}),(0,dm.jsxs)("div",{style:{marginBottom:25},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:10},children:"Display Name (Anonymous)"}),(0,dm.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Enter a name or pick a suggestion below",maxLength:20,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}}),(0,dm.jsxs)("div",{style:{marginTop:10},children:[(0,dm.jsx)("div",{style:{fontSize:"0.85rem",color:"var(--gray-medium)",marginBottom:8},children:"\ud83d\udca1 Suggested anonymous names:"}),(0,dm.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[h.map(e=>(0,dm.jsx)("button",{onClick:()=>s(e),style:{padding:"6px 12px",background:a===e?"var(--joy-teal)":"var(--gray-lightest)",color:a===e?"white":"var(--gray-dark)",border:"none",borderRadius:6,cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:e},e)),(0,dm.jsx)("button",{onClick:()=>{f([Bm(),Bm(),Bm()])},style:{padding:"6px 12px",background:"white",color:"var(--joy-purple)",border:"2px solid var(--joy-purple)",borderRadius:6,cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"\ud83d\udd04 More"})]})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:25},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:10},children:"Choose Your Avatar"}),(0,dm.jsxs)("div",{style:{padding:15,background:"var(--gray-lightest)",borderRadius:8,marginBottom:15,border:"custom"===l?"3px solid var(--joy-teal)":"2px solid transparent"},children:[(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,dm.jsxs)("label",{style:{flex:1,padding:"10px 16px",background:"var(--gradient-sunset)",color:"white",borderRadius:8,cursor:"pointer",textAlign:"center",fontWeight:600,fontSize:"0.95rem"},children:["\ud83d\udcf8 Upload Your Photo",(0,dm.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return void alert("Image must be less than 5MB");if(!n.type.startsWith("image/"))return void alert("Please select an image file");m(n),c("custom");const e=new FileReader;e.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n)}},style:{display:"none"}})]}),g&&(0,dm.jsxs)("div",{style:{position:"relative"},children:[(0,dm.jsx)("img",{src:g,alt:"Preview",style:{width:60,height:60,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--joy-teal)"}}),(0,dm.jsx)("button",{onClick:()=>{m(null),y(null),c("")},style:{position:"absolute",top:-5,right:-5,background:"#f44336",color:"white",border:"none",borderRadius:"50%",width:20,height:20,cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]})]}),(0,dm.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--gray-medium)",marginTop:8},children:"Max 5MB \u2022 JPG, PNG, GIF \u2022 Will be resized to 200x200px"})]}),(0,dm.jsx)("div",{style:{textAlign:"center",color:"var(--gray-medium)",fontSize:"0.9rem",marginBottom:10},children:"\u2014 OR choose an emoji avatar \u2014"}),(0,dm.jsx)("div",{style:{display:"flex",gap:8,marginBottom:15,overflowX:"auto",paddingBottom:8},children:S.map(e=>(0,dm.jsx)("button",{onClick:()=>d(e),style:{padding:"8px 16px",background:u===e?"var(--gradient-ocean)":"var(--gray-lightest)",color:u===e?"white":"var(--gray-dark)",border:"none",borderRadius:8,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,whiteSpace:"nowrap"},children:e},e))}),(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(70px, 1fr))",gap:10,padding:15,background:"var(--gray-lightest)",borderRadius:8,maxHeight:300,overflowY:"auto"},children:(E=u,Um.filter(e=>e.category===E)).map(e=>(0,dm.jsx)("div",{onClick:()=>c(e.id),title:e.name,style:{padding:10,background:l===e.id?"var(--joy-teal-light)":"white",border:l===e.id?"3px solid var(--joy-teal)":"2px solid transparent",borderRadius:8,cursor:"pointer",textAlign:"center",fontSize:"2rem",transition:"all 0.2s ease",aspectRatio:"1"},children:e.display},e.id))})]}),a&&l&&(0,dm.jsxs)("div",{style:{padding:15,background:"var(--joy-teal-light)",borderRadius:8,marginBottom:20,border:"2px solid var(--joy-teal)"},children:[(0,dm.jsx)("div",{style:{fontSize:"0.85rem",color:"var(--gray-dark)",marginBottom:8},children:"Preview:"}),(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:["custom"===l&&g?(0,dm.jsx)("img",{src:g,alt:"Avatar",style:{width:50,height:50,borderRadius:"50%",objectFit:"cover"}}):(0,dm.jsx)("div",{style:{fontSize:"2.5rem"},children:null===(t=Um.find(e=>e.id===l))||void 0===t?void 0:t.display}),(0,dm.jsxs)("div",{children:[(0,dm.jsx)("div",{style:{fontWeight:700,color:"var(--joy-teal)",fontSize:"1.1rem"},children:a}),(0,dm.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--gray-medium)"},children:"This is how you'll appear in chat"})]})]})]}),(0,dm.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,dm.jsx)("button",{onClick:i,style:{flex:1,padding:12,background:"white",color:"var(--gray-dark)",border:"2px solid var(--gray-light)",borderRadius:8,cursor:"pointer",fontSize:"1rem",fontWeight:600},children:"Cancel"}),(0,dm.jsx)("button",{onClick:async()=>{if(!a.trim()||!l)return;let e;"custom"===l&&p&&(e=await w()||void 0,!e)||n(a.trim(),l,e)},disabled:!a.trim()||!l||v,style:{flex:2,padding:12,background:a.trim()&&l&&!v?"var(--gradient-ocean)":"var(--gray-light)",color:"white",border:"none",borderRadius:8,cursor:a.trim()&&l&&!v?"pointer":"not-allowed",fontSize:"1rem",fontWeight:600,opacity:a.trim()&&l&&!v?1:.5},children:v?"\u23f3 Uploading...":"\u2713 Join Chat"})]}),(0,dm.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--gray-medium)",marginTop:15,marginBottom:0,textAlign:"center"},children:"\ud83d\udd12 Your real identity remains private. Only your chosen name and avatar are visible."})]})});var E}function sy(e){let{onAccept:t,onDecline:n}=e;const[i,o]=(0,r.useState)(!1);return(0,dm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,dm.jsxs)("div",{style:{background:"white",borderRadius:16,maxWidth:600,width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 40px rgba(0,0,0,0.3)",animation:"slideInUp 0.3s ease-out"},children:[(0,dm.jsxs)("div",{style:{padding:"24px 24px 20px",borderBottom:"2px solid #f0f0f0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px 16px 0 0",color:"white"},children:[(0,dm.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"\ud83d\udcac Community Chat Guidelines"}),(0,dm.jsx)("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",opacity:.95},children:"Please read and accept our community rules"})]}),(0,dm.jsxs)("div",{onScroll:e=>{const t=e.currentTarget;(t.scrollTop/(t.scrollHeight-t.clientHeight)*100>=80||t.scrollHeight<=t.clientHeight)&&!i&&o(!0)},style:{flex:1,overflowY:"auto",padding:24,fontSize:"1rem",lineHeight:1.6,color:"var(--gray-dark)"},children:[(0,dm.jsx)("h3",{style:{color:"#667eea",marginTop:0},children:"\ud83e\udd1d Our Community Values"}),(0,dm.jsx)("p",{children:"T-Break Community Chat is a safe, supportive space for people on their cannabis break journey. By using this chat, you agree to:"}),(0,dm.jsx)("h4",{style:{color:"#667eea",marginTop:20},children:"\u2705 Do:"}),(0,dm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Be respectful and supportive"})," - We're all in this together"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Share your experiences"})," - Your story can help others"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Encourage others"})," - Celebrate wins, big or small"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Keep it positive"})," - Focus on recovery and growth"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Respect privacy"})," - What's shared here stays here"]})]}),(0,dm.jsx)("h4",{style:{color:"#ff4d4d",marginTop:20},children:"\u274c Don't:"}),(0,dm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"No harassment or bullying"})," - Zero tolerance policy"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"No promoting substance use"})," - This is a recovery space"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"No spam or advertising"})," - Keep it relevant"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"No personal attacks"})," - Debate ideas, not people"]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"No sharing personal contact info"})," - Stay safe online"]})]}),(0,dm.jsx)("h4",{style:{color:"#667eea",marginTop:20},children:"\ud83d\udd12 Privacy & Safety"}),(0,dm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,dm.jsxs)("li",{children:["Your chat identity is ",(0,dm.jsx)("strong",{children:"anonymous"})," and separate from your account"]}),(0,dm.jsx)("li",{children:"Messages are visible to all community members"}),(0,dm.jsx)("li",{children:"We reserve the right to remove inappropriate content"}),(0,dm.jsx)("li",{children:"Serious violations may result in loss of chat access"})]}),(0,dm.jsx)("div",{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",padding:16,borderRadius:12,marginTop:24,borderLeft:"4px solid #667eea"},children:(0,dm.jsxs)("p",{style:{margin:0,fontSize:"0.95rem"},children:[(0,dm.jsx)("strong",{children:"Remember:"})," This chat is for mutual support. If you're experiencing a crisis, please reach out to a professional helpline or healthcare provider."]})}),(0,dm.jsx)("div",{style:{textAlign:"center",marginTop:20,color:i?"#4CAF50":"var(--gray-medium)",fontSize:"0.85rem",fontWeight:i?600:400,fontStyle:i?"normal":"italic"},children:i?"\u2705 Ready to accept!":"\ud83d\udcdc Scroll down to continue"})]}),(0,dm.jsxs)("div",{style:{padding:20,borderTop:"2px solid #f0f0f0",display:"flex",justifyContent:"space-between",gap:12},children:[(0,dm.jsx)("button",{onClick:n,style:{padding:"14px 24px",background:"white",color:"#666",border:"2px solid #e0e0e0",borderRadius:25,fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#999",e.currentTarget.style.color="#333"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#e0e0e0",e.currentTarget.style.color="#666"},children:"\u2190 Go Back"}),(0,dm.jsx)("button",{onClick:t,disabled:!i,style:{padding:"14px 32px",background:i?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#ccc",color:"white",border:"none",borderRadius:25,fontSize:"1rem",fontWeight:700,cursor:i?"pointer":"not-allowed",transition:"all 0.2s ease",boxShadow:i?"0 4px 15px rgba(102, 126, 234, 0.4)":"none"},onMouseEnter:e=>{i&&(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=i?"0 4px 15px rgba(102, 126, 234, 0.4)":"none"},children:"\u2728 I Accept - Let's Chat!"})]})]})})}(0,xt.om)(new It.uA(ry,oy,"PUBLIC").setMultipleInstances(!0)),(0,xt.KO)(ty,ny,""),(0,xt.KO)(ty,ny,"esm2020");const ly=e=>e>=90?"#B9F2FF":e>=30?"#FFD700":e>=14?"#C0C0C0":e>=7?"#CD7F32":"#4CAF50";function cy(){var e;const{user:t}=fm(),{isOnline:n}=Fm(),i=ge(),[o,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[y,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=Lm(a);return()=>e()},[]),(0,r.useEffect)(()=>{t?(async()=>{try{const e=await gm(t.uid);if(null===e||void 0===e||!e.chatPolicyAccepted)return p(!0),void v(!1);null!==e&&void 0!==e&&e.chatDisplayName&&null!==e&&void 0!==e&&e.chatAvatar?g({displayName:e.chatDisplayName,avatar:e.chatAvatar}):h(!0)}catch(e){console.error("Error loading chat profile:",e)}finally{v(!1)}})():v(!1)},[t]);const b=async()=>{if(t&&s.trim()&&m){u(!0);try{const e=await gm(t.uid);await Om(t.uid,m.displayName,m.avatar,(null===e||void 0===e?void 0:e.avatarType)||"hero",s.trim(),(null===e||void 0===e?void 0:e.streakDays)||0,!1,(null===e||void 0===e?void 0:e.avatarMedals)||[],0,null===e||void 0===e?void 0:e.chatAvatarCustom),l("")}catch(e){console.error("Error sending message:",e),alert("Failed to send message. Please try again.")}finally{u(!1)}}};return(0,dm.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column"},children:[f&&t&&(0,dm.jsx)(sy,{onAccept:async()=>{if(t)try{await mm(t.uid,{chatPolicyAccepted:!0}),p(!1);const e=await gm(t.uid);null!==e&&void 0!==e&&e.chatDisplayName&&null!==e&&void 0!==e&&e.chatAvatar?g({displayName:e.chatDisplayName,avatar:e.chatAvatar}):h(!0)}catch(e){console.error("Error accepting policy:",e),alert("Failed to save policy acceptance. Please try again.")}},onDecline:()=>i("/dashboard")}),d&&t&&(0,dm.jsx)(ay,{onComplete:async(e,n,r)=>{if(t)try{await mm(t.uid,{chatDisplayName:e,chatAvatar:n,chatAvatarCustom:r}),g({displayName:e,avatar:n}),h(!1)}catch(i){console.error("Error saving chat profile:",i),alert("Failed to save profile. Please try again.")}},onCancel:()=>h(!1)}),(0,dm.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",maxWidth:1200,width:"100%",margin:"0 auto",padding:20},children:[(0,dm.jsxs)("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"12px 12px 0 0",padding:"15px 20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",animation:"slideInDown 0.6s ease-out"},children:[(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,dm.jsx)("div",{style:{width:10,height:10,borderRadius:"50%",background:"#4CAF50",boxShadow:"0 0 10px #4CAF50",animation:"pulse 2s infinite"}}),(0,dm.jsxs)("div",{children:[(0,dm.jsx)("h1",{style:{fontSize:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:"\ud83d\udcac T-Break Community"}),(0,dm.jsxs)("p",{style:{color:"var(--gray-medium)",margin:0,fontSize:"0.85rem"},children:[o.length," messages \u2022 ",t?"Online":"Offline"]})]})]}),m&&(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"8px 16px",borderRadius:20,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[(0,dm.jsx)("span",{style:{fontSize:"1.2rem"},children:null===(e=Um.find(e=>e.id===m.avatar))||void 0===e?void 0:e.display}),(0,dm.jsx)("span",{style:{fontWeight:600,color:"white",fontSize:"0.9rem"},children:m.displayName}),(0,dm.jsx)("button",{onClick:()=>h(!0),style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer",fontSize:"0.85rem",padding:"4px 8px",borderRadius:6},title:"Change identity",children:"Edit"})]})]}),!t&&(0,dm.jsxs)("div",{style:{background:"var(--gradient-warm)",color:"white",padding:20,borderRadius:"var(--radius-lg)",textAlign:"center",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.6s ease-out"},children:[(0,dm.jsx)("p",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:15},children:"\ud83d\udd10 You must be logged in to send messages."}),(0,dm.jsxs)("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[(0,dm.jsx)("button",{onClick:()=>i("/login"),style:{padding:"10px 24px",background:"white",color:"var(--joy-orange)",border:"none",borderRadius:8,fontSize:"1rem",fontWeight:700,cursor:"pointer",boxShadow:"var(--shadow-md)"},children:"Sign In"}),(0,dm.jsx)("button",{onClick:()=>i("/signup"),style:{padding:"10px 24px",background:"rgba(255,255,255,0.2)",color:"white",border:"2px solid white",borderRadius:8,fontSize:"1rem",fontWeight:700,cursor:"pointer"},children:"Sign Up"})]})]}),y&&t&&(0,dm.jsx)("div",{style:{textAlign:"center",padding:40,color:"var(--gray-medium)"},children:"Loading chat profile..."}),!n&&t&&!y&&(0,dm.jsx)("div",{style:{background:"var(--gradient-warm)",color:"white",border:"none",borderRadius:"var(--radius-lg)",padding:16,marginBottom:20,fontSize:"1rem",fontWeight:600,textAlign:"center",animation:"slideInUp 0.6s ease-out",boxShadow:"var(--shadow-md)"},children:"\u26a0\ufe0f You're offline. Messages will queue and send automatically when you're back online! \u2728"}),!y&&(0,dm.jsx)("div",{style:{background:"#36393f",border:"none",borderRadius:0,height:500,overflowY:"auto",padding:16,marginBottom:0,boxShadow:"inset 0 2px 10px rgba(0,0,0,0.3)",animation:"slideInUp 0.65s ease-out",fontFamily:"'Courier New', monospace"},children:0===o.length?(0,dm.jsxs)("div",{style:{textAlign:"center",color:"#72767d",padding:"40px 20px",fontSize:"0.95rem"},children:[(0,dm.jsx)("p",{style:{fontSize:"2rem",margin:"0 0 10px 0"},children:"\ud83d\udcac"}),(0,dm.jsx)("p",{style:{fontStyle:"italic"},children:"Welcome to #t-break-community"}),(0,dm.jsx)("p",{style:{fontSize:"0.85rem",marginTop:8},children:"No messages yet. Start the conversation!"})]}):o.map((e,n)=>{const r=Um.find(t=>t.id===e.chatAvatar),i=(null===t||void 0===t?void 0:t.uid)===e.userId,o=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,padding:"8px 12px",background:i?"rgba(114, 137, 218, 0.1)":"transparent",borderRadius:4,transition:"background 0.15s ease",borderLeft:i?"3px solid #7289da":"3px solid transparent"},onMouseEnter:e=>e.currentTarget.style.background=i?"rgba(114, 137, 218, 0.15)":"rgba(255,255,255,0.03)",onMouseLeave:e=>e.currentTarget.style.background=i?"rgba(114, 137, 218, 0.1)":"transparent",children:[(0,dm.jsx)("div",{style:{flexShrink:0,marginRight:12},children:e.chatAvatarCustom?(0,dm.jsx)("img",{src:e.chatAvatarCustom,alt:"avatar",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",border:"2px solid ".concat(ly(e.streakDays))}}):(0,dm.jsx)("div",{style:{fontSize:"2rem",width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"2px solid ".concat(ly(e.streakDays)),background:"#40444b"},children:(null===r||void 0===r?void 0:r.display)||"\ud83d\ude0a"})}),(0,dm.jsxs)("div",{style:{flex:1},children:[(0,dm.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:8,marginBottom:4},children:[(0,dm.jsx)("span",{style:{fontSize:"0.95rem",color:ly(e.streakDays),fontWeight:700},children:e.chatDisplayName}),(0,dm.jsx)("span",{style:{fontSize:"0.7rem",color:"#72767d"},children:o}),e.streakDays>=7&&(0,dm.jsx)("span",{style:{fontSize:"0.7rem",background:ly(e.streakDays),color:"white",padding:"2px 6px",borderRadius:8,fontWeight:600},children:(a=e.streakDays,a>=90?"\ud83d\udc8e Diamond":a>=30?"\ud83e\udd47 Gold":a>=14?"\ud83e\udd48 Silver":a>=7?"\ud83e\udd49 Bronze":"\ud83c\udf31 Starting")})]}),(0,dm.jsx)("div",{style:{fontSize:"0.95rem",lineHeight:1.4,color:"#dcddde",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:e.message})]})]},e.id);var a})}),t&&m&&!y&&(0,dm.jsxs)("div",{style:{background:"#40444b",padding:"16px 20px",borderRadius:"0 0 12px 12px",display:"flex",gap:12,animation:"slideInUp 0.7s ease-out",boxShadow:"0 -2px 10px rgba(0,0,0,0.2)"},children:[(0,dm.jsx)("input",{value:s,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&b(),placeholder:"Message #t-break-community",disabled:c,style:{flex:1,padding:"12px 16px",border:"none",borderRadius:8,fontSize:"0.95rem",fontFamily:"inherit",transition:"all 0.2s ease",background:"#2c2f33",color:"#dcddde",outline:"none"}}),(0,dm.jsx)("button",{onClick:b,disabled:c||!s.trim(),style:{padding:"12px 24px",background:c||!s.trim()?"#4f545c":"#7289da",color:"white",border:"none",borderRadius:8,fontSize:"0.95rem",fontWeight:700,cursor:c||!s.trim()?"not-allowed":"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:e=>{!c&&s.trim()&&(e.currentTarget.style.background="#5b6eae")},onMouseLeave:e=>{!c&&s.trim()&&(e.currentTarget.style.background="#7289da")},children:c?"\u23f3":"Send"})]})]})]})}function uy(){const{user:e}=fm(),t=ge(),[n,i]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)("smoke"),[f,p]=(0,r.useState)("moderate"),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(40),[b,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{var n;const r=await gm(e.uid);if(!t)return;if(null!==r&&void 0!==r&&r.startDate){const e=new Date(r.startDate).toISOString().slice(0,10);i(e)}null!==r&&void 0!==r&&r.age&&a(r.age),null!==r&&void 0!==r&&r.weight&&l(r.weight),null!==r&&void 0!==r&&r.yearsOfUse&&u(r.yearsOfUse),null!==r&&void 0!==r&&r.usageType&&h(r.usageType),null!==r&&void 0!==r&&r.frequency&&p(r.frequency),void 0!==(null===r||void 0===r||null===(n=r.notifications)||void 0===n?void 0:n.enabled)&&g(r.notifications.enabled),null!==r&&void 0!==r&&r.recommendedBreakDays&&v(r.recommendedBreakDays)}catch(r){console.error(r)}})(),()=>{t=!1}},[e]),(0,r.useEffect)(()=>{let e=40;"light"===f?e=21:"moderate"===f?e=30:"heavy"===f?e=40:"chronic"===f&&(e=60),c&&c>5&&(e+=10),c&&c>10&&(e+=10),"edible"===d&&(e+=7),v(e)},[f,c,d]);return(0,dm.jsxs)("div",{style:{padding:20,maxWidth:700,margin:"0 auto",background:"linear-gradient(135deg, rgba(26, 188, 156, 0.03) 0%, rgba(142, 68, 173, 0.03) 100%)",minHeight:"100vh"},children:[(0,dm.jsx)("h1",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10},children:"My Profile"}),(0,dm.jsx)("p",{style:{color:"var(--gray-medium)",marginBottom:30},children:"Help us personalize your T-break journey"}),(0,dm.jsxs)("div",{style:{background:"white",padding:30,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,dm.jsxs)("div",{style:{marginBottom:20},children:[(0,dm.jsx)("strong",{children:"Signed in as:"})," ",(0,dm.jsx)("span",{style:{color:"var(--joy-teal)"},children:e?e.email:"Not signed in"})]}),(0,dm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,dm.jsx)("h3",{style:{color:"var(--joy-purple)",marginBottom:15},children:"\ud83d\udccb Personal Information"}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Age (years)"}),(0,dm.jsx)("input",{type:"number",placeholder:"25",value:null!==o&&void 0!==o?o:"",onChange:e=>a(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Weight (kg)"}),(0,dm.jsx)("input",{type:"number",placeholder:"70",value:null!==s&&void 0!==s?s:"",onChange:e=>l(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}}),(0,dm.jsx)("small",{style:{color:"var(--gray-medium)"},children:"Used for metabolite calculations"})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,dm.jsx)("h3",{style:{color:"var(--joy-orange)",marginBottom:15},children:"\ud83c\udf3f Cannabis Usage History"}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Years of use"}),(0,dm.jsx)("input",{type:"number",placeholder:"5",value:null!==c&&void 0!==c?c:"",onChange:e=>u(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Primary consumption method"}),(0,dm.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"},children:[(0,dm.jsx)("option",{value:"smoke",children:"\ud83d\udeac Smoke (joints, bongs)"}),(0,dm.jsx)("option",{value:"vape",children:"\ud83d\udca8 Vape"}),(0,dm.jsx)("option",{value:"edible",children:"\ud83c\udf6a Edibles"}),(0,dm.jsx)("option",{value:"dab",children:"\ud83d\udc8e Dabs/Concentrates"}),(0,dm.jsx)("option",{value:"other",children:"\ud83c\udf1f Other"})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Usage frequency"}),(0,dm.jsxs)("select",{value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"},children:[(0,dm.jsx)("option",{value:"light",children:"\ud83d\udc9a Light (1-2 times/week)"}),(0,dm.jsx)("option",{value:"moderate",children:"\ud83d\udc9b Moderate (3-4 times/week)"}),(0,dm.jsx)("option",{value:"heavy",children:"\ud83e\udde1 Heavy (daily, 1-2 times/day)"}),(0,dm.jsx)("option",{value:"chronic",children:"\u2764\ufe0f Chronic (multiple times daily)"})]})]}),(0,dm.jsxs)("div",{style:{padding:15,background:"var(--joy-purple-light)",borderRadius:8,border:"2px solid var(--joy-purple)"},children:[(0,dm.jsxs)("strong",{style:{color:"var(--joy-purple)"},children:["\ud83d\udcca Recommended break duration: ",y," days"]}),(0,dm.jsxs)("p",{style:{marginTop:8,fontSize:"0.9rem",color:"var(--gray-dark)"},children:["Based on your usage pattern, we recommend a ",y,"-day break for optimal THC clearance."]})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,dm.jsx)("h3",{style:{color:"var(--joy-teal)",marginBottom:15},children:"\ud83d\udcc5 T-Break Timeline"}),(0,dm.jsxs)("div",{style:{marginBottom:15},children:[(0,dm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Start date"}),(0,dm.jsx)("input",{type:"date",value:null!==n&&void 0!==n?n:"",onChange:e=>i(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:30},children:[(0,dm.jsx)("h3",{style:{color:"var(--joy-green)",marginBottom:15},children:"\ud83d\udd14 Notifications"}),(0,dm.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,dm.jsx)("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),style:{marginRight:10,width:20,height:20}}),(0,dm.jsx)("span",{children:"Enable daily reminders and milestone notifications"})]})]}),(0,dm.jsxs)("div",{style:{marginTop:30},children:[(0,dm.jsx)("button",{onClick:async()=>{if(e){w(!0),S(null);try{const r=n?new Date(n).toISOString():void 0;await gm(e.uid);await mm(e.uid,{usageType:d,frequency:f,startDate:r,age:o||void 0,weight:s||void 0,yearsOfUse:c||void 0,recommendedBreakDays:y,notifications:{enabled:m,dailyReminder:m,milestones:m,encouragement:m}}),S("Saved! Redirecting to dashboard..."),setTimeout(()=>{t("/")},1e3)}catch(r){console.error("Profile save error:",r),S("Failed to save profile.")}finally{w(!1)}}else S("Please sign in to update your profile.")},disabled:b,style:{width:"100%",padding:"14px 24px",background:b?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:600,cursor:b?"not-allowed":"pointer",transition:"transform 0.2s"},onMouseEnter:e=>!b&&(e.currentTarget.style.transform="scale(1.02)"),onMouseLeave:e=>!b&&(e.currentTarget.style.transform="scale(1)"),children:b?"Saving...":"\ud83d\udcbe Save Profile"}),_&&(0,dm.jsx)("div",{style:{marginTop:15,padding:12,borderRadius:8,background:_.includes("Failed")?"#ffebee":"#e8f5e9",color:_.includes("Failed")?"#c62828":"#2e7d32",fontWeight:600,textAlign:"center"},children:_})]})]}),(0,dm.jsx)("div",{style:{marginTop:30,textAlign:"center"},children:(0,dm.jsx)(yt,{to:"/",style:{display:"inline-block",padding:"12px 24px",background:"var(--gradient-ocean)",color:"white",textDecoration:"none",borderRadius:8,fontWeight:600,transition:"transform 0.2s"},children:"\u2190 Back to Dashboard"})})]})}function dy(){return(0,dm.jsxs)("div",{children:[(0,dm.jsx)("h1",{children:"Nutrition Support"}),(0,dm.jsx)("p",{children:"Foods, herbs, teas, vitamins"})]})}function hy(){const[e,t]=(0,r.useState)("heavy"),[n,i]=(0,r.useState)(0),[o,a]=(0,r.useState)(null);return(0,dm.jsxs)("div",{style:{padding:20},children:[(0,dm.jsx)("h1",{children:"Metabolite Clearance Estimator"}),(0,dm.jsx)("p",{style:{fontSize:12},children:"This is an approximate educational tool, not medical or legal advice."}),(0,dm.jsxs)("div",{style:{marginTop:10},children:[(0,dm.jsx)("label",{children:"Usage frequency:"}),(0,dm.jsxs)("select",{value:e,onChange:e=>t(e.target.value),style:{marginLeft:8},children:[(0,dm.jsx)("option",{value:"light",children:"Light"}),(0,dm.jsx)("option",{value:"moderate",children:"Moderate"}),(0,dm.jsx)("option",{value:"heavy",children:"Heavy"}),(0,dm.jsx)("option",{value:"chronic",children:"Chronic"})]})]}),(0,dm.jsxs)("div",{style:{marginTop:10},children:[(0,dm.jsx)("label",{children:"Days since last use:"}),(0,dm.jsx)("input",{type:"number",value:n,onChange:e=>i(Number(e.target.value)),style:{marginLeft:8,width:80}})]}),(0,dm.jsx)("button",{style:{marginTop:15},onClick:()=>{const t=(e=>{let{frequency:t,daysSinceLastUse:n}=e;const[r,i]={light:[2,5],moderate:[5,15],heavy:[10,30],chronic:[20,60]}[t],o=Math.min(Math.max(n,0),i)/i*100;return{estimatedPercentCleared:Math.round(o),minDaysToClear:r,maxDaysToClear:i}})({frequency:e,daysSinceLastUse:n});a(t)},children:"Estimate"}),o&&(0,dm.jsxs)("div",{style:{marginTop:20},children:[(0,dm.jsxs)("p",{children:["Estimated cleared: ",(0,dm.jsxs)("b",{children:[o.estimatedPercentCleared,"%"]})]}),(0,dm.jsxs)("p",{children:["Estimated days to pass a urine test:"," ",(0,dm.jsxs)("b",{children:[o.minDaysToClear,"\u2013",o.maxDaysToClear," days"]})]}),(0,dm.jsx)("p",{style:{color:"#777",marginTop:10},children:"\u26a0 Not medical or legal advice. Educational only."})]})]})}function fy(){return(0,dm.jsxs)("div",{children:[(0,dm.jsx)("h1",{children:"Onboarding"}),(0,dm.jsx)("p",{children:"Let's customize your T-Break Plan"})]})}function py(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),m=ge(),g=fe();return(0,dm.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(142, 68, 173, 0.1) 0%, rgba(26, 188, 156, 0.1) 100%)",padding:20},children:(0,dm.jsxs)("div",{style:{background:"white",padding:40,borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-xl)",maxWidth:450,width:"100%"},children:[(0,dm.jsx)("h1",{style:{fontSize:"2rem",background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:10,textAlign:"center"},children:s?"\ud83d\udd11 Reset Password":"\ud83d\udd10 Sign In"}),(0,dm.jsx)("p",{style:{textAlign:"center",color:"var(--gray-dark)",marginBottom:30},children:s?"Enter your email to receive a password reset link":"Welcome back to T-Break!"}),s?(0,dm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()){p(!0),a(null),h(!1);try{await cm(c),h(!0),u("")}catch(n){var t;a(null!==(t=null===n||void 0===n?void 0:n.message)&&void 0!==t?t:"Failed to send reset email")}finally{p(!1)}}else a("Please enter your email address")},children:[(0,dm.jsxs)("div",{style:{marginBottom:20},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Email Address"}),(0,dm.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"Enter your email",style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),d&&(0,dm.jsx)("div",{style:{background:"#e8f5e9",color:"#2e7d32",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:"\u2713 Password reset email sent! Check your inbox."}),o&&(0,dm.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:o}),(0,dm.jsx)("button",{type:"submit",disabled:f,style:{width:"100%",padding:14,background:f?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:700,cursor:f?"not-allowed":"pointer",boxShadow:"var(--shadow-md)",marginBottom:15},children:f?"Sending...":"\ud83d\udce7 Send Reset Link"}),(0,dm.jsx)("button",{type:"button",onClick:()=>{l(!1),a(null),h(!1),u("")},style:{width:"100%",padding:12,background:"white",color:"var(--gray-dark)",border:"2px solid var(--gray-light)",borderRadius:8,fontSize:"1rem",fontWeight:600,cursor:"pointer"},children:"\u2190 Back to Sign In"})]}):(0,dm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(null);try{var r,i,o;await lm(e,n);const t=null!==(r=null===(i=g.state)||void 0===i||null===(o=i.from)||void 0===o?void 0:o.pathname)&&void 0!==r?r:"/profile";m(t,{replace:!0})}catch(l){var s;a(null!==(s=null===l||void 0===l?void 0:l.message)&&void 0!==s?s:"Sign in failed")}},children:[(0,dm.jsxs)("div",{style:{marginBottom:20},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Email"}),(0,dm.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),(0,dm.jsxs)("div",{style:{marginBottom:20},children:[(0,dm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Password"}),(0,dm.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),(0,dm.jsx)("button",{type:"button",onClick:()=>{l(!0),a(null)},style:{background:"none",border:"none",color:"var(--joy-teal)",cursor:"pointer",fontSize:"0.9rem",padding:0,marginBottom:20,textDecoration:"underline"},children:"Forgot your password?"}),(0,dm.jsx)("button",{type:"submit",style:{width:"100%",padding:14,background:"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:700,cursor:"pointer",boxShadow:"var(--shadow-md)",marginBottom:15},children:"\u2728 Sign In"}),o&&(0,dm.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:o}),(0,dm.jsxs)("div",{style:{textAlign:"center",fontSize:"0.9rem",color:"var(--gray-dark)"},children:["Don't have an account?"," ",(0,dm.jsx)("button",{type:"button",onClick:()=>m("/signup"),style:{background:"none",border:"none",color:"var(--joy-purple)",cursor:"pointer",fontWeight:600,textDecoration:"underline"},children:"Sign Up"})]})]})]})})}function my(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(null),s=ge(),l=fe();return(0,dm.jsxs)("div",{children:[(0,dm.jsx)("h1",{children:"Create Account"}),(0,dm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(null);try{var r,i,o;await sm(e,n);const t=null!==(r=null===(i=l.state)||void 0===i||null===(o=i.from)||void 0===o?void 0:o.pathname)&&void 0!==r?r:"/profile";s(t,{replace:!0})}catch(u){var c;a(null!==(c=null===u||void 0===u?void 0:u.message)&&void 0!==c?c:"Sign up failed")}},children:[(0,dm.jsx)("div",{children:(0,dm.jsxs)("label",{children:["Email",(0,dm.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]})}),(0,dm.jsx)("div",{children:(0,dm.jsxs)("label",{children:["Password",(0,dm.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0})]})}),(0,dm.jsx)("div",{style:{marginTop:12},children:(0,dm.jsx)("button",{type:"submit",children:"Sign Up"})}),o&&(0,dm.jsx)("div",{style:{color:"red",marginTop:12},children:o})]})]})}var gy,yy,vy=n(403);!function(e){e[e.Min=1]="Min",e[e.Low=2]="Low",e[e.Default=3]="Default",e[e.High=4]="High",e[e.Max=5]="Max"}(gy||(gy={})),function(e){e[e.Secret=-1]="Secret",e[e.Private=0]="Private",e[e.Public=1]="Public"}(yy||(yy={}));const by=(0,vy.F3)("FirebaseMessaging",{web:()=>n.e(572).then(n.bind(n,572)).then(e=>new e.FirebaseMessagingWeb)}),wy=async(e,t)=>{try{const n=await gm(e),r=null===n||void 0===n?void 0:n.notifications;if(!r)return!0;switch(t){case"chat_mention":return!1!==r.chatMention;case"daily_checkin":return!1!==r.dailyCheckin;case"quote_of_day":return!1!==r.quoteOfDay;case"promotional":return!0===r.promotional;default:return!0}}catch(n){return console.error("Error checking notification preferences:",n),!0}},_y=(e,t)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t}),console.log("[".concat(e,"] ").concat(t)),window.dispatchEvent(new CustomEvent("app-notification",{detail:{title:e,body:t}}))},Sy=async(e,t)=>{try{await mm(e,{fcmToken:t}),console.log("FCM token stored for user:",e)}catch(n){console.error("Failed to store FCM token:",n)}},Ey=async(e,t)=>{try{return await mm(e,{notifications:t}),console.log("Notification preferences updated:",t),!0}catch(n){return console.error("Failed to update notification preferences:",n),!1}};function ky(){const{user:e}=fm(),[t,n]=(0,r.useState)({chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}),[i,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{const r=await(async e=>{try{const t=await gm(e);return(null===t||void 0===t?void 0:t.notifications)||null}catch(t){return console.error("Failed to get notification preferences:",t),null}})(e.uid);if(!t)return;r&&n(r)}catch(r){console.error(r)}})(),()=>{t=!1}},[e]);return(0,dm.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"0 auto"},children:[(0,dm.jsx)("h1",{children:"\ud83d\udd14 Notification Preferences"}),(0,dm.jsx)("p",{style:{fontSize:13,color:"#666",marginBottom:16},children:"All notifications are optional. Control exactly what you want to receive."}),(0,dm.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:20},children:[(0,dm.jsx)("button",{onClick:async()=>{if(e){o(!0);try{await(async e=>Ey(e,{chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}))(e.uid),n({chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}),l("\u2713 Recommended notifications enabled.")}catch(t){console.error(t),l("Failed to enable notifications.")}finally{o(!1)}}},disabled:i,style:{padding:"10px 12px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontSize:13,fontWeight:600,opacity:i?.6:1},children:"\u2713 Recommended"}),(0,dm.jsx)("button",{onClick:async()=>{if(e){o(!0);try{await(async e=>Ey(e,{chatMention:!1,dailyCheckin:!1,quoteOfDay:!1,promotional:!1}))(e.uid),n({chatMention:!1,dailyCheckin:!1,quoteOfDay:!1,promotional:!1}),l("\u2713 All notifications disabled.")}catch(t){console.error(t),l("Failed to disable notifications.")}finally{o(!1)}}},disabled:i,style:{padding:"10px 12px",background:"#f44336",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontSize:13,fontWeight:600,opacity:i?.6:1},children:"\u2717 Disable All"})]}),(0,dm.jsxs)("div",{style:{background:"#f9f9f9",padding:16,borderRadius:8,marginBottom:16},children:[(0,dm.jsx)("h3",{style:{marginTop:0,fontSize:14,color:"#333"},children:"Individual Settings"}),(0,dm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,dm.jsx)("input",{type:"checkbox",checked:!!t.chatMention,onChange:e=>n((0,s.A)((0,s.A)({},t),{},{chatMention:e.target.checked})),disabled:i})," ",(0,dm.jsx)("strong",{children:"Chat mentions"}),(0,dm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Notified when someone mentions you in community chat"})]}),(0,dm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,dm.jsx)("input",{type:"checkbox",checked:!!t.dailyCheckin,onChange:e=>n((0,s.A)((0,s.A)({},t),{},{dailyCheckin:e.target.checked})),disabled:i})," ",(0,dm.jsx)("strong",{children:"Daily check-in reminder"}),(0,dm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Daily reminder to log your mood and symptoms"})]}),(0,dm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,dm.jsx)("input",{type:"checkbox",checked:!!t.quoteOfDay,onChange:e=>n((0,s.A)((0,s.A)({},t),{},{quoteOfDay:e.target.checked})),disabled:i})," ",(0,dm.jsx)("strong",{children:"Daily motivational quotes"}),(0,dm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Receive daily inspiration messages"})]}),(0,dm.jsxs)("label",{style:{display:"block"},children:[(0,dm.jsx)("input",{type:"checkbox",checked:!!t.promotional,onChange:e=>n((0,s.A)((0,s.A)({},t),{},{promotional:e.target.checked})),disabled:i})," ",(0,dm.jsx)("strong",{children:"Promotional messages"}),(0,dm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"App updates, new features, donation appeals"})]})]}),(0,dm.jsxs)("div",{style:{marginBottom:16},children:[(0,dm.jsx)("button",{onClick:async()=>{o(!0);try{const e=await(async()=>{try{const e=await by.requestPermissions();return console.log("Notification permission result:",e),"granted"===e.receive||"denied"===e.receive}catch(e){return console.error("Failed to request notification permissions:",e),!1}})();l(e?"\u2713 Notification permissions granted.":"Notification permissions required to receive notifications.")}catch(e){console.error(e),l("Failed to request permissions.")}finally{o(!1)}},disabled:i,style:{width:"100%",padding:"12px 16px",background:"#2196F3",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontWeight:600,marginBottom:8,opacity:i?.6:1},children:"Enable Device Notifications"}),(0,dm.jsx)("button",{onClick:async()=>{if(e){o(!0),l(null);try{const n=await Ey(e.uid,t);l(n?"\u2713 Notification preferences saved.":"Failed to save preferences.")}catch(n){console.error(n),l("Failed to save preferences.")}finally{o(!1)}}else l("Please sign in to update notifications.")},disabled:i,style:{width:"100%",padding:"12px 16px",background:"#2e7d32",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontWeight:600,opacity:i?.6:1},children:i?"Saving...":"Save Preferences"})]}),a&&(0,dm.jsx)("div",{style:{background:a.includes("\u2713")?"#e8f5e9":"#ffebee",color:a.includes("\u2713")?"#2e7d32":"#c62828",padding:12,borderRadius:4,textAlign:"center",fontSize:14,marginBottom:16},children:a}),(0,dm.jsxs)("div",{style:{background:"#e3f2fd",padding:12,borderRadius:4,fontSize:12,color:"#1565c0",lineHeight:1.6},children:[(0,dm.jsx)("strong",{children:"\u2139\ufe0f How notifications work:"}),(0,dm.jsxs)("ul",{style:{margin:"8px 0 0 16px",paddingLeft:0},children:[(0,dm.jsx)("li",{children:"Device permissions allow us to send push notifications"}),(0,dm.jsx)("li",{children:"Your preferences control which types you receive"}),(0,dm.jsx)("li",{children:"You can change settings anytime"}),(0,dm.jsx)("li",{children:"Disable all notifications if you prefer not to receive any"})]})]})]})}const xy="https://us-central1-tbreakapp.cloudfunctions.net/donations",Ty=async e=>{try{const t=await fetch("".concat(xy,"/initiate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error("Donation failed: ".concat(t.status," ").concat(e))}return await t.json()}catch(t){if(!Tm())return console.log("Offline: Queuing donation for sync"),await xm("/donations/initiate","POST",e),{success:!0,queued:!0};throw console.error("Error initiating donation:",t),t}};function Cy(){const{user:e,profile:t}=fm(),[n,i]=(0,r.useState)(null),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f(/iPhone|iPad|Android/i.test(navigator.userAgent))},[]);const p=[{id:"donation_coffee",name:"Buy me a coffee \u2615",amount:5,description:"Support development with a small gift",stripePrice:"price_coffee_5",revenuecat:"com.tbreak.donation.coffee"},{id:"donation_meal",name:"Buy me a meal \ud83c\udf7d\ufe0f",amount:15,description:"Help keep the lights on",stripePrice:"price_meal_15",revenuecat:"com.tbreak.donation.meal"},{id:"donation_month",name:"Monthly supporter \ud83d\udcaa",amount:25,description:"Recurring monthly support",stripePrice:"price_month_25",revenuecat:"com.tbreak.donation.month"},{id:"donation_hero",name:"Be a hero \ud83e\uddb8",amount:50,description:"Major contributor to the mission",stripePrice:"price_hero_50",revenuecat:"com.tbreak.donation.hero"}],m=async t=>{if(!e)return void c("Please sign in to make a donation.");const n=t?t.amount:parseFloat(o);if(!n||n<=0)c("Please select a tier or enter a valid amount.");else{d(!0),c("");try{h&&null!==t&&void 0!==t&&t.revenuecat?await g(t):await y(t||(0,s.A)((0,s.A)({},p[0]),{},{amount:n,id:"custom"}))}catch(r){console.error("Donation error:",r),c("Error processing donation: ".concat(r instanceof Error?r.message:"Unknown error"))}finally{d(!1)}}},g=async t=>{(await Ty({type:"revenuecat",userId:e.uid,productId:t.revenuecat,amount:t.amount,tierName:t.name})).success?(c("Thank you! Your donation of $".concat(t.amount," is being processed. \ud83d\ude4f")),i(null)):c("RevenueCat donation failed. Please try again.")},y=async t=>{const n=await Ty({type:"stripe",userId:e.uid,amount:t.amount,tierName:t.name,stripePrice:t.stripePrice});n.sessionUrl?window.location.href=n.sessionUrl:c("Failed to initiate donation. Please try again.")};return(0,dm.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"0 auto"},children:[(0,dm.jsx)("h1",{children:"Support Us \ud83d\udc9a"}),(0,dm.jsxs)("div",{style:{background:"#f5f5f5",padding:16,borderRadius:8,marginBottom:24},children:[(0,dm.jsxs)("p",{style:{margin:0,lineHeight:1.6},children:[(0,dm.jsx)("strong",{children:"Why donate?"})," This app is built with care to help you succeed on your T-break. Donations help us:"]}),(0,dm.jsxs)("ul",{style:{marginTop:8,marginBottom:0},children:[(0,dm.jsx)("li",{children:"Keep servers running 24/7"}),(0,dm.jsx)("li",{children:"Develop new features (meditation guides, community challenges, etc.)"}),(0,dm.jsx)("li",{children:"Improve the app based on your feedback"}),(0,dm.jsx)("li",{children:"Stay ad-free and completely private"})]})]}),(0,dm.jsx)("h2",{children:"Choose Your Support Level"}),(0,dm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},children:p.map(e=>(0,dm.jsxs)("button",{onClick:()=>{i(e.id),a(""),m(e)},disabled:u,style:{padding:16,border:n===e.id?"2px solid #2e7d32":"1px solid #ddd",borderRadius:8,background:n===e.id?"#e8f5e9":"#fff",cursor:u?"not-allowed":"pointer",textAlign:"center",transition:"all 0.2s",opacity:u?.6:1},children:[(0,dm.jsx)("div",{style:{fontWeight:600,fontSize:14,marginBottom:4},children:e.name}),(0,dm.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:e.description}),(0,dm.jsxs)("div",{style:{fontSize:18,fontWeight:600,color:"#2e7d32"},children:["$",e.amount]})]},e.id))}),(0,dm.jsx)("h2",{children:"Custom Amount"}),(0,dm.jsx)("div",{style:{marginBottom:24},children:(0,dm.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,dm.jsx)("span",{style:{fontSize:18,fontWeight:600},children:"$"}),(0,dm.jsx)("input",{type:"number",min:"1",step:"0.01",value:o,onChange:e=>{a(e.target.value),i(null)},placeholder:"Enter custom amount",disabled:u,style:{flex:1,padding:"10px 12px",border:"1px solid #ddd",borderRadius:4,fontSize:16,opacity:u?.6:1}}),(0,dm.jsx)("button",{onClick:()=>m(null),disabled:u,style:{padding:"10px 16px",background:u?"#ccc":"#2e7d32",color:"#fff",border:"none",borderRadius:4,cursor:u?"not-allowed":"pointer",fontWeight:600},children:u?"Processing...":"Donate"})]})}),l&&(0,dm.jsx)("div",{style:{background:l.includes("Error")?"#ffebee":"#e8f5e9",color:l.includes("Error")?"#c62828":"#2e7d32",padding:12,borderRadius:4,marginBottom:24,textAlign:"center",fontSize:14},children:l}),(0,dm.jsxs)("div",{style:{background:"#f9f9f9",padding:16,borderRadius:8,marginTop:24},children:[(0,dm.jsx)("h3",{style:{marginTop:0},children:"About Donations"}),(0,dm.jsxs)("ul",{style:{fontSize:14,lineHeight:1.8,color:"#555"},children:[(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Privacy First:"})," We never share your donation info with third parties."]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Transparent:"})," 100% of donations go toward app development and operations."]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"Secure:"})," Payments processed by ",h?"RevenueCat":"Stripe",", industry-leading providers."]}),(0,dm.jsxs)("li",{children:[(0,dm.jsx)("strong",{children:"100% Optional:"})," The app works fully without donations. This is purely optional support."]})]})]}),(0,dm.jsxs)("div",{style:{marginTop:24,padding:16,background:"#fff3e0",borderRadius:8,textAlign:"center"},children:[(0,dm.jsx)("p",{style:{margin:0,color:"#e65100"},children:(0,dm.jsx)("strong",{children:"Thank you for believing in this mission! \ud83d\ude4f"})}),(0,dm.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:12,color:"#666"},children:"Every donation brings us closer to building the best T-break companion app."})]}),(0,dm.jsx)("div",{style:{marginTop:24,fontSize:12,color:"#999",textAlign:"center"},children:(0,dm.jsx)("p",{style:{margin:0},children:"Questions? Email us at support@tbreak.app or visit our community chat."})})]})}const Iy=e=>{(0,r.useEffect)(()=>{e&&((e=>{by.addListener("notificationReceived",async t=>{var n,r;console.log("Foreground notification received:",t);const i=(null===(n=t.notification)||void 0===n?void 0:n.title)||"T-Break",o=(null===(r=t.notification)||void 0===r?void 0:r.body)||"You have a new message";let a=!0;i.toLowerCase().includes("mention")||i.toLowerCase().includes("chat")?a=await wy(e,"chat_mention"):i.toLowerCase().includes("check-in")?a=await wy(e,"daily_checkin"):i.toLowerCase().includes("quote")||i.toLowerCase().includes("inspiration")?a=await wy(e,"quote_of_day"):(i.toLowerCase().includes("promotional")||i.toLowerCase().includes("update"))&&(a=await wy(e,"promotional")),a?_y(i,o):console.log("Notification disabled by user preferences")}),by.addListener("tokenReceived",t=>{console.log("FCM token refreshed:",t.token),Sy(e,t.token)})})(e),(async()=>{try{const e=await(async()=>{try{const e=await by.getToken();if(null!==e&&void 0!==e&&e.token)return console.log("FCM token:",e.token),e.token}catch(e){console.error("Failed to get FCM token:",e)}return null})();e&&console.log("FCM token obtained:",e)}catch(e){console.error("Failed to get FCM token:",e)}})())},[e])},Ay=()=>{const{isOnline:e,pendingChangesCount:t,isSyncing:n}=Fm();return e&&0===t?null:(0,dm.jsx)("div",{className:"offline-banner ".concat(e?"syncing":"offline"),children:(0,dm.jsx)("div",{className:"offline-banner-content",children:e?(0,dm.jsxs)(dm.Fragment,{children:[(0,dm.jsx)("span",{className:"offline-banner-icon",children:"\ud83d\udd04"}),(0,dm.jsxs)("span",{className:"offline-banner-text",children:[n?"Syncing changes...":"",!n&&t>0?"".concat(t," change").concat(1===t?"":"s"," ready to sync"):""]})]}):(0,dm.jsxs)(dm.Fragment,{children:[(0,dm.jsx)("span",{className:"offline-banner-icon",children:"\ud83d\udce1"}),(0,dm.jsx)("span",{className:"offline-banner-text",children:"You're offline. Your changes will sync when connected."})]})})})};function Ry(){const{user:e}=fm();function t(t){let{children:n}=t;const{pathname:r,search:i}=window.location;return e?n:(0,dm.jsx)(De,{to:"/login",replace:!0,state:{from:{pathname:r,search:i}}})}return Iy(null===e||void 0===e?void 0:e.uid),(0,dm.jsxs)(Mm,{children:[(0,dm.jsx)(Ay,{}),(0,dm.jsx)(mt,{children:(0,dm.jsxs)(je,{children:[(0,dm.jsx)(Oe,{path:"/",element:(0,dm.jsx)(Sm,{})}),(0,dm.jsx)(Oe,{path:"/checkin",element:(0,dm.jsx)(Rm,{})}),(0,dm.jsx)(Oe,{path:"/calendar",element:(0,dm.jsx)(Pm,{})}),(0,dm.jsx)(Oe,{path:"/chat",element:(0,dm.jsx)(cy,{})}),(0,dm.jsx)(Oe,{path:"/nutrition",element:(0,dm.jsx)(dy,{})}),(0,dm.jsx)(Oe,{path:"/estimator",element:(0,dm.jsx)(hy,{})}),(0,dm.jsx)(Oe,{path:"/profile",element:(0,dm.jsx)(t,{children:(0,dm.jsx)(uy,{})})}),(0,dm.jsx)(Oe,{path:"/notifications",element:(0,dm.jsx)(t,{children:(0,dm.jsx)(ky,{})})}),(0,dm.jsx)(Oe,{path:"/donations",element:(0,dm.jsx)(Cy,{})}),(0,dm.jsx)(Oe,{path:"/login",element:(0,dm.jsx)(py,{})}),(0,dm.jsx)(Oe,{path:"/signup",element:(0,dm.jsx)(my,{})}),(0,dm.jsx)(Oe,{path:"/onboarding",element:(0,dm.jsx)(fy,{})})]})})]})}const Ny=document.getElementById("root");o.createRoot(Ny).render((0,dm.jsx)(r.StrictMode,{children:(0,dm.jsx)(pm,{children:(0,dm.jsx)(Ry,{})})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered successfully:",e)}).catch(e=>{console.warn("Service Worker registration failed:",e)})})})();
//# sourceMappingURL=main.f6e90175.js.map