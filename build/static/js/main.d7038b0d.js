/*! For license information please see main.d7038b0d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},150:(e,t,n)=>{n.d(t,{KO:()=>Z,MF:()=>J,Sx:()=>$,Wp:()=>X,j6:()=>q,om:()=>H,xZ:()=>K});var r=n(555),i=n(606),o=n(965),s=n(776),a=n(799);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.6",d=new o.Vy("@firebase/app"),h="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",b="@firebase/database",w="@firebase/data-connect",x="@firebase/database-compat",S="@firebase/functions",_="@firebase/functions-compat",E="@firebase/installations",k="@firebase/installations-compat",T="@firebase/messaging",C="@firebase/messaging-compat",I="@firebase/performance",A="@firebase/performance-compat",R="@firebase/remote-config",N="@firebase/remote-config-compat",P="@firebase/storage",D="@firebase/storage-compat",j="@firebase/firestore",O="@firebase/ai",L="@firebase/firestore-compat",M="firebase",F="[DEFAULT]",U={[c]:"fire-core",[h]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[b]:"fire-rtdb",[w]:"fire-data-connect",[x]:"fire-rtdb-compat",[S]:"fire-fn",[_]:"fire-fn-compat",[E]:"fire-iid",[k]:"fire-iid-compat",[T]:"fire-fcm",[C]:"fire-fcm-compat",[I]:"fire-perf",[A]:"fire-perf-compat",[R]:"fire-rc",[N]:"fire-rc-compat",[P]:"fire-gcs",[D]:"fire-gcs-compat",[j]:"fire-fst",[L]:"fire-fst-compat",[O]:"fire-vertex","fire-js":"fire-js",[M]:"fire-js-all"},V=new Map,z=new Map,B=new Map;function W(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(B.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;B.set(t,e);for(const n of V.values())W(n,e);for(const n of z.values())W(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const G={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Q=new s.FA("app","Firebase",G);class Y{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}const J="12.6.0";function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=(0,r.A)({name:F,automaticDataCollectionEnabled:!0},t),a=o.name;if("string"!==typeof a||!a)throw Q.create("bad-app-name",{appName:String(a)});if(n||(n=(0,s.T9)()),!n)throw Q.create("no-options");const l=V.get(a);if(l){if((0,s.bD)(n,l.options)&&(0,s.bD)(o,l.config))return l;throw Q.create("duplicate-app",{appName:a})}const c=new i.h1(a);for(const r of B.values())c.addComponent(r);const u=new Y(n,o,c);return V.set(a,u),u}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=V.get(e);if(!t&&e===F&&(0,s.T9)())return X();if(!t)throw Q.create("no-app",{appName:e});return t}function Z(e,t,n){var r;let o=null!==(r=U[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const s=o.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}H(new i.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof s.g)d.warn(n.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ae(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=se();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=se(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function se(){return(new Date).toISOString().substring(0,10)}class ae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof s.g)d.warn(t.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",H(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),H(new i.uA("heartbeat",e=>new oe(e),"PRIVATE")),Z(c,u,ce),Z(c,u,"esm2020"),Z("fire-js","")},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},j={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&j(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,k=null,T=-1,C=5,I=-1;function A(){return!(t.unstable_now()-I<C)}function R(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?_():(E=!1,k=null)}}else E=!1}if("function"===typeof b)_=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=R,_=function(){P.postMessage(null)}}else _=function(){y(R,0)};function D(e){k=e,E||(E=!0,_())}function j(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,j(x,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},403:(e,t,n)=>{var r;n.d(t,{E_:()=>l,F3:()=>a}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class i extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const o=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},o=n.Plugins=n.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),a=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=s,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==s(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(s()))||!!a(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),u.proxy;const d=s(),h=a(e);let f;const p=o=>{let s;const a=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];const p=(async()=>(!f&&d in c?f=f="function"===typeof c[d]?await c[d]():c[d]:null!==t&&!f&&"web"in c&&(f=f="function"===typeof c.web?await c.web():c.web),f))().then(t=>{const a=((t,o)=>{var s,a;if(!h){if(t)return null===(a=t[o])||void 0===a?void 0:a.bind(t);throw new i('"'.concat(e,'" plugin is not implemented on ').concat(d),r.Unimplemented)}{const r=null===h||void 0===h?void 0:h.methods.find(e=>o===e.name);if(r)return"promise"===r.rtype?t=>n.nativePromise(e,o.toString(),t):(t,r)=>n.nativeCallback(e,o.toString(),t,r);if(t)return null===(s=t[o])||void 0===s?void 0:s.bind(t)}})(t,o);if(a){const e=a(...l);return s=null===e||void 0===e?void 0:e.remove,e}throw new i('"'.concat(e,".").concat(o,'()" is not implemented on ').concat(d),r.Unimplemented)});return"addListener"===o&&(p.remove=async()=>s()),p};return a.toString=()=>"".concat(o.toString(),"() { [capacitor code] }"),Object.defineProperty(a,"name",{value:o,writable:!1,configurable:!1}),a},m=p("addListener"),g=p("removeListener"),y=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return h?y:m;case"removeListener":return g;default:return p(t)}}});return o[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(c),...h?[d]:[]])}),v},n.Exception=i,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},s=(e=>e.Capacitor=o(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),a=s.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new s.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new s.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),i=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(i,"; ").concat(o,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}a("CapacitorCookies",{web:()=>new d});const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),n=Object.keys(e).map(e=>e.toLocaleLowerCase());return n.reduce((n,r,i)=>(n[r]=e[t[i]],n),{})}(e.headers),i=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(i.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class f extends l{async request(e){const t=h(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let o,s;return Array.isArray(i)?(s="",i.forEach(e=>{o=t?encodeURIComponent(e):e,s+="".concat(r,"=").concat(o,"&")}),s.slice(0,-1)):(o=t?encodeURIComponent(i):i,s="".concat(r,"=").concat(o)),"".concat(e,"&").concat(s)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,i=await fetch(r,t),o=i.headers.get("content-type")||"";let s,a,{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":a=await i.blob(),s=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(a);break;case"json":s=await i.json();break;default:s=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:s,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}a("CapacitorHttp",{web:()=>new f})},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>a})},579:(e,t,n)=>{e.exports=n(153)},606:(e,t,n)=>{n.d(t,{h1:()=>a,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case k:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ee=null;function ke(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Te(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==_e||null!==Ee)&&(Ae(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){De=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){De=!1}function Oe(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,o,s,a,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,_t,Et,kt,Tt=!1,Ct=[],It=null,At=null,Rt=null,Nt=new Map,Pt=new Map,Dt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==At&&zt(At,e),null!==Rt&&zt(Rt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Wt=w.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(M({},fn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return En}var Tn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),In=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Nn),Dn=[9,13,27,32],jn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!jn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];qn(t,Gn,e,xe(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Er={};function kr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=kr("animationend"),Cr=kr("animationiteration"),Ir=kr("animationstart"),Ar=kr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var jr=Nr[Dr];Pr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Jt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ne(function(){var r=o,i=xe(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Cr:case Ir:l=yn;break;case Ar:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==d&&Qr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Hn(a))if(Xn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?qn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!jn&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(qr(e,o,i)),null!=(o=Pe(e,t))&&r.push(qr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(qr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(qr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[fi]||null}var Si=[],_i=-1;function Ei(e){return{current:e}}function ki(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ti(e,t){_i++,Si[_i]=e.current,e.current=t}var Ci={},Ii=Ei(Ci),Ai=Ei(!1),Ri=Ci;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){ki(Ai),ki(Ii)}function ji(e,t,n){if(Ii.current!==Ci)throw Error(o(168));Ti(Ii,t),Ti(Ai,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ri=Ii.current,Ti(Ii,e),Ti(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Oi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,ki(Ai),ki(Ii),Ti(Ii,e)):ki(Ai),Ti(Ai,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var Wi=[],Hi=0,qi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Wi[Hi++]=Ki,Wi[Hi++]=qi,qi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Xi=o+e}else Ji=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Ei(null),wo=null,xo=null,So=null;function _o(){So=xo=wo=null}function Eo(e){var t=bo.current;ki(bo),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){wo=e,So=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Sa=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===wo)throw Error(o(308));xo=e,wo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Io=null;function Ao(e){null===Io?Io=[e]:Io.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Po=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ul|=s,e.lanes=s,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=Oo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(oc(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=Oo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(oc(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=ic(e),i=Oo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(oc(t,e,r,n),Mo(t,e,r))}};function Ho(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Pi(t)?Ri:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Do(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Pi(t)?Ri:Ii.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Wo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Qo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Qo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Qo(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);Yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);Yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),io&&$i(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&$i(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,m),c}function g(i,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return io&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),io&&$i(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===_){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Jo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Qo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===_?((o=Fc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=Qo(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(O(s))return g(r,o,s,l);Yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Vc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Zo=$o(!0),es=$o(!1),ts={},ns=Ei(ts),rs=Ei(ts),is=Ei(ts);function os(e){if(e===ts)throw Error(o(174));return e}function ss(e,t){switch(Ti(is,t),Ti(rs,e),Ti(ns,ts),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(ns),Ti(ns,t)}function as(){ki(ns),ki(rs),ki(is)}function ls(e){os(is.current);var t=os(ns.current),n=le(t,e.type);t!==n&&(Ti(rs,e),Ti(ns,n))}function cs(e){rs.current===e&&(ki(ns),ki(rs))}var us=Ei(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function fs(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var ps=w.ReactCurrentDispatcher,ms=w.ReactCurrentBatchConfig,gs=0,ys=null,vs=null,bs=null,ws=!1,xs=!1,Ss=0,_s=0;function Es(){throw Error(o(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ts(e,t,n,r,i,s){if(gs=s,ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ps.current=null===e||null===e.memoizedState?ca:ua,e=n(r,i),xs){s=0;do{if(xs=!1,Ss=0,25<=s)throw Error(o(301));s+=1,bs=vs=null,t.updateQueue=null,ps.current=da,e=n(r,i)}while(xs)}if(ps.current=la,t=null!==vs&&null!==vs.next,gs=0,bs=vs=ys=null,ws=!1,t)throw Error(o(300));return e}function Cs(){var e=0!==Ss;return Ss=0,e}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bs?ys.memoizedState=bs=e:bs=bs.next=e,bs}function As(){if(null===vs){var e=ys.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===bs?ys.memoizedState:bs.next;if(null!==t)bs=t,vs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===bs?ys.memoizedState=bs=e:bs=bs.next=e}return bs}function Rs(e,t){return"function"===typeof t?t(e):t}function Ns(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=vs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((gs&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ys.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(Sa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ys.lanes|=s,Ul|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ps(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ds(){}function js(e,t){var n=ys,r=As(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,Sa=!0),r=r.queue,Ks(Ms.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==bs&&1&bs.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&gs)||Os(n,t,i)}return i}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ys.updateQueue)?(t={lastEffect:null,stores:null},ys.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,Fs(t)&&Us(e)}function Ms(e,t,n){return n(function(){Fs(t)&&Us(e)})}function Fs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Us(e){var t=No(e,1);null!==t&&oc(t,e,1,-1)}function Vs(e){var t=Is();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t.queue=e,e=e.dispatch=ia.bind(null,ys,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ys.updateQueue)?(t={lastEffect:null,stores:null},ys.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bs(){return As().memoizedState}function Ws(e,t,n,r){var i=Is();ys.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Hs(e,t,n,r){var i=As();r=void 0===r?null:r;var o=void 0;if(null!==vs){var s=vs.memoizedState;if(o=s.destroy,null!==r&&ks(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}ys.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function qs(e,t){return Ws(8390656,8,e,t)}function Ks(e,t){return Hs(2048,8,e,t)}function Gs(e,t){return Hs(4,2,e,t)}function Qs(e,t){return Hs(4,4,e,t)}function Ys(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Js(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,Ys.bind(null,t,e),n)}function Xs(){}function $s(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ea(e,t,n){return 0===(21&gs)?(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ys.lanes|=n,Ul|=n,e.baseState=!0),t)}function ta(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ms.transition;ms.transition={};try{e(!1),t()}finally{bt=n,ms.transition=r}}function na(){return As().memoizedState}function ra(e,t,n){var r=ic(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oa(e))sa(t,n);else if(null!==(n=Ro(e,t,n,r))){oc(n,e,r,rc()),aa(n,t,r)}}function ia(e,t,n){var r=ic(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oa(e))sa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Ao(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ro(e,t,i,r))&&(oc(n,e,r,i=rc()),aa(n,t,r))}}function oa(e){var t=e.alternate;return e===ys||null!==t&&t===ys}function sa(e,t){xs=ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var la={readContext:Co,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:function(e,t){return Is().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ws(4194308,4,Ys.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ws(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ws(4,2,e,t)},useMemo:function(e,t){var n=Is();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Is();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ra.bind(null,ys,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Is().memoizedState=e},useState:Vs,useDebugValue:Xs,useDeferredValue:function(e){return Is().memoizedState=e},useTransition:function(){var e=Vs(!1),t=e[0];return e=ta.bind(null,e[1]),Is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ys,i=Is();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&gs)||Os(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ms.bind(null,r,s,e),[e]),r.flags|=2048,zs(9,Ls.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Is(),t=Pl.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=Ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ua={readContext:Co,useCallback:$s,useContext:Co,useEffect:Ks,useImperativeHandle:Js,useInsertionEffect:Gs,useLayoutEffect:Qs,useMemo:Zs,useReducer:Ns,useRef:Bs,useState:function(){return Ns(Rs)},useDebugValue:Xs,useDeferredValue:function(e){return ea(As(),vs.memoizedState,e)},useTransition:function(){return[Ns(Rs)[0],As().memoizedState]},useMutableSource:Ds,useSyncExternalStore:js,useId:na,unstable_isNewReconciler:!1},da={readContext:Co,useCallback:$s,useContext:Co,useEffect:Ks,useImperativeHandle:Js,useInsertionEffect:Gs,useLayoutEffect:Qs,useMemo:Zs,useReducer:Ps,useRef:Bs,useState:function(){return Ps(Rs)},useDebugValue:Xs,useDeferredValue:function(e){var t=As();return null===vs?t.memoizedState=e:ea(t,vs.memoizedState,e)},useTransition:function(){return[Ps(Rs)[0],As().memoizedState]},useMutableSource:Ds,useSyncExternalStore:js,useId:na,unstable_isNewReconciler:!1};function ha(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ma="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=Oo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),pa(0,t)},n}function ya(e,t,n){(n=Oo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function va(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ma;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oo(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xa=w.ReactCurrentOwner,Sa=!1;function _a(e,t,n,r){t.child=null===e?es(t,null,n,r):Zo(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=Ts(e,t,n,r,o,i),n=Cs(),null===e||Sa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function ka(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ta(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(Sa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(Sa=!0)}}return Aa(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Ll,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Ll,Ol),Ol|=r;return _a(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var o=Pi(n)?Ri:Ii.current;return o=Ni(t,o),To(t,i),n=Ts(e,t,n,r,o,i),r=Cs(),null===e||Sa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ra(e,t,n,r,i){if(Pi(n)){var o=!0;Li(t)}else o=!1;if(To(t,i),null===t.stateNode)Ka(e,t),qo(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Ni(t,c=Pi(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Ko(t,s,r,c),Po=!1;var h=t.memoizedState;s.state=h,Uo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ai.current||Po?("function"===typeof u&&(Bo(t,n,u,r),l=t.memoizedState),(a=Po||Ho(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,jo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Ni(t,l=Pi(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Ko(t,s,r,l),Po=!1,h=t.memoizedState,s.state=h,Uo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ai.current||Po?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(c=Po||Ho(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ia(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),Ga(e,t,o);r=t.stateNode,xa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),ss(e,t.containerInfo)}function Da(e,t,n,r,i){return po(),mo(i),t.flags|=256,_a(e,t,n,r),t.child}var ja,Oa,La,Ma,Fa={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,s=us.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(us,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Fa,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=fa(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(s=Fc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Fa,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=fa(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),Sa||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,No(e,i),oc(r,e,i,-1))}return vc(),Ba(e,t,a,r=fa(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&mo(r),Zo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Ha(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(us,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,o);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ya(t),null;case 3:return r=t.stateNode,as(),ki(Ai),ki(Ii),fs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(cc(oo),oo=null))),Oa(e,t),Ya(t),null;case 5:cs(t);var i=os(is.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ya(t),null}if(e=os(ns.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=os(is.current),os(ns.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ya(t),null;case 13:if(ki(us),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),s=!1}else null!==oo&&(cc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&us.current)?0===Ml&&(Ml=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return as(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ya(t),null;case 10:return Eo(t.type._context),Ya(t),null;case 19:if(ki(us),null===(s=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Qa(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ds(e))){for(t.flags|=128,Qa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(us,1&us.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>ql&&(t.flags|=128,r=!0,Qa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ya(t),null}else 2*Xe()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=us.current,Ti(us,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xa(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return as(),ki(Ai),ki(Ii),fs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return cs(t),null;case 13:if(ki(us),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(us),null;case 4:return as(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,os(ns.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Za=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var il=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&rl(t,n,o)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||nl(n,t);case 6:var r=fl,i=pl;fl=null,ml(e,t,n),pl=i,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(fl,n.stateNode));break;case 4:r=fl,i=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&rl(n,t,s),i=i.next}while(i!==r)}ml(e,t,n);break;case 1:if(!Za&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cc(n,t,a)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,ml(e,t,n),Za=r):ml(e,t,n);break;default:ml(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(o(160));gl(s,a,i),fl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),wl(e),4&r){try{ol(3,e,e.return),sl(3,e)}catch(g){Cc(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:vl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(vl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Cc(e,e.return,g)}}break;case 6:if(vl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Cc(e,e.return,g)}}break;case 3:if(vl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:vl(t,e),wl(e);break;case 13:vl(t,e),wl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Xe())),4&r&&yl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,vl(t,e),Za=u):vl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,tl=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),wl(e),4&r&&yl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),hl(e,ul(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;dl(e,ul(e),s);break;default:throw Error(o(161))}}catch(Xo){Cc(e,e.return,Xo)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){tl=e,Sl(e,t,n)}function Sl(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var i=tl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=$a;var c=Za;if($a=s,(Za=l)&&!c)for(tl=i;null!==tl;)l=(s=tl).child,22===s.tag&&null!==s.memoizedState?kl(i):null!==l?(l.return=s,tl=l):kl(i);for(;null!==o;)tl=o,Sl(o,t,n),o=o.sibling;tl=i,$a=a,Za=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,tl=o):_l(e)}}function _l(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Za||512&t.flags&&al(t)}catch(f){Cc(t,t.return,f)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function El(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function kl(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Xo){Cc(t,n,Xo)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Xo){Cc(t,i,Xo)}}var o=t.return;try{al(t)}catch(Xo){Cc(t,o,Xo)}break;case 5:var s=t.return;try{al(t)}catch(Xo){Cc(t,s,Xo)}}}catch(Xo){Cc(t,t.return,Xo)}if(t===e){tl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,tl=a;break}tl=t.return}}var Tl,Cl=Math.ceil,Il=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Rl=w.ReactCurrentBatchConfig,Nl=0,Pl=null,Dl=null,jl=0,Ol=0,Ll=Ei(0),Ml=0,Fl=null,Ul=0,Vl=0,zl=0,Bl=null,Wl=null,Hl=0,ql=1/0,Kl=null,Gl=!1,Ql=null,Yl=null,Jl=!1,Xl=null,$l=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&Nl)?Xe():-1!==tc?tc:tc=Xe()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==jl?jl&-jl:null!==go.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function oc(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(o(185));yt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(Vl|=n),4===Ml&&uc(e,jl)),sc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=Xe()+500,Ui&&Bi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Pl?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(dc.bind(null,e)):zi(dc.bind(null,e)),si(function(){0===(6&Nl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(tc=-1,nc=0,0!==(6&Nl))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bc(e,r);else{t=r;var i=Nl;Nl|=2;var s=yc();for(Pl===e&&jl===t||(Kl=null,ql=Xe()+500,mc(e,t));;)try{xc();break}catch(l){gc(e,l)}_o(),Il.current=s,Nl=i,null!==Dl?t=0:(Pl=null,jl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=lc(e,i))),1===t)throw n=Fl,mc(e,0),uc(e,r),sc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bc(e,r))&&(0!==(s=pt(e))&&(r=s,t=lc(e,s))),1===t))throw n=Fl,mc(e,0),uc(e,r),sc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ec(e,Wl,Kl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Hl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Wl,Kl),t);break}Ec(e,Wl,Kl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Wl,Kl),r);break}Ec(e,Wl,Kl);break;default:throw Error(o(329))}}}return sc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function lc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Wl,Wl=n,null!==t&&cc(t)),e}function cc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function uc(e,t){for(t&=~zl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Nl))throw Error(o(327));kc();var t=ht(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=bc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Fl,mc(e,0),uc(e,t),sc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Wl,Kl),sc(e,Xe()),null}function hc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=Xe()+500,Ui&&Bi())}}function fc(e){null!==Xl&&0===Xl.tag&&0===(6&Nl)&&kc();var t=Nl;Nl|=1;var n=Rl.transition,r=bt;try{if(Rl.transition=null,bt=1,e)return e()}finally{bt=r,Rl.transition=n,0===(6&(Nl=t))&&Bi()}}function pc(){Ol=Ll.current,ki(Ll)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:as(),ki(Ai),ki(Ii),fs();break;case 5:cs(r);break;case 4:as();break;case 13:case 19:ki(us);break;case 10:Eo(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Dl=e=Lc(e.current,null),jl=Ol=t,Ml=0,Fl=null,zl=Vl=Ul=0,Wl=Bl=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(r=(n=Io[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Io=null}return e}function gc(e,t){for(;;){var n=Dl;try{if(_o(),ps.current=la,ws){for(var r=ys.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ws=!1}if(gs=0,bs=vs=ys=null,xs=!1,Ss=0,Al.current=null,null===n||null===n.return){Ml=1,Fl=t,Dl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ba(a);if(null!==p){p.flags&=-257,wa(p,a,l,0,t),1&p.mode&&va(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){va(s,u,t),vc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ba(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),wa(y,a,l,0,t),mo(ha(c,l));break e}}s=c=ha(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ga(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ya(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function yc(){var e=Il.current;return Il.current=la,null===e?la:e}function vc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&Ul)&&0===(268435455&Vl)||uc(Pl,jl)}function bc(e,t){var n=Nl;Nl|=2;var r=yc();for(Pl===e&&jl===t||(Kl=null,mc(e,t));;)try{wc();break}catch(i){gc(e,i)}if(_o(),Nl=n,Il.current=r,null!==Dl)throw Error(o(261));return Pl=null,jl=0,Ml}function wc(){for(;null!==Dl;)Sc(Dl)}function xc(){for(;null!==Dl&&!Ye();)Sc(Dl)}function Sc(e){var t=Tl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?_c(e):Dl=t,Al.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Ec(e,t,n){var r=bt,i=Rl.transition;try{Rl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Xl);if(0!==(6&Nl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Pl&&(Dl=Pl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,function(){return kc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Rl.transition,Rl.transition=null;var a=bt;bt=1;var l=Nl;Nl|=4,Al.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(vo){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(vo){Cc(t,t.return,vo)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=il,il=!1}(e,n),bl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,xl(n,e,i),Je(),Nl=l,bt=a,Rl.transition=s}else e.current=n;if(Jl&&(Jl=!1,Xl=e,$l=i),s=e.pendingLanes,0===s&&(Yl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&$l)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,Bi()}(e,t,n,r)}finally{Rl.transition=i,bt=r}return null}function kc(){if(null!==Xl){var e=wt($l),t=Rl.transition,n=bt;try{if(Rl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Nl))throw Error(o(331));var i=Nl;for(Nl|=4,tl=e.current;null!==tl;){var s=tl,a=s.child;if(0!==(16&tl.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:ol(8,d,s)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}tl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,tl=a;else e:for(;null!==tl;){if(0!==(2048&(s=tl).flags))switch(s.tag){case 0:case 11:case 15:ol(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,tl=v;break e}tl=s.return}}var b=e.current;for(tl=b;null!==tl;){var w=(a=tl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,tl=w;else e:for(a=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===a){tl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,tl=x;break e}tl=l.return}}if(Nl=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Rl.transition=t}}return!1}function Tc(e,t,n){e=Lo(e,t=ga(0,t=ha(n,t),1),1),t=rc(),null!==e&&(yt(e,1,t),sc(e,t))}function Cc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Lo(t,e=ya(t,e=ha(n,e),1),1),e=rc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(jl&n)===n&&(4===Ml||3===Ml&&(130023424&jl)===jl&&500>Xe()-Hl?mc(e,0):zl|=n),sc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=No(e,t))&&(yt(e,t,n),sc(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ac(e,n)}function Pc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return Fc(n.children,i,s,t);case E:a=8,i|=8;break;case k:return(e=jc(12,n,t,2|i)).elementType=k,e.lanes=s,e;case A:return(e=jc(13,n,t,i)).elementType=A,e.lanes=s,e;case R:return(e=jc(19,n,t,i)).elementType=R,e.lanes=s,e;case D:return Uc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case I:a=11;break e;case N:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,i,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function Hc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function qc(e,t,n,r,i,o,s,a,l){return(e=Wc(n,r,!0,e,0,o,0,a,l)).context=Hc(null),n=e.current,(o=Oo(r=rc(),i=ic(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function Kc(e,t,n,r){var i=t.current,o=rc(),s=ic(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,s))&&(oc(e,i,s,o),Mo(e,i,s)),s}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)Sa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Sa=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),po();break;case 5:ls(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ss(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(us,1&us.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ti(us,1&us.current),null!==(e=Ga(e,t,n))?e.sibling:null);Ti(us,1&us.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ga(e,t,n)}(e,t,n);Sa=0!==(131072&e.flags)}else Sa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);To(t,n),i=Ts(null,t,r,e,i,n);var s=Cs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(t),i.updater=Wo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Na(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=ka(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,jo(e,t),Uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n,i=ha(Error(o(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ha(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=es(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ls(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ia(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Va(e,t,n);case 4:return ss(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(bo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Ga(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Oo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ko(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Co(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),ka(e,t,r,i=yo(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,To(t,n),qo(t,r,i),Go(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ca(e,t,n)}throw Error(o(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tu(){}function nu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Gc(s);a.call(e)}}Kc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gc(s);o.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",tu);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gc(l);a.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",tu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),fc(function(){Kc(t,l,n,r)}),l}(n,t,e,i,r);return Gc(s)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Kc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Kc(null,e,null,null)}),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Xe()),0===(6&Nl)&&(ql=Xe()+500,Bi()))}break;case 13:fc(function(){var t=No(e,1);if(null!==t){var n=rc();oc(t,e,1,n)}}),Yc(e,1)}},St=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)oc(t,e,134217728,rc());Yc(e,134217728)}},_t=function(e){if(13===e.tag){var t=ic(e),n=No(e,t);if(null!==n)oc(n,e,t,rc());Yc(e,t)}},Et=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=hc,Ae=fc;var ru={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,Ce,hc]},iu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ou={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(ou),ot=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(o(40));return!!e._reactRootContainer&&(fc(function(){nu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return nu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},776:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>O,g:()=>j,dM:()=>D,u:()=>l,Uj:()=>a,Fy:()=>v,tD:()=>W,bD:()=>F,hp:()=>B,T9:()=>f,Tj:()=>d,yU:()=>h,XA:()=>p,mS:()=>c,Ku:()=>K,ZQ:()=>S,sr:()=>T,zJ:()=>g,c1:()=>k,Im:()=>M,lT:()=>I,zW:()=>N,jZ:()=>_,lV:()=>C,nr:()=>A,Ov:()=>R,gE:()=>y,Am:()=>V,I9:()=>z,P1:()=>x,eX:()=>P});var r=n(555);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDhj5l-c2o2U3Yc3ZN_rnbMlf8-MNCWfEA",REACT_APP_FIREBASE_AUTH_DOMAIN:"tbreakapp.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"tbreakapp",REACT_APP_FIREBASE_STORAGE_BUCKET:"tbreakapp.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"152648510768",REACT_APP_FIREBASE_APP_ID:"1:152648510768:web:3f3d7df7e4f1d608be2cf5",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-JDVY4C21J4",REACT_APP_DONATION_FUNCTION_URL:"https://us-central1-tbreakapp.cloudfunctions.net/donations"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}const b={};let w=!1;function x(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function E(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function k(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function T(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function D(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class j extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new j(n,o,t)}}const L=/\{\$([^}]+)}/g;function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(U(n)&&U(o)){if(!F(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U(e){return null!==e&&"object"===typeof e}function V(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function B(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function W(e,t){const n=new H(e,t);return n.subscribe.bind(n)}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q(){}function K(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{n.d(t,{MR:()=>v,P2:()=>y});var r=n(555);const i=(e,t)=>t.some(t=>e instanceof t);let o,s;const a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return c.set(o,t.sort?t.sort():[t]),m(o)}}function p(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,t)}(e),i(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(m(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=p(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=m(s);return r&&s.addEventListener("upgradeneeded",e=>{r(m(s.result),e.oldVersion,e.newVersion,m(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),m(n).then(()=>{})}const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return x.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(h)},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},s=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".655588aa.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-typescript:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,[s,a,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkreact_typescript=self.webpackChunkreact_typescript||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n.t(r,2),o=n(391);function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=n(555);const l=["sri"],c=["page"],u=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var p="popstate";function m(){return S(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return b("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:w(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function g(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,a.A)((0,a.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function x(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l="POP",c=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:m.location,delta:t})}function f(e){return _(e)}null==u&&(u=0,s.replaceState((0,a.A)((0,a.A)({},s.state),{},{idx:u}),""));let m={get action(){return l},get location(){return e(i,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(p,h),c=e,()=>{i.removeEventListener(p,h),c=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=b(m.location,e,t);n&&n(r,e),u=d()+1;let a=v(r,u),h=m.createHref(r);try{s.pushState(a,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}o&&c&&c({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let r=b(m.location,e,t);n&&n(r,e),u=d();let i=v(r,u),a=m.createHref(r);s.replaceState(i,"",a),o&&c&&c({action:l,location:m.location,delta:0})},go:e=>s.go(e)};return m}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),g(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:w(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function E(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function k(e,t,n,r){let i=V(("string"===typeof t?x(t):t).pathname||"/",n);if(null==i)return null;let o=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=U(i);s=L(o[a],e,r)}return s}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;g(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Q([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:O(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of C(e.path))o(e,t,!0,r);else o(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=C(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,A=3,R=2,N=1,P=10,D=-2,j=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=D),t&&(r+=R),n.filter(e=>!j(e)).reduce((e,t)=>e+(I.test(t)?A:""===t?N:P),r)}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:Q([o,u.pathname]),pathnameBase:Y(Q([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=Q([o,u.pathnameBase]))}return s}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=F(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B=e=>z.test(e);function W(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function q(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=q(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=x(e):(r=(0,a.A)({},e),g(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),g(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),g(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let o,s=""===e||""===r.pathname,l=s?"/":r.pathname;if(null==l)o=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:o=""}="string"===typeof e?x(e):e;if(r)if(B(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),y(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?W(r.substring(1),"/"):W(r,n)}else t=n;return{pathname:t,search:J(i),hash:X(o)}}(r,o),u=l&&"/"!==l&&l.endsWith("/"),d=(s||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function Z(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ne=r.createContext(null);ne.displayName="DataRouter";var re=r.createContext(null);re.displayName="DataRouterState";var ie=r.createContext(!1);var oe=r.createContext({isTransitioning:!1});oe.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ae=r.createContext(null);ae.displayName="Await";var le=r.createContext(null);le.displayName="Navigation";var ce=r.createContext(null);ce.displayName="Location";var ue=r.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var de=r.createContext(null);de.displayName="RouteError";function he(){return null!=r.useContext(ce)}function fe(){return g(he(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ce).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){r.useContext(le).static||r.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=r.useContext(ue);return e?function(){let{router:e}=ke("useNavigate"),t=Ce("useNavigate"),n=r.useRef(!1);me(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(n.current,pe),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,(0,a.A)({fromRouteId:t},i)))},[e,t]);return i}():function(){g(he(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ne),{basename:t,navigator:n}=r.useContext(le),{matches:i}=r.useContext(ue),{pathname:o}=fe(),s=JSON.stringify(K(i)),a=r.useRef(!1);me(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(a.current,pe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=G(r,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,s,o,e]);return l}()}r.createContext(null);function ye(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ue),{pathname:i}=fe(),o=JSON.stringify(K(n));return r.useMemo(()=>G(e,JSON.parse(o),i,"path"===t),[e,o,i,t])}function ve(e,t,n,i,o){g(he(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(le),{matches:l}=r.useContext(ue),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Re(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=fe();if(t){var v;let e="string"===typeof t?x(t):t;g("/"===h||(null===(v=e.pathname)||void 0===v?void 0:v.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let b=p.pathname||"/",w=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=E(e,{pathname:w});y(f||null!=S,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==S||void 0!==S[S.length-1].route.element||void 0!==S[S.length-1].route.Component||void 0!==S[S.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let _=_e(S&&S.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Q([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,n,i,o);return t&&_?r.createElement(ce.Provider,{value:{location:(0,a.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},_):_}function be(){let e=Ie(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:s},"ErrorBoundary")," or"," ",r.createElement("code",{style:s},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,a)}var we=r.createElement(be,null),xe=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ue.Provider,{value:this.props.routeContext},r.createElement(de.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Se(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(ne);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ue.Provider,{value:t},i)}function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));g(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}let c=n&&i?(e,t)=>{var r,o;i(e,{location:n.location,params:null!==(r=null===(o=n.matches)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.params)&&void 0!==r?r:{},unstable_pattern:Z(n.matches),errorInfo:t})}:void 0;return o.reduceRight((e,i,u)=>{let d,h=!1,f=null,p=null;n&&(d=s&&i.route.id?s[i.route.id]:void 0,f=i.route.errorElement||we,a&&(l<0&&0===u?(Re("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),g=()=>{let t;return t=d?f:h?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(xe,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function Ee(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ke(e){let t=r.useContext(ne);return g(t,Ee(e)),t}function Te(e){let t=r.useContext(re);return g(t,Ee(e)),t}function Ce(e){let t=function(e){let t=r.useContext(ue);return g(t,Ee(e)),t}(e),n=t.matches[t.matches.length-1];return g(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ie(){var e;let t=r.useContext(de),n=Te("useRouteError"),i=Ce("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ae={};function Re(e,t,n){t||Ae[e]||(Ae[e]=!0,y(!1,n))}var Ne={};function Pe(e,t){e||Ne[t]||(Ne[t]=!0,console.warn(t))}i.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function De(e){let{to:t,replace:n,state:i,relative:o}=e;g(he(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=r.useContext(le);y(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=r.useContext(ue),{pathname:l}=fe(),c=ge(),u=G(t,K(a),l,"path"===o),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:i,relative:o})},[c,d,o,n,i]),null}function je(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:t="/",children:n=null,location:i,navigationType:o="POP",navigator:s,static:a=!1,unstable_useTransitions:l}=e;g(!he(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[c,s,a,l]);"string"===typeof i&&(i=x(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,v=r.useMemo(()=>{let e=V(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:o}},[c,d,h,f,p,m,o]);return y(null!=v,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:r.createElement(le.Provider,{value:u},r.createElement(ce.Provider,{children:n,value:v}))}function Le(e){let{children:t,location:n}=e;return ve(Me(t),n)}r.Component;function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Me(e.props.children,o));g(e.type===je,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Me(e.props.children,o)),n.push(s)}),n}var Fe="get",Ue="application/x-www-form-urlencoded";function Ve(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var ze=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||Be.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function He(e,t){let n,r,i,o,s;if(Ve(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?V(s,t):null,n=e.getAttribute("method")||Fe,i=We(e.getAttribute("enctype"))||Ue,o=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?V(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Fe,i=We(e.getAttribute("formenctype"))||We(s.getAttribute("enctype"))||Ue,o=new FormData(s,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fe,r=null,i=Ue,s=e}var a;return o&&"text/plain"===i&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ke(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===V(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ge(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qe(e){return null!=e&&"string"===typeof e.page}function Ye(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,n,r,i,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>s(e,t)||a(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Xe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function $e(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Qe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function Ze(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=r.useContext(ne);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=r.useContext(re);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=r.createContext(void 0);function rt(){let e=r.useContext(nt);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}nt.displayName="FrameworkContext";function st(e){let{page:t}=e,n=s(e,c),{router:i}=et(),o=r.useMemo(()=>E(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?r.createElement(lt,(0,a.A)({page:t,matches:o},n)):null}function at(e){let{manifest:t,routeModules:n}=rt(),[i,o]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return $e((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ge(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ye).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,a.A)((0,a.A)({},e),{},{rel:"prefetch",as:"style"}):(0,a.A)((0,a.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||o(e)}),()=>{r=!0}},[e,t,n]),i}function lt(e){let{page:t,matches:n}=e,i=s(e,u),o=fe(),{manifest:l,routeModules:c}=rt(),{basename:d}=et(),{loaderData:h,matches:f}=tt(),p=r.useMemo(()=>Je(t,n,f,l,o,"data"),[t,n,f,l,o]),m=r.useMemo(()=>Je(t,n,f,l,o,"assets"),[t,n,f,l,o]),g=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=l.routes[t.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=c[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ke(t,d,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[d,h,o,l,p,n,t,c]),y=r.useMemo(()=>Xe(m,l),[m,l]),v=at(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",(0,a.A)({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",(0,a.A)({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",(0,a.A)({key:t,nonce:i.nonce},n))}))}var ct=!1;function ut(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:o,routeDiscovery:c,ssr:u}=rt(),{router:d,static:h,staticContext:f}=et(),{matches:p}=tt(),m=r.useContext(ie),g=Ze(c,u);o&&(o.didRenderScripts=!0);let y=ot(p,null,i);r.useEffect(()=>{ct=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let o=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=s(e,l),i=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(o.pop();o.length>0;)c.push("/".concat(o.join("/"))),o.pop();c.forEach(e=>{let n=E(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let u=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return(0,a.A)((0,a.A)({},r),{},{routes:u,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),r.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),b=ct||m?[]:(w=t.entry.imports.concat(Xe(y,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let x="object"===typeof t.sri?t.sri:{};return Pe(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0})),v)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ht(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,o=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return r.createElement(ft,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(ft,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function ft(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:o,children:s}=e,{routeModules:a}=rt();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!o?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,i?r.createElement(ut,null):null)))}var pt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{pt&&(window.__reactRouterVersion="7.10.1")}catch(zy){}function mt(e){let{basename:t,children:n,unstable_useTransitions:i,window:o}=e,s=r.useRef();null==s.current&&(s.current=m({window:o,v5Compat:!0}));let a=s.current,[l,c]=r.useState({action:a.action,location:a.location}),u=r.useCallback(e=>{!1===i?c(e):r.startTransition(()=>c(e))},[i]);return r.useLayoutEffect(()=>a.listen(u),[a,u]),r.createElement(Oe,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:!0===i})}var gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=r.forwardRef(function(e,t){let n,{onClick:i,discover:o="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:f,target:p,to:m,preventScrollReset:v,viewTransition:b}=e,x=s(e,d),{basename:S,unstable_useTransitions:_}=r.useContext(le),E="string"===typeof m&&gt.test(m),k=!1;if("string"===typeof m&&E&&(n=m,pt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=V(t.pathname,S);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:k=!0}catch(zy){y(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let T=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(he(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(le),{hash:o,pathname:s,search:a}=ye(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:Q([n,s])),i.createHref({pathname:l,search:a,hash:o})}(m,{relative:c}),[C,I,A]=function(e,t){let n=r.useContext(nt),[i,o]=r.useState(!1),[s,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{o(!0)},m=()=>{o(!1),a(!1)};return n?"intent"!==e?[s,f,{}]:[s,f,{onFocus:it(l,p),onBlur:it(c,m),onMouseEnter:it(u,p),onMouseLeave:it(d,m),onTouchStart:it(h,p)}]:[!1,f,{}]}(l,x),R=function(e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a,unstable_useTransitions:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ge(),u=fe(),d=ye(e,{relative:s});return r.useCallback(h=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(h,t)){h.preventDefault();let t=void 0!==n?n:w(u)===w(d),f=()=>c(e,{replace:t,state:i,preventScrollReset:o,relative:s,viewTransition:a});l?r.startTransition(()=>f()):f()}},[u,c,d,n,i,t,e,o,s,a,l])}(m,{replace:h,state:f,target:p,preventScrollReset:v,relative:c,viewTransition:b,unstable_useTransitions:_});let N=r.createElement("a",(0,a.A)((0,a.A)((0,a.A)({},x),A),{},{href:n||T,onClick:k||u?i:function(e){i&&i(e),e.defaultPrevented||R(e)},ref:dt(t,I),target:p,"data-discover":E||"render"!==o?void 0:"true"}));return C&&!E?r.createElement(r.Fragment,null,N,r.createElement(st,{page:T})):N});yt.displayName="Link";var vt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:l=!1,style:c,to:u,viewTransition:d,children:f}=e,p=s(e,h),m=ye(u,{relative:p.relative}),y=fe(),v=r.useContext(re),{navigator:b,basename:w}=r.useContext(le),x=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(oe);g(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xt("useViewTransitionState"),o=ye(e,{relative:t});if(!n.isTransitioning)return!1;let s=V(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=V(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=M(o.pathname,a)||null!=M(o.pathname,s)}(m)&&!0===d,S=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,_=y.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(_=_.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&w&&(E=V(E,w)||E);const k="/"!==S&&S.endsWith("/")?S.length-1:S.length;let T,C=_===S||!l&&_.startsWith(S)&&"/"===_.charAt(k),I=null!=E&&(E===S||!l&&E.startsWith(S)&&"/"===E.charAt(S.length)),A={isActive:C,isPending:I,isTransitioning:x},R=C?n:void 0;T="function"===typeof o?o(A):[o,C?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N="function"===typeof c?c(A):c;return r.createElement(yt,(0,a.A)((0,a.A)({},p),{},{"aria-current":R,className:T,ref:t,style:N,to:u,viewTransition:d}),"function"===typeof f?f(A):f)});vt.displayName="NavLink";var bt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:o,reloadDocument:l,replace:c,state:u,method:d=Fe,action:h,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:v}=e,b=s(e,f),{unstable_useTransitions:x}=r.useContext(le),S=Et(),_=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(le),i=r.useContext(ue);g(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),s=(0,a.A)({},ye(e||".",{relative:t})),l=fe();if(null==e){s.search=l.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:Q([n,s.pathname]));return w(s)}(h,{relative:m}),E="get"===d.toLowerCase()?"get":"post",k="string"===typeof h&&gt.test(h);return r.createElement("form",(0,a.A)((0,a.A)({ref:t,method:E,action:_,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,s=()=>S(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:c,state:u,relative:m,preventScrollReset:y,viewTransition:v});x&&!1!==o?r.startTransition(()=>s()):s()}},b),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let t=r.useContext(ne);return g(t,wt(e)),t}bt.displayName="Form";var St=0,_t=()=>"__".concat(String(++St),"__");function Et(){let{router:e}=xt("useSubmit"),{basename:t}=r.useContext(le),n=Ce("useRouteId"),i=e.fetch,o=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:l,formData:c,body:u}=He(e,t);if(!1===r.navigate){let e=r.fetcherKey||_t();await i(e,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await o(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,o,t,n])}var kt=n(150);(0,kt.KO)("firebase","12.6.0","app");var Tt=n(776),Ct=n(965),It=n(606);const At=["providerId"],Rt=["uid","auth","stsTokenManager"],Nt=["providerId","signInMethod"];function Pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dt=Pt,jt=new Tt.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ot=new Ct.Vy("@firebase/auth");function Lt(e){if(Ot.logLevel<=Ct.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ot.error("Auth (".concat(kt.MF,"): ").concat(e),...n)}}function Mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zt(e,...n)}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zt(e,...n)}function Ut(e,t,n){const r=(0,a.A)((0,a.A)({},Dt()),{},{[t]:n});return new Tt.FA("auth","Firebase",r).create(t,{appName:e.name})}function Vt(e){return Ut(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return jt.create(e,...n)}function Bt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw zt(t,...r)}}function Wt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Lt(t),new Error(t)}function Ht(e,t){e||Wt(t)}function qt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kt(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Qt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ht(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,Tt.jZ)()||(0,Tt.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kt()||(0,Tt.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Yt(e,t){Ht(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Jt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$t=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zt=new Qt(3e4,6e4);function en(e,t){return e.tenantId&&!t.tenantId?(0,a.A)((0,a.A)({},t),{},{tenantId:e.tenantId}):t}async function tn(e,t,n,r){return nn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=(0,Tt.Am)((0,a.A)({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=(0,a.A)({method:t,headers:l},i);return(0,Tt.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,Tt.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),Jt.fetch()(await on(e,e.config.apiHost,n,s),c)})}async function nn(e,t,n){e._canInitEmulator=!1;const r=(0,a.A)((0,a.A)({},Xt),t);try{const t=new an(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ln(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ln(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ln(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ln(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ut(e,a,s);Mt(e,a)}}catch(zy){if(zy instanceof Tt.g)throw zy;Mt(e,"network-request-failed",{message:String(zy)})}}async function rn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await tn(e,t,n,r,i);return"mfaPendingCredential"in o&&Mt(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function on(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,s=o.config.emulator?Yt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if($t.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function sn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class an{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ft(this.auth,"network-request-failed")),Zt.get())})}}function ln(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ft(e,t,r);return i.customData._tokenResponse=n,i}function cn(e){return void 0!==e&&void 0!==e.enterprise}class un{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dn(e,t){return tn(e,"GET","/v2/recaptchaConfig",en(e,t))}async function hn(e,t){return tn(e,"POST","/v1/accounts:lookup",t)}function fn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(zy){}}function pn(e){return 1e3*Number(e)}function mn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,Tt.u)(n);return e?JSON.parse(e):(Lt("Failed to decode base64 JWT payload"),null)}catch(zy){return Lt("Caught error parsing JWT payload as JSON",null===zy||void 0===zy?void 0:zy.toString()),null}}function gn(e){const t=mn(e);return Bt(t,"internal-error"),Bt("undefined"!==typeof t.exp,"internal-error"),Bt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function yn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(zy){throw zy instanceof Tt.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(zy)&&e.auth.currentUser===e&&await e.auth.signOut(),zy}}class vn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(zy){return void((null===zy||void 0===zy?void 0:zy.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yn(e,hn(n,{idToken:r}));Bt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?xn(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bn(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function xn(e){return e.map(e=>{let{providerId:t}=e,n=s(e,At);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt("undefined"!==typeof e.idToken,"internal-error"),Bt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):gn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(0!==e.length,"internal-error");const t=gn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nn(e,{},async()=>{const n=(0,Tt.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await on(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&(0,Tt.zJ)(e.emulatorConfig.host)&&(a.credentials="include"),Jt.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Sn;return n&&(Bt("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Bt("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Bt("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sn,this.toJSON())}_performRefresh(){return Wt("not implemented")}}function _n(e,t){Bt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class En{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,Rt);this.providerId="firebase",this.proactiveRefresh=new vn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yn(this,this.stsTokenManager.getToken(this.auth,e));return Bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,Tt.Ku)(e),r=await n.getIdToken(t),i=mn(r);Bt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:fn(pn(i.auth_time)),issuedAtTime:fn(pn(i.iat)),expirationTime:fn(pn(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,Tt.Ku)(e);await wn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,a.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new En((0,a.A)((0,a.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await wn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,kt.xZ)(this.auth.app))return Promise.reject(Vt(this.auth));const e=await this.getIdToken();return await yn(this,async function(e,t){return tn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,a.A)((0,a.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,a.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:_}=t;Bt(b&&_,e,"internal-error");const E=Sn.fromJSON(this.name,_);Bt("string"===typeof b,e,"internal-error"),_n(d,e.name),_n(h,e.name),Bt("boolean"===typeof w,e,"internal-error"),Bt("boolean"===typeof x,e,"internal-error"),_n(f,e.name),_n(p,e.name),_n(m,e.name),_n(g,e.name),_n(y,e.name),_n(v,e.name);const k=new En({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(k.providerData=S.map(e=>(0,a.A)({},e))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Sn;r.updateFromServerResponse(t);const i=new En({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await wn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Bt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?xn(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new Sn;s.updateFromIdToken(n);const a=new En({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new bn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const kn=new Map;function Tn(e){Ht(e instanceof Function,"Expected a class definition");let t=kn.get(e);return t?(Ht(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kn.set(e,t),t)}class Cn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cn.type="NONE";const In=Cn;function An(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Rn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=An(this.userKey,r.apiKey,i),this.fullPersistenceKey=An("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await hn(this.auth,{idToken:e}).catch(()=>{});return t?En._fromGetAccountInfoResponse(this.auth,t,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Rn(Tn(In),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Tn(In);const o=An(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await hn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await En._fromGetAccountInfoResponse(e,r,t)}else n=En._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new Rn(i,e,n)):new Rn(i,e,n)}}function Nn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(On(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mn(t))return"Blackberry";if(Fn(t))return"Webos";if(Dn(t))return"Safari";if((t.includes("chrome/")||jn(t))&&!t.includes("edge/"))return"Chrome";if(Ln(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/firefox\//i.test(e)}function Dn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/crios\//i.test(e)}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/iemobile/i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/android/i.test(e)}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/blackberry/i.test(e)}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/webos/i.test(e)}function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)();return Un(e)||Ln(e)||Fn(e)||Mn(e)||/windows phone/i.test(e)||On(e)}function zn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Nn((0,Tt.ZQ)());break;case"Worker":t="".concat(Nn((0,Tt.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(kt.MF,"/").concat(r)}class Bn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(zy){r(zy)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(zy){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===zy||void 0===zy?void 0:zy.message})}}}class Wn{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Hn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new Bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Rn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(zy){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await hn(this,{idToken:e}),n=await En._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,kt.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==s||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(zy){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(zy))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(zy){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wn(e)}catch(zy){if((null===zy||void 0===zy?void 0:zy.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,kt.xZ)(this.app))return Promise.reject(Vt(this));const t=e?(0,Tt.Ku)(e):null;return t&&Bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,kt.xZ)(this.app)?Promise.reject(Vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,kt.xZ)(this.app)?Promise.reject(Vt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return tn(e,"GET","/v2/passwordPolicy",en(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Wn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tt.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return tn(e,"POST","/v2/accounts:revokeToken",en(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tn(e)||this._popupRedirectResolver;Bt(t,this,"argument-error"),this.redirectPersistenceManager=await Rn.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(s,this,"internal-error"),s.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,kt.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Ot.logLevel<=Ct.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ot.warn("Auth (".concat(kt.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function qn(e){return(0,Tt.Ku)(e)}class Kn{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,Tt.tD)(e=>this.observer=e)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qn(e){return Gn.loadJS(e)}function Yn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Jn{constructor(){this.enterprise=new Xn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $n="NO_RECAPTCHA";class Zn{constructor(e){this.type="recaptcha-enterprise",this.auth=qn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;cn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n($n)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Jn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new un(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&cn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Gn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Qn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function er(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Zn(e);let s;if(i)s=$n;else try{s=await o.verify(n)}catch(c){s=await o.verify(n,!0)}const l=(0,a.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function tr(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await er(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await er(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await er(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function nr(e){const t=qn(e),n=await dn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new un(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Zn(t).verify()}}function rr(e,t,n){const r=qn(e);Bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=ir(t),{host:s,port:a}=function(e){const t=ir(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:or(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:or(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(o,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Bt((0,Tt.bD)(c,r.config.emulator)&&(0,Tt.bD)(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,(0,Tt.zJ)(s)?((0,Tt.gE)("".concat(o,"//").concat(s).concat(l)),(0,Tt.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ir(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function or(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class sr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wt("not implemented")}_getIdTokenResponse(e){return Wt("not implemented")}_linkToIdToken(e,t){return Wt("not implemented")}_getReauthenticationResolver(e){return Wt("not implemented")}}async function ar(e,t){return tn(e,"POST","/v1/accounts:signUp",t)}async function lr(e,t){return rn(e,"POST","/v1/accounts:signInWithPassword",en(e,t))}async function cr(e,t){return tn(e,"POST","/v1/accounts:sendOobCode",en(e,t))}async function ur(e,t){return cr(e,t)}class dr extends sr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new dr(e,t,"password")}static _fromEmailAndCode(e,t){return new dr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return tr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithEmailLink",en(e,t))}(e,{email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return tr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ar,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithEmailLink",en(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Mt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hr(e,t){return rn(e,"POST","/v1/accounts:signInWithIdp",en(e,t))}class fr extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,Nt);if(!n||!r)return null;const o=new fr(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return hr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,Tt.Am)(t)}return e}}async function pr(e,t){return tn(e,"POST","/v1/accounts:sendVerificationCode",en(e,t))}const mr={USER_NOT_FOUND:"user-not-found"};class gr extends sr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,t));if(n.temporaryProof)throw ln(e,"account-exists-with-different-credential",n);return n}(e,(0,a.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rn(e,"POST","/v1/accounts:signInWithPhoneNumber",en(e,(0,a.A)((0,a.A)({},t),{},{operation:"REAUTH"})),mr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new gr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class yr{constructor(e){var t,n,r,i,o,s;const a=(0,Tt.I9)((0,Tt.hp)(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Bt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,Tt.I9)((0,Tt.hp)(e)).link,n=t?(0,Tt.I9)((0,Tt.hp)(t)).deep_link_id:null,r=(0,Tt.I9)((0,Tt.hp)(e)).deep_link_id;return(r?(0,Tt.I9)((0,Tt.hp)(r)).link:null)||r||n||t||e}(e);try{return new yr(t)}catch(n){return null}}}class vr{constructor(){this.providerId=vr.PROVIDER_ID}static credential(e,t){return dr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=yr.parseLink(t);return Bt(n,"argument-error"),dr._fromEmailAndCode(e,n.code,n.tenantId)}}vr.PROVIDER_ID="password",vr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",vr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class br{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wr extends br{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xr extends wr{constructor(){super("facebook.com")}static credential(e){return fr._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xr.credential(t.oauthAccessToken)}catch(n){return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com",xr.PROVIDER_ID="facebook.com";class Sr extends wr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fr._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch(i){return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com",Sr.PROVIDER_ID="google.com";class _r extends wr{constructor(){super("github.com")}static credential(e){return fr._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _r.credential(t.oauthAccessToken)}catch(n){return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com",_r.PROVIDER_ID="github.com";class Er extends wr{constructor(){super("twitter.com")}static credential(e,t){return fr._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Er.credential(n,r)}catch(i){return null}}}async function kr(e,t){return rn(e,"POST","/v1/accounts:signUp",en(e,t))}Er.TWITTER_SIGN_IN_METHOD="twitter.com",Er.PROVIDER_ID="twitter.com";class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await En._fromIdTokenResponse(e,n,r),o=Cr(n);return new Tr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cr(n);return new Tr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ir extends Tt.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ir.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ir(e,t,n,r)}}function Ar(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ir._fromErrorAndOperation(e,n,t,r);throw n})}async function Rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await yn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tr._forOperation(e,"link",r)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,kt.xZ)(r.app))return Promise.reject(Vt(r));const i="reauthenticate";try{const o=await yn(e,Ar(r,i,t,e),n);Bt(o.idToken,r,"internal-error");const s=mn(o.idToken);Bt(s,r,"internal-error");const{sub:a}=s;return Bt(e.uid===a,r,"user-mismatch"),Tr._forOperation(e,i,o)}catch(zy){throw(null===zy||void 0===zy?void 0:zy.code)==="auth/".concat("user-not-found")&&Mt(r,"user-mismatch"),zy}}async function Pr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,kt.xZ)(e.app))return Promise.reject(Vt(e));const r="signIn",i=await Ar(e,r,t),o=await Tr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Dr(e,t){return Pr(qn(e),t)}function jr(e,t,n){var r;Bt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Bt("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Or(e){const t=qn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Lr(e,t){return tn(e,"POST","/v2/accounts/mfaEnrollment:start",en(e,t))}new WeakMap;const Mr="__sak";class Fr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mr,"1"),this.storage.removeItem(Mr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ur extends Fr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,Tt.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ur.type="LOCAL";const Vr=Ur;function zr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Br(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Wr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Br(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return zr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Br(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Br(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=zr(n);const i=setInterval(()=>{const e=zr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Wr.type="COOKIE";class Hr extends Fr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hr.type="SESSION";const qr=Hr;class Kr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Kr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Kr.receivers=[];class Qr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=Gr("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Yr(){return window}function Jr(){return"undefined"!==typeof Yr().WorkerGlobalScope&&"function"===typeof Yr().importScripts}const Xr="firebaseLocalStorageDb",$r="firebaseLocalStorage",Zr="fbase_key";class ei{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ti(e,t){return e.transaction([$r],t?"readwrite":"readonly").objectStore($r)}function ni(){const e=indexedDB.open(Xr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore($r,{keyPath:Zr})}catch(zy){n(zy)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains($r)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Xr);return new ei(e).toPromise()}(),t(await ni()))})})}async function ri(e,t,n){const r=ti(e,!0).put({[Zr]:t,value:n});return new ei(r).toPromise()}function ii(e,t){const n=ti(e,!0).delete(t);return new ei(n).toPromise()}class oi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ni()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(zy){if(t++>3)throw zy;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kr._getInstance(Jr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Qr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ni();return await ri(e,Mr,"1"),await ii(e,Mr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ri(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ti(e,!1).get(t),r=await new ei(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ii(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ti(e,!1).getAll();return new ei(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}oi.type="LOCAL";const si=oi;function ai(e,t){return tn(e,"POST","/v2/accounts/mfaSignIn:start",en(e,t))}Yn("rcb"),new Qt(3e4,6e4);const li="recaptcha";async function ci(e,t,n){if(!e._getRecaptchaConfig())try{await nr(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Bt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=tr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return Lr(e,await ui(e,t,n))}return Lr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Bt("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Bt(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=tr(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return ai(e,await ui(e,t,n))}return ai(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=tr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===$n){Bt((null===n||void 0===n?void 0:n.type)===li,e,"argument-error");return pr(e,await ui(e,t,n))}return pr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ui(e,t,n){Bt(n.type===li,e,"argument-error");const r=await n.verify();Bt("string"===typeof r,e,"argument-error");const i=(0,a.A)({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class di{constructor(e){this.providerId=di.PROVIDER_ID,this.auth=qn(e)}verifyPhoneNumber(e,t){return ci(this.auth,e,(0,Tt.Ku)(t))}static credential(e,t){return gr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return di.credentialFromTaggedObject(t)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?gr._fromTokenResponse(n,r):null}}function hi(e,t){return t?Tn(t):(Bt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}di.PROVIDER_ID="phone",di.PHONE_SIGN_IN_METHOD="phone";class fi extends sr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pi(e){return Pr(e.auth,new fi(e),e.bypassAuthState)}function mi(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),Nr(n,new fi(e),e.bypassAuthState)}async function gi(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),Rr(n,new fi(e),e.bypassAuthState)}class yi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(zy){this.reject(zy)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(zy){this.reject(zy)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pi;case"linkViaPopup":case"linkViaRedirect":return gi;case"reauthViaPopup":case"reauthViaRedirect":return mi;default:Mt(this.auth,"internal-error")}}resolve(e){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vi=new Qt(2e3,1e4);class bi extends yi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){Ht(1===this.filter.length,"Popup operations only handle one event");const e=Gr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vi.get())};e()}}bi.currentPopupAction=null;const wi=new Map;class xi extends yi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ei(t),r=_i(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(zy){e=()=>Promise.reject(zy)}wi.set(this.auth._key(),e)}return this.bypassAuthState||wi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Si(e,t){wi.set(e._key(),t)}function _i(e){return Tn(e._redirectPersistence)}function Ei(e){return An("pendingRedirect",e.config.apiKey,e.name)}async function ki(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,kt.xZ)(e.app))return Promise.reject(Vt(e));const r=qn(e),i=hi(r,t),o=new xi(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Ti{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ii(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ii(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ft(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ci(e))}saveEventToCache(e){this.cachedEventUids.add(Ci(e)),this.lastProcessedEventTime=Date.now()}}function Ci(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ii(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ri=/^https?/;async function Ni(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return tn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Pi(r))return}catch(n){}Mt(e,"unauthorized-domain")}function Pi(e){const t=qt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ri.test(n))return!1;if(Ai.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Di=new Qt(3e4,6e4);function ji(){const e=Yr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Oi(e){return new Promise((t,n)=>{var r,i;function o(){ji(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ji(),n(Ft(e,"network-request-failed"))},timeout:Di.get()})}if(null!==(r=Yr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Yr().gapi)||void 0===i||!i.load){const t=Yn("iframefcb");return Yr()[t]=()=>{gapi.load?o():n(Ft(e,"network-request-failed"))},Qn("".concat(Gn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Li=null,e})}let Li=null;const Mi=new Qt(5e3,15e3),Fi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ui=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vi(e){const t=e.config;Bt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:kt.MF},i=Ui.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,Tt.Am)(r).slice(1))}async function zi(e){const t=await function(e){return Li=Li||Oi(e),Li}(e),n=Yr().gapi;return Bt(n,e,"internal-error"),t.open({where:document.body,url:Vi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ft(e,"network-request-failed"),o=Yr().setTimeout(()=>{r(i)},Mi.get());function s(){Yr().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Bi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(zy){}}}function Hi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=(0,a.A)((0,a.A)({},Bi),{},{width:r.toString(),height:i.toString(),top:o,left:s}),u=(0,Tt.ZQ)().toLowerCase();n&&(l=jn(u)?"_blank":n),Pn(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Un(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Tt.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Wi(null);const h=window.open(t||"",l,d);Bt(h,e,"popup-blocked");try{h.focus()}catch(zy){}return new Wi(h)}const qi="__/auth/handler",Ki="emulator/auth/handler",Gi=encodeURIComponent("fac");async function Qi(e,t,n,r,i,o){Bt(e.config.authDomain,e,"auth-domain-config-required"),Bt(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kt.MF,eventId:i};if(t instanceof br){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",(0,Tt.Im)(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof wr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qi);return Yt(t,Ki)}(e),"?").concat((0,Tt.Am)(a).slice(1)).concat(c)}const Yi="webStorageSupport";const Ji=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qr,this._completeRedirectFn=ki,this._overrideRedirectResult=Si}async _openPopup(e,t,n,r){var i;Ht(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hi(e,await Qi(e,t,n,qt(),r),Gr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Yr().location.href=e}(await Qi(e,t,n,qt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ht(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await zi(e),n=new Ti(e);return t.register("authEvent",t=>{Bt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yi,{type:Yi},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Yi];void 0!==i&&t(!!i),Mt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ni(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vn()||Dn()||Un()}};var Xi="@firebase/auth",$i="1.11.1";class Zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const eo=(0,Tt.XA)("authIdTokenMaxAge")||300;let to=null;var no;Gn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ft("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},no="Browser",(0,kt.om)(new It.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Bt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:no,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(no)},c=new Hn(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,kt.om)(new It.uA("auth-internal",e=>(e=>new Zi(e))(qn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,kt.KO)(Xi,$i,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(no)),(0,kt.KO)(Xi,$i,"esm2020");var ro,io,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},so={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,s=e.g[3];o=t+(s^n&(i^s))+r[0]+3614090360&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[3]+3250441966&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[4]+4118548399&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[7]+4249261313&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[8]+1770035416&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[11]+2304563134&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[12]+1804603682&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[15]+1236535329&4294967295,o=t+(i^s&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[0]+3921069994&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[4]+3889429448&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[8]+1163531501&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^s)+r[5]+4294588738&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[1]+2763975236&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[13]+681279174&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[9]+3654602809&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~s))+r[0]+4096336452&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[12]+1700485571&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[8]+1873313359&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[4]+4149444226&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,s=0;for(;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);c.l(e)<=0&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||c.l(e)>0;)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),s=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=o*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*s,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,io=so.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=s(Math.pow(n,o)),i=i.j(o).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},ro=so.Integer=r}).apply("undefined"!==typeof oo?oo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ao,lo,co,uo,ho,fo,po,mo,go="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},yo={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof go&&go];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function _(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),A=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++A,this.da=this.fa=!1}function N(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(N(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const s=F(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new R(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)z(e,t[o],n,r,i);return null}return n=J(n),e&&e[I]?e.J(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const a=s(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new L(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)k||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=J(n),e&&e[I]?e.K(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=J(n),e&&e[I]?(e=e.i,(o=String(t).toString())in e.g&&((n=F(t=e.g[o],n,r,i))>-1&&(N(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):N(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){_.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;O(t=new E(r,e),i)}let o,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)o=t.g=n[s],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const s=t[o];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&M(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,_),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)N(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){_.call(this),this.h=e,this.g={}}u(ne,_);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,se=o.JSON.parse,ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Se(){this.g=!0}function _e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(we,E),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ee,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Ae(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var Pe={},De={};function je(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ne,e.g=sn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=z(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var s="",a=o.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}Jt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ye(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),s.L){Je(r.h,s);var a=s,c=r.O;c&&(a.H=c),a.D&&(Ve(a),Fe(a)),r.g=s}else Yt(r);n.i.length>0&&qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Re.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}_e(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),_e(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}_e(this.i,this.l,t,null),We(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(a),a.P=!0,be(11))}}else _e(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else _e(this.i,this.l,n,null),We(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ae(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(Xo){}},Re.prototype.cancel=function(){this.K=!0,Be(this)},Re.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}qe.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function _t(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function At(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=At(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function Nt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new kt(this.i,this.h)},u(kt,X),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Nt,X);var Pt=/^https?$/i,Dt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ot(e),Mt(e)}function Ot(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var s=Ft(e)>2?e.g.statusText:""}catch(a){s=""}e.l=s+" ["+e.ca()+"]",Ot(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new _t,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Re(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=sn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Wt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Ht(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function qt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Rt(r,e.u,e.o),n=new Re(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),je(n,r,t)}function Gt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;s(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(bo){throw e.push(o+"type="+encodeURIComponent("_badmap")),bo}}catch(bo){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Jt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Rt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Oe(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Je(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new we(r,n)),qt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Jt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new Se;if(o.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function sn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Nt(new Et({ab:n})):new Nt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Nt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void jt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){jt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Nt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Re(this,this.j,e);let o=this.o;if(this.U&&(o?(o=D(o),O(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),o&&(this.R?t="headers="+Ie(At(o))+"&"+t:this.u&&Rt(n,this.u,o)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,je(i,n,null)):je(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Wt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Jt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&qt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,an),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,mo=yo.createWebChannelTransport=function(){return new ln},po=yo.getStatEventTarget=function(){return me()},fo=yo.Event=fe,ho=yo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,uo=yo.ErrorCode=ke,Te.COMPLETE="complete",co=yo.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,lo=yo.WebChannel=ce,yo.FetchXmlHttpFactory=Et,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,ao=yo.XhrIo=Nt}).apply("undefined"!==typeof go?go:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const vo="@firebase/firestore",bo="4.9.2";class wo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wo.UNAUTHENTICATED=new wo(null),wo.GOOGLE_CREDENTIALS=new wo("google-credentials-uid"),wo.FIRST_PARTY=new wo("first-party-uid"),wo.MOCK_USER=new wo("mock-user");let xo="12.3.0";const So=new Ct.Vy("@firebase/firestore");function _o(){return So.logLevel}function Eo(e){if(So.logLevel<=Ct.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.debug("Firestore (".concat(xo,"): ").concat(e),...i)}}function ko(e){if(So.logLevel<=Ct.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.error("Firestore (".concat(xo,"): ").concat(e),...i)}}function To(e){if(So.logLevel<=Ct.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Co);So.warn("Firestore (".concat(xo,"): ").concat(e),...i)}}function Co(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Io(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ao(e,r,n)}function Ao(e,t,n){let r="FIRESTORE (".concat(xo,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ko(r),new Error(r)}function Ro(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ao(t,i,r)}function No(e,t){return e}const Po={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Do extends Tt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class jo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Oo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Lo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wo.UNAUTHENTICATED))}shutdown(){}}class Mo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fo{constructor(e){this.t=e,this.currentUser=wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ro(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jo,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{Eo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Eo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jo)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Eo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ro("string"==typeof t.accessToken,31837,{l:t}),new Oo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ro(null===e||"string"==typeof e,2055,{h:e}),new wo(e)}}class Uo{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=wo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Uo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bo{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,kt.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ro(void 0===this.o,3512);const n=e=>{null!=e.error&&Eo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Eo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Eo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Eo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ro("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new zo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ho{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Wo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function qo(e,t){return e<t?-1:e>t?1:0}function Ko(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Yo(n)===Yo(i)?qo(n,i):Yo(n)?1:-1}return qo(e.length,t.length)}const Go=55296,Qo=57343;function Yo(e){const t=e.charCodeAt(0);return t>=Go&&t<=Qo}function Jo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Xo="__name__";class $o{constructor(e,t,n){void 0===t?t=0:t>e.length&&Io(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Io(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=$o.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return qo(e.length,t.length)}static compareSegments(e,t){const n=$o.isNumericId(e),r=$o.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?$o.extractNumericId(e).compare($o.extractNumericId(t)):Ko(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class Zo extends $o{construct(e,t,n){return new Zo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Do(Po.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Zo(e)}static emptyPath(){return new Zo([])}}const es=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends $o{construct(e,t,n){return new ts(e,t,n)}static isValidIdentifier(e){return es.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Xo}static keyField(){return new ts([Xo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Do(Po.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Do(Po.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Do(Po.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Do(Po.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(t)}static emptyPath(){return new ts([])}}class ns{constructor(e){this.path=e}static fromPath(e){return new ns(Zo.fromString(e))}static fromName(e){return new ns(Zo.fromString(e).popFirst(5))}static empty(){return new ns(Zo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ns(new Zo(e.slice()))}}function rs(e,t,n){if(!n)throw new Do(Po.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function is(e){if(!ns.isDocumentKey(e))throw new Do(Po.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function os(e){if(ns.isDocumentKey(e))throw new Do(Po.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ss(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function as(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Io(12329,{type:typeof e})}function ls(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Do(Po.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=as(e);throw new Do(Po.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function cs(e,t){const n={typeString:e};return t&&(n.value=t),n}function us(e,t){if(!ss(e))throw new Do(Po.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&s!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Do(Po.INVALID_ARGUMENT,n);return!0}const ds=-62135596800,hs=1e6;class fs{static now(){return fs.fromMillis(Date.now())}static fromDate(e){return fs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*hs);return new fs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Do(Po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Do(Po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ds)throw new Do(Po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Do(Po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hs}_compareTo(e){return this.seconds===e.seconds?qo(this.nanoseconds,e.nanoseconds):qo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(us(e,fs._jsonSchema))return new fs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ds;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fs._jsonSchemaVersion="firestore/timestamp/1.0",fs._jsonSchema={type:cs("string",fs._jsonSchemaVersion),seconds:cs("number"),nanoseconds:cs("number")};class ps{static fromTimestamp(e){return new ps(e)}static min(){return new ps(new fs(0,0))}static max(){return new ps(new fs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ms=-1;class gs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}gs.UNKNOWN_ID=-1;function ys(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ps.fromTimestamp(1e9===r?new fs(n+1,0):new fs(n,r));return new bs(i,ns.empty(),t)}function vs(e){return new bs(e.readTime,e.key,ms)}class bs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new bs(ps.min(),ns.empty(),ms)}static max(){return new bs(ps.max(),ns.empty(),ms)}}function ws(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ns.comparator(e.documentKey,t.documentKey),0!==n?n:qo(e.largestBatchId,t.largestBatchId))}const xs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ss{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _s(e){if(e.code!==Po.FAILED_PRECONDITION||e.message!==xs)throw e;Eo("LocalStore","Unexpectedly lost primary lease")}class Es{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Io(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Es((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Es?t:Es.resolve(t)}catch(e){return Es.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Es.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Es.reject(t)}static resolve(e){return new Es((t,n)=>{t(e)})}static reject(e){return new Es((t,n)=>{n(e)})}static waitFor(e){return new Es((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Es.resolve(!1);for(const n of e)t=t.next(e=>e?Es.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Es((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Es((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ks(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ts(e){return"IndexedDbTransactionError"===e.name}class Cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cs.ce=-1;const Is=-1;function As(e){return null==e}function Rs(e){return 0===e&&1/e==-1/0}function Ns(e){return"number"==typeof e&&Number.isInteger(e)&&!Rs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ps="\x01";function Ds(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Os(t)),t=js(e.get(n),t);return Os(t)}function js(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ps:n+="\x01\x11";break;default:n+=t}}return n}function Os(e){return e+Ps+"\x01"}const Ls="remoteDocuments",Ms="owner",Fs="mutationQueues",Us="mutations";const Vs="documentMutations",zs="remoteDocumentsV14",Bs="remoteDocumentGlobal",Ws="targets",Hs="targetDocuments",qs="targetGlobal",Ks="collectionParents",Gs="clientMetadata",Qs="bundles",Ys="namedQueries",Js="indexConfiguration",Xs="indexState",$s="indexEntries",Zs="documentOverlays",ea="globals",ta=[Fs,Us,Vs,Ls,Ws,Ms,qs,Hs,Gs,Bs,Ks,Qs,Ys],na=[Fs,Us,Vs,zs,Ws,Ms,qs,Hs,Gs,Bs,Ks,Qs,Ys,Zs],ra=na,ia=[...ra,Js,Xs,$s];function oa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function aa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class la{constructor(e,t){this.comparator=e,this.root=t||ua.EMPTY}insert(e,t){return new la(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ua.BLACK,null,null))}remove(e){return new la(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ua.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}}class ca{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ua{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ua.RED,this.left=null!=r?r:ua.EMPTY,this.right=null!=i?i:ua.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ua(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ua.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ua.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Io(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Io(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Io(27949);return e+(this.isRed()?0:1)}}ua.EMPTY=null,ua.RED=!0,ua.BLACK=!1,ua.EMPTY=new class{constructor(){this.size=0}get key(){throw Io(57766)}get value(){throw Io(16141)}get color(){throw Io(16727)}get left(){throw Io(29726)}get right(){throw Io(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ua(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class da{constructor(e){this.comparator=e,this.data=new la(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ha(this.data.getIterator())}getIteratorFrom(e){return new ha(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof da))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new da(this.comparator);return t.data=e,t}}class ha{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fa{constructor(e){this.fields=e,e.sort(ts.comparator)}static empty(){return new fa([])}unionWith(e){let t=new da(ts.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class pa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pa("Invalid base64 string: "+e):e}}(e);return new ma(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ma(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const ga=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(e){if(Ro(!!e,39018),"string"==typeof e){let t=0;const n=ga.exec(e);if(Ro(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:va(e.seconds),nanos:va(e.nanos)}}function va(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ba(e){return"string"==typeof e?ma.fromBase64String(e):ma.fromUint8Array(e)}const wa="server_timestamp",xa="__type__",Sa="__previous_value__",_a="__local_write_time__";function Ea(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[xa])||void 0===t?void 0:t.stringValue)===wa}function ka(e){const t=e.mapValue.fields[Sa];return Ea(t)?ka(t):t}function Ta(e){const t=ya(e.mapValue.fields[_a].timestampValue);return new fs(t.seconds,t.nanos)}class Ca{constructor(e,t,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ia="(default)";class Aa{constructor(e,t){this.projectId=e,this.database=t||Ia}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database===Ia}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const Ra="__type__",Na="__max__",Pa={mapValue:{fields:{__type__:{stringValue:Na}}}},Da="__vector__",ja="value";function Oa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ea(e)?4:$a(e)?9007199254740991:Ja(e)?10:11:Io(28295,{value:e})}function La(e,t){if(e===t)return!0;const n=Oa(e);if(n!==Oa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ta(e).isEqual(Ta(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ya(e.timestampValue),r=ya(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ba(e.bytesValue).isEqual(ba(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return va(e.geoPointValue.latitude)===va(t.geoPointValue.latitude)&&va(e.geoPointValue.longitude)===va(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return va(e.integerValue)===va(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=va(e.doubleValue),r=va(t.doubleValue);return n===r?Rs(n)===Rs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jo(e.arrayValue.values||[],t.arrayValue.values||[],La);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(oa(n)!==oa(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!La(n[i],r[i])))return!1;return!0}(e,t);default:return Io(52216,{left:e})}}function Ma(e,t){return void 0!==(e.values||[]).find(e=>La(e,t))}function Fa(e,t){if(e===t)return 0;const n=Oa(e),r=Oa(t);if(n!==r)return qo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=va(e.integerValue||e.doubleValue),r=va(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ua(e.timestampValue,t.timestampValue);case 4:return Ua(Ta(e),Ta(t));case 5:return Ko(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ba(e),r=ba(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=qo(n[i],r[i]);if(0!==e)return e}return qo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=qo(va(e.latitude),va(t.latitude));return 0!==n?n:qo(va(e.longitude),va(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Va(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s[ja])||void 0===n?void 0:n.arrayValue,c=null===(r=a[ja])||void 0===r?void 0:r.arrayValue,u=qo((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Va(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Pa.mapValue&&t===Pa.mapValue)return 0;if(e===Pa.mapValue)return 1;if(t===Pa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Ko(r[s],o[s]);if(0!==e)return e;const t=Fa(n[r[s]],i[o[s]]);if(0!==t)return t}return qo(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Io(23264,{he:n})}}function Ua(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qo(e,t);const n=ya(e),r=ya(t),i=qo(n.seconds,r.seconds);return 0!==i?i:qo(n.nanos,r.nanos)}function Va(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fa(n[i],r[i]);if(e)return e}return qo(n.length,r.length)}function za(e){return Ba(e)}function Ba(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ya(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ba(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ns.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ba(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ba(e.fields[i]));return n+"}"}(e.mapValue):Io(61005,{value:e})}function Wa(e){switch(Oa(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ka(e);return t?16+Wa(t):16;case 5:return 2*e.stringValue.length;case 6:return ba(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Wa(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return sa(e.fields,(e,n)=>{t+=e.length+Wa(n)}),t}(e.mapValue);default:throw Io(13486,{value:e})}}function Ha(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function qa(e){return!!e&&"integerValue"in e}function Ka(e){return!!e&&"arrayValue"in e}function Ga(e){return!!e&&"nullValue"in e}function Qa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ya(e){return!!e&&"mapValue"in e}function Ja(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ra])||void 0===t?void 0:t.stringValue)===Da}function Xa(e){if(e.geoPointValue)return{geoPointValue:(0,a.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,a.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sa(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Xa(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xa(e.arrayValue.values[n]);return t}return(0,a.A)({},e)}function $a(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Na}class Za{constructor(e){this.value=e}static empty(){return new Za({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=ts.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Xa(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return La(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ya(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sa(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Za(Xa(this.value))}}function el(e){const t=[];return sa(e.fields,(e,n)=>{const r=new ts([e]);if(Ya(n)){const e=el(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new fa(t)}class tl{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new tl(e,0,ps.min(),ps.min(),ps.min(),Za.empty(),0)}static newFoundDocument(e,t,n,r){return new tl(e,1,t,ps.min(),n,r,0)}static newNoDocument(e,t){return new tl(e,2,t,ps.min(),ps.min(),Za.empty(),0)}static newUnknownDocument(e,t){return new tl(e,3,t,ps.min(),ps.min(),Za.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ps.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Za.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Za.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ps.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}function rl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?ns.comparator(ns.fromName(s.referenceValue),n.key):Fa(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function il(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!La(e.position[n],t.position[n]))return!1;return!0}class ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class al{}class ll extends al{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new gl(e,t,n):"array-contains"===t?new wl(e,n):"in"===t?new xl(e,n):"not-in"===t?new Sl(e,n):"array-contains-any"===t?new _l(e,n):new ll(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yl(e,n):new vl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Fa(t,this.value)):null!==t&&Oa(this.value)===Oa(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Io(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cl extends al{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new cl(e,t)}matches(e){return ul(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ul(e){return"and"===e.op}function dl(e){return hl(e)&&ul(e)}function hl(e){for(const t of e.filters)if(t instanceof cl)return!1;return!0}function fl(e){if(e instanceof ll)return e.field.canonicalString()+e.op.toString()+za(e.value);if(dl(e))return e.filters.map(e=>fl(e)).join(",");{const t=e.filters.map(e=>fl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function pl(e,t){return e instanceof ll?function(e,t){return t instanceof ll&&e.op===t.op&&e.field.isEqual(t.field)&&La(e.value,t.value)}(e,t):e instanceof cl?function(e,t){return t instanceof cl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&pl(n,t.filters[r]),!0)}(e,t):void Io(19439)}function ml(e){return e instanceof ll?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(za(e.value))}(e):e instanceof cl?function(e){return e.op.toString()+" {"+e.getFilters().map(ml).join(" ,")+"}"}(e):"Filter"}class gl extends ll{constructor(e,t,n){super(e,t,n),this.key=ns.fromName(n.referenceValue)}matches(e){const t=ns.comparator(e.key,this.key);return this.matchesComparison(t)}}class yl extends ll{constructor(e,t){super(e,"in",t),this.keys=bl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vl extends ll{constructor(e,t){super(e,"not-in",t),this.keys=bl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ns.fromName(e.referenceValue))}class wl extends ll{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ka(t)&&Ma(t.arrayValue,this.value)}}class xl extends ll{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ma(this.value.arrayValue,t)}}class Sl extends ll{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ma(this.value.arrayValue,t)}}class _l extends ll{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ma(this.value.arrayValue,e))}}class El{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Te=null}}function kl(e){return new El(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Tl(e){const t=No(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>fl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),As(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>za(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>za(e)).join(",")),t.Te=e}return t.Te}function Cl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!il(e.startAt,t.startAt)&&il(e.endAt,t.endAt)}function Il(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Al{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rl(e,t,n,r,i,o,s,a){return new Al(e,t,n,r,i,o,s,a)}function Nl(e){return new Al(e)}function Pl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dl(e){return null!==e.collectionGroup}function jl(e){const t=No(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new da(ts.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ol(r,n))}),e.has(ts.keyField().canonicalString())||t.Ie.push(new ol(ts.keyField(),n))}return t.Ie}function Ol(e){const t=No(e);return t.Ee||(t.Ee=Ll(t,jl(e))),t.Ee}function Ll(e,t){if("F"===e.limitType)return kl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ol(e.field,t)});const n=e.endAt?new nl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new nl(e.startAt.position,e.startAt.inclusive):null;return kl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ml(e,t){const n=e.filters.concat([t]);return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fl(e,t,n){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ul(e,t){return Cl(Ol(e),Ol(t))&&e.limitType===t.limitType}function Vl(e){return"".concat(Tl(Ol(e)),"|lt:").concat(e.limitType)}function zl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ml(e)).join(", "),"]")),As(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>za(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>za(e)).join(",")),"Target(".concat(t,")")}(Ol(e)),"; limitType=").concat(e.limitType,")")}function Bl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ns.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of jl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=rl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jl(e),t))&&!(e.endAt&&!function(e,t,n){const r=rl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jl(e),t))}(e,t)}function Wl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hl(e){return(t,n)=>{let r=!1;for(const i of jl(e)){const e=ql(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ql(e,t,n){const r=e.field.isKeyField()?ns.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fa(r,i):Io(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Io(19790,{direction:e.dir})}}class Kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return aa(this.inner)}size(){return this.innerSize}}const Gl=new la(ns.comparator);function Ql(){return Gl}const Yl=new la(ns.comparator);function Jl(){let e=Yl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xl(e){let t=Yl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $l(){return ec()}function Zl(){return ec()}function ec(){return new Kl(e=>e.toString(),(e,t)=>e.isEqual(t))}const tc=new la(ns.comparator),nc=new da(ns.comparator);function rc(){let e=nc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ic=new da(qo);function oc(){return ic}function sc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rs(t)?"-0":t}}function ac(e){return{integerValue:""+e}}function lc(e,t){return Ns(t)?ac(t):sc(e,t)}class cc{constructor(){this._=void 0}}function uc(e,t,n){return e instanceof fc?function(e,t){const n={fields:{[xa]:{stringValue:wa},[_a]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ea(t)&&(t=ka(t)),t&&(n.fields[Sa]=t),{mapValue:n}}(n,t):e instanceof pc?mc(e,t):e instanceof gc?yc(e,t):function(e,t){const n=hc(e,t),r=bc(n)+bc(e.Ae);return qa(n)&&qa(e.Ae)?ac(r):sc(e.serializer,r)}(e,t)}function dc(e,t,n){return e instanceof pc?mc(e,t):e instanceof gc?yc(e,t):n}function hc(e,t){return e instanceof vc?function(e){return qa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class fc extends cc{}class pc extends cc{constructor(e){super(),this.elements=e}}function mc(e,t){const n=wc(t);for(const r of e.elements)n.some(e=>La(e,r))||n.push(r);return{arrayValue:{values:n}}}class gc extends cc{constructor(e){super(),this.elements=e}}function yc(e,t){let n=wc(t);for(const r of e.elements)n=n.filter(e=>!La(e,r));return{arrayValue:{values:n}}}class vc extends cc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bc(e){return va(e.integerValue||e.doubleValue)}function wc(e){return Ka(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class Sc{constructor(e,t){this.version=e,this.transformResults=t}}class _c{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _c}static exists(e){return new _c(void 0,e)}static updateTime(e){return new _c(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class kc{}function Tc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lc(e.key,_c.none()):new Nc(e.key,e.data,_c.none());{const n=e.data,r=Za.empty();let i=new da(ts.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Pc(e.key,r,new fa(i.toArray()),_c.none())}}function Cc(e,t,n){e instanceof Nc?function(e,t,n){const r=e.value.clone(),i=jc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pc?function(e,t,n){if(!Ec(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Dc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ic(e,t,n,r){return e instanceof Nc?function(e,t,n,r){if(!Ec(e.precondition,t))return n;const i=e.value.clone(),o=Oc(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Pc?function(e,t,n,r){if(!Ec(e.precondition,t))return n;const i=Oc(e.fieldTransforms,r,t),o=t.data;return o.setAll(Dc(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ec(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ac(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=hc(r.transform,e||null);null!=i&&(null===n&&(n=Za.empty()),n.set(r.field,i))}return n||null}function Rc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pc&&t instanceof pc||e instanceof gc&&t instanceof gc?Jo(e.elements,t.elements,La):e instanceof vc&&t instanceof vc?La(e.Ae,t.Ae):e instanceof fc&&t instanceof fc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nc extends kc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pc extends kc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function jc(e,t,n){const r=new Map;Ro(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,dc(s,a,n[i]))}return r}function Oc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,uc(e,o,t))}return r}class Lc extends kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mc extends kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ic(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ic(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zl();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Tc(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ps.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rc())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(e,t)=>Rc(e,t))&&Jo(this.baseMutations,e.baseMutations,(e,t)=>Rc(e,t))}}class Uc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ro(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=tc;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Uc(e,t,n,r)}}class Vc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class zc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bc,Wc;function Hc(e){switch(e){case Po.OK:return Io(64938);case Po.CANCELLED:case Po.UNKNOWN:case Po.DEADLINE_EXCEEDED:case Po.RESOURCE_EXHAUSTED:case Po.INTERNAL:case Po.UNAVAILABLE:case Po.UNAUTHENTICATED:return!1;case Po.INVALID_ARGUMENT:case Po.NOT_FOUND:case Po.ALREADY_EXISTS:case Po.PERMISSION_DENIED:case Po.FAILED_PRECONDITION:case Po.ABORTED:case Po.OUT_OF_RANGE:case Po.UNIMPLEMENTED:case Po.DATA_LOSS:return!0;default:return Io(15467,{code:e})}}function qc(e){if(void 0===e)return ko("GRPC error has no .code"),Po.UNKNOWN;switch(e){case Bc.OK:return Po.OK;case Bc.CANCELLED:return Po.CANCELLED;case Bc.UNKNOWN:return Po.UNKNOWN;case Bc.DEADLINE_EXCEEDED:return Po.DEADLINE_EXCEEDED;case Bc.RESOURCE_EXHAUSTED:return Po.RESOURCE_EXHAUSTED;case Bc.INTERNAL:return Po.INTERNAL;case Bc.UNAVAILABLE:return Po.UNAVAILABLE;case Bc.UNAUTHENTICATED:return Po.UNAUTHENTICATED;case Bc.INVALID_ARGUMENT:return Po.INVALID_ARGUMENT;case Bc.NOT_FOUND:return Po.NOT_FOUND;case Bc.ALREADY_EXISTS:return Po.ALREADY_EXISTS;case Bc.PERMISSION_DENIED:return Po.PERMISSION_DENIED;case Bc.FAILED_PRECONDITION:return Po.FAILED_PRECONDITION;case Bc.ABORTED:return Po.ABORTED;case Bc.OUT_OF_RANGE:return Po.OUT_OF_RANGE;case Bc.UNIMPLEMENTED:return Po.UNIMPLEMENTED;case Bc.DATA_LOSS:return Po.DATA_LOSS;default:return Io(39323,{code:e})}}(Wc=Bc||(Bc={}))[Wc.OK=0]="OK",Wc[Wc.CANCELLED=1]="CANCELLED",Wc[Wc.UNKNOWN=2]="UNKNOWN",Wc[Wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wc[Wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wc[Wc.NOT_FOUND=5]="NOT_FOUND",Wc[Wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wc[Wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wc[Wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wc[Wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wc[Wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wc[Wc.ABORTED=10]="ABORTED",Wc[Wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wc[Wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wc[Wc.INTERNAL=13]="INTERNAL",Wc[Wc.UNAVAILABLE=14]="UNAVAILABLE",Wc[Wc.DATA_LOSS=15]="DATA_LOSS";let Kc=null;function Gc(){return new TextEncoder}const Qc=new ro([4294967295,4294967295],0);function Yc(e){const t=Gc().encode(e),n=new io;return n.update(t),new Uint8Array(n.digest())}function Jc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ro([n,r],0),new ro([i,o],0)]}class Xc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $c("Invalid padding: ".concat(t));if(n<0)throw new $c("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new $c("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new $c("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ro.fromNumber(n)));return 1===r.compare(Qc)&&(r=new ro([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Yc(e),[n,r]=Jc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xc(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=Yc(e),[n,r]=Jc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Zc(ps.min(),r,new la(qo),Ql(),rc())}}class eu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new eu(n,t,rc(),rc(),rc())}}class tu{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class nu{constructor(e,t){this.targetId=e,this.Ce=t}}class ru{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ma.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class iu{constructor(){this.ve=0,this.Fe=au(),this.Me=ma.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rc(),t=rc(),n=rc();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Io(38017,{changeType:i})}}),new eu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=au()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ro(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ou{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ql(),this.Je=su(),this.He=su(),this.Ye=new la(qo)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Io(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Il(o))if(0===n){const e=new ns(o.path);this.et(t,e,tl.newNoDocument(e,ps.min()))}else Ro(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Kc)||void 0===i||i.lt(function(e,t,n,r,i){var o,s,a,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(s=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=ba(n).toUint8Array()}catch(e){if(e instanceof pa)return To("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Xc(o,r,i)}catch(e){return To(e instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Il(i.target)){const t=new ns(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,tl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=rc();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Zc(e,t,this.Ye,this.je,n);return this.je=Ql(),this.Je=su(),this.He=su(),this.Ye=new la(qo),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new iu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new da(qo),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new da(qo),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Eo("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iu),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function su(){return new la(ns.comparator)}function au(){return new la(ns.comparator)}const lu={asc:"ASCENDING",desc:"DESCENDING"},cu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uu={and:"AND",or:"OR"};class du{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hu(e,t){return e.useProto3Json||As(t)?t:{value:t}}function fu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function pu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mu(e,t){return fu(e,t.toTimestamp())}function gu(e){return Ro(!!e,49232),ps.fromTimestamp(function(e){const t=ya(e);return new fs(t.seconds,t.nanos)}(e))}function yu(e,t){return vu(e,t).canonicalString()}function vu(e,t){const n=function(e){return new Zo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bu(e){const t=Zo.fromString(e);return Ro(Uu(t),10190,{key:t.toString()}),t}function wu(e,t){return yu(e.databaseId,t.path)}function xu(e,t){const n=bu(t);if(n.get(1)!==e.databaseId.projectId)throw new Do(Po.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Do(Po.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ns(ku(n))}function Su(e,t){return yu(e.databaseId,t)}function _u(e){const t=bu(e);return 4===t.length?Zo.emptyPath():ku(t)}function Eu(e){return new Zo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ku(e){return Ro(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Tu(e,t,n){return{name:wu(e,t),fields:n.value.mapValue.fields}}function Cu(e,t){let n;if(t instanceof Nc)n={update:Tu(e,t.key,t.value)};else if(t instanceof Lc)n={delete:wu(e,t.key)};else if(t instanceof Pc)n={update:Tu(e,t.key,t.data),updateMask:Fu(t.fieldMask)};else{if(!(t instanceof Mc))return Io(16599,{Vt:t.type});n={verify:wu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof fc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Io(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Io(27497)}(e,t.precondition)),n}function Iu(e,t){return{documents:[Su(e,t.path)]}}function Au(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Su(e,i);const o=function(e){if(0!==e.length)return Mu(cl.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ou(e.field),direction:Pu(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=hu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ru(e){let t=_u(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ro(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Nu(e);return t instanceof cl&&dl(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new ol(Lu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,As(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new nl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new nl(n,t)}(n.endAt)),Rl(t,i,s,o,a,"F",l,c)}function Nu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lu(e.unaryFilter.field);return ll.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Lu(e.unaryFilter.field);return ll.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lu(e.unaryFilter.field);return ll.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Lu(e.unaryFilter.field);return ll.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Io(61313);default:return Io(60726)}}(e):void 0!==e.fieldFilter?function(e){return ll.create(Lu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Io(58110);default:return Io(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cl.create(e.compositeFilter.filters.map(e=>Nu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Io(1026)}}(e.compositeFilter.op))}(e):Io(30097,{filter:e})}function Pu(e){return lu[e]}function Du(e){return cu[e]}function ju(e){return uu[e]}function Ou(e){return{fieldPath:e.canonicalString()}}function Lu(e){return ts.fromServerFormat(e.fieldPath)}function Mu(e){return e instanceof ll?function(e){if("=="===e.op){if(Qa(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NAN"}};if(Ga(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qa(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NOT_NAN"}};if(Ga(e.value))return{unaryFilter:{field:Ou(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(e.field),op:Du(e.op),value:e.value}}}(e):e instanceof cl?function(e){const t=e.getFilters().map(e=>Mu(e));return 1===t.length?t[0]:{compositeFilter:{op:ju(e.op),filters:t}}}(e):Io(54877,{filter:e})}function Fu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Uu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Vu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ps.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ps.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ma.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zu{constructor(e){this.yt=e}}function Bu(e){const t=Ru({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fl(t,t.limit,"L"):t}class Wu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(va(e.integerValue));else if("doubleValue"in e){const n=va(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Rs(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ya(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ba(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?$a(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ja(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Io(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=ja,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(va(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ns.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Wu.Kt=new Wu;class Hu{constructor(){this.Cn=new qu}addToCollectionParentIndex(e,t){return this.Cn.add(t),Es.resolve()}getCollectionParents(e,t){return Es.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Es.resolve()}deleteFieldIndex(e,t){return Es.resolve()}deleteAllFieldIndexes(e){return Es.resolve()}createTargetIndexes(e,t){return Es.resolve()}getDocumentsMatchingTarget(e,t){return Es.resolve(null)}getIndexType(e,t){return Es.resolve(0)}getFieldIndexes(e,t){return Es.resolve([])}getNextCollectionGroupToUpdate(e){return Es.resolve(null)}getMinOffset(e,t){return Es.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return Es.resolve(bs.min())}updateCollectionGroup(e,t,n){return Es.resolve()}updateIndexEntries(e,t){return Es.resolve()}}class qu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new da(Zo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new da(Zo.comparator)).toArray()}}new Uint8Array(0);const Ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gu=41943040;class Qu{static withCacheSize(e){return new Qu(e,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Qu.DEFAULT_COLLECTION_PERCENTILE=10,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qu.DEFAULT=new Qu(Gu,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qu.DISABLED=new Qu(-1,0,0);class Yu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yu(0)}static cr(){return new Yu(-1)}}const Ju="LruGarbageCollector",Xu=1048576;function $u(e,t){let[n,r]=e,[i,o]=t;const s=qo(n,i);return 0===s?qo(r,o):s}class Zu{constructor(e){this.Ir=e,this.buffer=new da($u),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();$u(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ed{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Eo(Ju,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ts(e)?Eo(Ju,"Ignoring IndexedDB error during garbage collection: ",e):await _s(e)}await this.Vr(3e5)})}}class td{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Es.resolve(Cs.ce);const n=new Zu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Eo("LruGarbageCollector","Garbage collection skipped; disabled"),Es.resolve(Ku)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Eo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ku):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Eo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),_o()<=Ct.$b.DEBUG&&Eo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Es.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function nd(e,t){return new td(e,t)}class rd{constructor(){this.changes=new Kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Es.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class id{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class od{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ic(n.mutation,e,fa.empty(),fs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,rc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rc();const r=$l();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Jl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$l();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,rc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ql();const o=ec(),s=ec();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Pc)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Ic(s.mutation,t,s.mutation.getFieldMask(),fs.now())):o.set(t.key,fa.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new id(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=ec();let r=new la((e,t)=>e-t),i=rc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||fa.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||rc()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Zl();l.forEach(e=>{if(!i.has(e)){const r=Tc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Es.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Es.resolve($l());let s=ms,a=i;return o.next(t=>Es.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Es.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,rc())).next(e=>({batchId:s,changes:Xl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ns(t)).next(e=>{let t=Jl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Jl();return this.indexManager.getCollectionParents(e,i).next(s=>Es.forEach(s,s=>{const a=function(e,t){return new Al(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tl.newInvalidDocument(r)))});let n=Jl();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Ic(o.mutation,r,fa.empty(),fs.now()),Bl(t,r)&&(n=n.insert(e,r))}),n})}}class sd{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Es.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:gu(e.createTime)}}(t)),Es.resolve()}getNamedQuery(e,t){return Es.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Bu(e.bundledQuery),readTime:gu(e.readTime)}}(t)),Es.resolve()}}class ad{constructor(){this.overlays=new la(ns.comparator),this.qr=new Map}getOverlay(e,t){return Es.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$l();return Es.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Es.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Es.resolve()}getOverlaysForCollection(e,t,n){const r=$l(),i=t.length+1,o=new ns(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Es.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new la((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$l(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=$l(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return Es.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vc(t,n));let i=this.qr.get(t);void 0===i&&(i=rc(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ld{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return Es.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Es.resolve()}}class cd{constructor(){this.Qr=new da(ud.$r),this.Ur=new da(ud.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ud(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new ud(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ns(new Zo([])),n=new ud(t,e),r=new ud(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ns(new Zo([])),n=new ud(t,e),r=new ud(t,e+1);let i=rc();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ud(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ud{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ns.comparator(e.key,t.key)||qo(e.Yr,t.Yr)}static Kr(e,t){return qo(e.Yr,t.Yr)||ns.comparator(e.key,t.key)}}class dd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new da(ud.$r)}checkEmpty(e){return Es.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Fc(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Zr=this.Zr.add(new ud(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Es.resolve(o)}lookupMutationBatch(e,t){return Es.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Es.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Es.resolve(0===this.mutationQueue.length?Is:this.tr-1)}getAllMutationBatches(e){return Es.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ud(t,0),r=new ud(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Es.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new da(qo);return t.forEach(e=>{const t=new ud(e,0),r=new ud(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Es.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ns.isDocumentKey(i)||(i=i.child(""));const o=new ud(new ns(i),0);let s=new da(qo);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},o),Es.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ro(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Es.forEach(t.mutations,r=>{const i=new ud(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ud(t,0),r=this.Zr.firstAfterOrEqual(n);return Es.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Es.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hd{constructor(e){this.ri=e,this.docs=new la(ns.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Es.resolve(n?n.document.mutableCopy():tl.newInvalidDocument(t))}getEntries(e,t){let n=Ql();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tl.newInvalidDocument(e))}),Es.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ql();const o=t.path,s=new ns(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ws(vs(s),n)<=0||(r.has(s.key)||Bl(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Es.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Io(9500)}ii(e,t){return Es.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new fd(this)}getSize(e){return Es.resolve(this.size)}}class fd extends rd{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Es.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class pd{constructor(e){this.persistence=e,this.si=new Kl(e=>Tl(e),Cl),this.lastRemoteSnapshotVersion=ps.min(),this.highestTargetId=0,this.oi=0,this._i=new cd,this.targetCount=0,this.ai=Yu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Es.resolve()}getLastRemoteSnapshotVersion(e){return Es.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Es.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Es.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Es.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Es.resolve()}updateTargetData(e,t){return this.Pr(t),Es.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Es.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Es.waitFor(i).next(()=>r)}getTargetCount(e){return Es.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Es.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Es.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Es.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Es.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Es.resolve(n)}containsKey(e,t){return Es.resolve(this._i.containsKey(t))}}class md{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cs(0),this.li=!1,this.li=!0,this.hi=new ld,this.referenceDelegate=e(this),this.Pi=new pd(this),this.indexManager=new Hu,this.remoteDocumentCache=function(e){return new hd(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new zu(t),this.Ii=new sd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ad,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new dd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Eo("MemoryPersistence","Starting transaction:",e);const r=new gd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Es.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class gd extends Ss{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Ri=new cd,this.Vi=null}static mi(e){return new yd(e)}get fi(){if(this.Vi)return this.Vi;throw Io(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Es.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Es.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Es.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Es.forEach(this.fi,n=>{const r=ns.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ps.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Es.or([()=>Es.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vd{constructor(e,t){this.persistence=e,this.pi=new Kl(e=>Ds(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=nd(this,t)}static mi(e,t){return new vd(e,t)}Ei(){}di(e){return Es.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Es.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Es.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ps.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Es.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Es.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Es.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Es.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wa(e.data.value)),t}br(e,t,n){return Es.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Es.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=rc(),r=rc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bd(e,t.fromCache,n,r)}}class wd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,Tt.nr)()?8:ks((0,Tt.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new wd;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(_o()<=Ct.$b.DEBUG&&Eo("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Es.resolve()):(_o()<=Ct.$b.DEBUG&&Eo("QueryEngine","Query:",zl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(_o()<=Ct.$b.DEBUG&&Eo("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ol(t))):Es.resolve())}ys(e,t){if(Pl(t))return Es.resolve(null);let n=Ol(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Fl(t,null,"F"),n=Ol(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=rc(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,Fl(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Pl(t)||r.isEqual(ps.min())?Es.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Es.resolve(null):(_o()<=Ct.$b.DEBUG&&Eo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zl(t)),this.vs(e,o,t,ys(r,ms)).next(e=>e))})}Ds(e,t){let n=new da(Hl(e));return t.forEach((t,r)=>{Bl(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return _o()<=Ct.$b.DEBUG&&Eo("QueryEngine","Using full collection scan to execute query:",zl(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Sd="LocalStore";class _d{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new la(qo),this.xs=new Kl(e=>Tl(e),Cl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new od(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Ed(e,t,n,r){return new _d(e,t,n,r)}async function kd(e,t){const n=No(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=rc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function Td(e){const t=No(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Cd(e,t,n){let r=rc(),i=rc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ql();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ps.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Eo(Sd,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Id(e,t){const n=No(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Is),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ad(e,t){const n=No(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Es.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Vu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Rd(e,t,n){const r=No(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ts(e))throw e;Eo(Sd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Nd(e,t,n){const r=No(e);let i=ps.min(),o=rc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=No(e),i=r.xs.get(n);return void 0!==i?Es.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Ol(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ps.min(),n?o:rc())).next(e=>(Pd(r,Wl(t),e),{documents:e,Qs:o})))}function Pd(e,t,n){let r=e.Os.get(t)||ps.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Dd{constructor(){this.activeTargetIds=oc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jd{constructor(){this.Mo=new Dd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Od{Oo(e){}shutdown(){}}const Ld="ConnectivityMonitor";class Md{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Eo(Ld,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Eo(Ld,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Ud(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Vd="RestConnection",zd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Ia?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Ud(),s=this.zo(e,t.toUriEncodedString());Eo(Vd,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(s),c=(0,Tt.zJ)(l);return this.Jo(e,s,a,n,c).then(t=>(Eo(Vd,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw To(Vd,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=zd[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Wd{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Hd="WebChannelConnection";class qd extends Bd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Ud();return new Promise((i,s)=>{const a=new ao;a.setWithCredentials(!0),a.listenOnce(co.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case uo.NO_ERROR:const n=a.getResponseJson();Eo(Hd,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case uo.TIMEOUT:Eo(Hd,"RPC '".concat(e,"' ").concat(o," timed out")),s(new Do(Po.DEADLINE_EXCEEDED,"Request time out"));break;case uo.HTTP_ERROR:const r=a.getStatus();if(Eo(Hd,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Po).indexOf(t)>=0?t:Po.UNKNOWN}(n.status);s(new Do(e,n.message))}else s(new Do(Po.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Do(Po.UNAVAILABLE,"Connection failed."));break;default:Io(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Eo(Hd,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);Eo(Hd,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ud(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mo(),s=po(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Eo(Hd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const f=new Wd({Yo:t=>{h?Eo(Hd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Eo(Hd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,lo.EventType.OPEN,()=>{h||(Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,lo.EventType.CLOSE,()=>{h||(h=!0,Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,lo.EventType.ERROR,t=>{h||(h=!0,To(Hd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Do(Po.UNAVAILABLE,"The operation could not be completed")))}),p(u,lo.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Ro(!!i,16349);const o=i,s=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Bc[e];if(void 0!==t)return qc(t)}(t),i=s.message;void 0===n&&(n=Po.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.a_(new Do(n,i)),u.close()}else Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(s,fo.STAT_EVENT,t=>{t.stat===ho.PROXY?Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ho.NOPROXY&&Eo(Hd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Kd(){return"undefined"!=typeof document?document:null}function Gd(e){return new du(e,!0)}class Qd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Eo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Yd="PersistentStream";class Jd{constructor(e,t,n,r,i,o,s,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Po.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Po.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Do(Po.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Eo(Yd,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Eo(Yd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xd extends Jd{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Io(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ro(void 0===t||"string"==typeof t,58123),ma.fromBase64String(t||"")):(Ro(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ma.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Po.UNKNOWN:qc(e.code);return new Do(t,e.message||"")}(s);n=new ru(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xu(e,r.document.name),o=gu(r.document.updateTime),s=r.document.createTime?gu(r.document.createTime):ps.min(),a=new Za({mapValue:{fields:r.document.fields}}),l=tl.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new tu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xu(e,r.document),o=r.readTime?gu(r.readTime):ps.min(),s=tl.newNoDocument(i,o),a=r.removedTargetIds||[];n=new tu([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xu(e,r.document),o=r.removedTargetIds||[];n=new tu([],o,i,null)}else{if(!("filter"in t))return Io(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new zc(r,i),s=e.targetId;n=new nu(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ps.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ps.min():t.readTime?gu(t.readTime):ps.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Eu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Il(r)?{documents:Iu(e,r)}:{query:Au(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=pu(e,t.resumeToken);const r=hu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ps.min())>0){n.readTime=fu(e,t.snapshotVersion.toTimestamp());const r=hu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Io(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Eu(this.serializer),t.removeTarget=e,this.q_(t)}}class $d extends Jd{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ro(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ro(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ro(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ro(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?gu(e.updateTime):gu(t);return n.isEqual(ps.min())&&(n=gu(t)),new Sc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=gu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Eu(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Cu(this.serializer,e))};this.q_(t)}}class Zd{}class eh extends Zd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Do(Po.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.Go(e,vu(t,n),r,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Po.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Do(Po.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.Ho(e,vu(t,n),r,s,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Po.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Do(Po.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class th{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ko(t),this.aa=!1):Eo("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const nh="RemoteStore";class rh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{hh(this)&&(Eo(nh,"Restarting streams for network reachability change."),await async function(e){const t=No(e);t.Ea.add(4),await oh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ih(t)}(this))})}),this.Ra=new th(n,r)}}async function ih(e){if(hh(e))for(const t of e.da)await t(!0)}async function oh(e){for(const t of e.da)await t(!1)}function sh(e,t){const n=No(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dh(n)?uh(n):Nh(n).O_()&&lh(n,t))}function ah(e,t){const n=No(e),r=Nh(n);n.Ia.delete(t),r.O_()&&ch(n,t),0===n.Ia.size&&(r.O_()?r.L_():hh(n)&&n.Ra.set("Unknown"))}function lh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ps.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nh(e).Y_(t)}function ch(e,t){e.Va.Ue(t),Nh(e).Z_(t)}function uh(e){e.Va=new ou({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Nh(e).start(),e.Ra.ua()}function dh(e){return hh(e)&&!Nh(e).x_()&&e.Ia.size>0}function hh(e){return 0===No(e).Ea.size}function fh(e){e.Va=void 0}async function ph(e){e.Ra.set("Online")}async function mh(e){e.Ia.forEach((t,n)=>{lh(e,t)})}async function gh(e,t){fh(e),dh(e)?(e.Ra.ha(t),uh(e)):e.Ra.set("Unknown")}async function yh(e,t,n){if(e.Ra.set("Online"),t instanceof ru&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Eo(nh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await vh(e,n)}else if(t instanceof tu?e.Va.Ze(t):t instanceof nu?e.Va.st(t):e.Va.tt(t),!n.isEqual(ps.min()))try{const t=await Td(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ma.EMPTY_BYTE_STRING,r.snapshotVersion)),ch(e,t);const i=new Vu(r.target,t,n,r.sequenceNumber);lh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Eo(nh,"Failed to raise snapshot:",t),await vh(e,t)}}async function vh(e,t,n){if(!Ts(t))throw t;e.Ea.add(1),await oh(e),e.Ra.set("Offline"),n||(n=()=>Td(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Eo(nh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ih(e)})}function bh(e,t){return t().catch(n=>vh(e,n,t))}async function wh(e){const t=No(e),n=Ph(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Is;for(;xh(t);)try{const e=await Id(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Sh(t,e)}catch(e){await vh(t,e)}_h(t)&&Eh(t)}function xh(e){return hh(e)&&e.Ta.length<10}function Sh(e,t){e.Ta.push(t);const n=Ph(e);n.O_()&&n.X_&&n.ea(t.mutations)}function _h(e){return hh(e)&&!Ph(e).x_()&&e.Ta.length>0}function Eh(e){Ph(e).start()}async function kh(e){Ph(e).ra()}async function Th(e){const t=Ph(e);for(const n of e.Ta)t.ea(n.mutations)}async function Ch(e,t,n){const r=e.Ta.shift(),i=Uc.from(r,t,n);await bh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wh(e)}async function Ih(e,t){t&&Ph(e).X_&&await async function(e,t){if(function(e){return Hc(e)&&e!==Po.ABORTED}(t.code)){const n=e.Ta.shift();Ph(e).B_(),await bh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await wh(e)}}(e,t),_h(e)&&Eh(e)}async function Ah(e,t){const n=No(e);n.asyncQueue.verifyOperationInProgress(),Eo(nh,"RemoteStore received new credentials");const r=hh(n);n.Ea.add(3),await oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ih(n)}async function Rh(e,t){const n=No(e);t?(n.Ea.delete(2),await ih(n)):t||(n.Ea.add(2),await oh(n),n.Ra.set("Unknown"))}function Nh(e){return e.ma||(e.ma=function(e,t,n){const r=No(e);return r.sa(),new Xd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ph.bind(null,e),t_:mh.bind(null,e),r_:gh.bind(null,e),H_:yh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),dh(e)?uh(e):e.Ra.set("Unknown")):(await e.ma.stop(),fh(e))})),e.ma}function Ph(e){return e.fa||(e.fa=function(e,t,n){const r=No(e);return r.sa(),new $d(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:kh.bind(null,e),r_:Ih.bind(null,e),ta:Th.bind(null,e),na:Ch.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await wh(e)):(await e.fa.stop(),e.Ta.length>0&&(Eo(nh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Dh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Dh(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Do(Po.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jh(e,t){if(ko("AsyncQueue","".concat(t,": ").concat(e)),Ts(e))return new Do(Po.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Oh{static emptySet(e){return new Oh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ns.comparator(t.key,n.key):(e,t)=>ns.comparator(e.key,t.key),this.keyedMap=Jl(),this.sortedSet=new la(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Oh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Lh{constructor(){this.ga=new la(ns.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Io(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Mh{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Mh(e,t,Oh.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Fh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Uh{constructor(){this.queries=Vh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=No(e),r=n.queries;n.queries=Vh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Do(Po.ABORTED,"Firestore shutting down"))}}function Vh(){return new Kl(e=>Vl(e),Ul)}async function zh(e,t){const n=No(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Fh,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=jh(e,"Initialization of query '".concat(zl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&qh(n)}async function Bh(e,t){const n=No(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wh(e,t){const n=No(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&qh(n)}function Hh(e,t,n){const r=No(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function qh(e){e.Ca.forEach(e=>{e.next()})}var Kh,Gh;(Gh=Kh||(Kh={})).Ma="default",Gh.Cache="cache";class Qh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Mh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kh.Cache}}class Yh{constructor(e){this.key=e}}class Jh{constructor(e){this.key=e}}class Xh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rc(),this.mutatedKeys=rc(),this.eu=Hl(e),this.tu=new Oh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Lh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Bl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Io(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==o.length||l?{snapshot:new Mh(this.query,e.tu,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rc(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Jh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Yh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=rc();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const $h="SyncEngine";class Zh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ef{constructor(e){this.key=e,this.hu=!1}}class tf{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Kl(e=>Vl(e),Ul),this.Iu=new Map,this.Eu=new Set,this.du=new la(ns.comparator),this.Au=new Map,this.Ru=new cd,this.Vu={},this.mu=new Map,this.fu=Yu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function nf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ef(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await of(r,t,n,!0),i}async function rf(e,t){const n=Ef(e);await of(n,t,!0,!1)}async function of(e,t,n,r){const i=await Ad(e.localStore,Ol(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await sf(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&sh(e.remoteStore,i),a}async function sf(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Nd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return vf(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const o=await Nd(e.localStore,t,!0),s=new Xh(t,o.Qs),a=s.ru(o.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);vf(e,n,c.au);const u=new Zh(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function af(e,t,n){const r=No(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Ul(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ah(r.remoteStore,i.targetId),gf(r,i.targetId)}).catch(_s)):(gf(r,i.targetId),await Rd(r.localStore,i.targetId,!0))}async function lf(e,t){const n=No(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ah(n.remoteStore,r.targetId))}async function cf(e,t){const n=No(e);try{const e=await function(e,t){const n=No(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ma.EMPTY_BYTE_STRING,ps.min()).withLastLimboFreeSnapshotVersion(ps.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Pi.updateTargetData(e,c))});let a=Ql(),l=rc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(Cd(e,o,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ps.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return Es.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ro(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ro(r.hu,14607):e.removedDocuments.size>0&&(Ro(r.hu,42227),r.hu=!1))}),await xf(n,e,t)}catch(e){await _s(e)}}function uf(e,t,n){const r=No(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=No(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&qh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function df(e,t,n){const r=No(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new la(ns.comparator);e=e.insert(o,tl.newNoDocument(o,ps.min()));const n=rc().add(o),i=new Zc(ps.min(),new Map,new la(qo),e,n);await cf(r,i),r.du=r.du.remove(o),r.Au.delete(t),wf(r)}else await Rd(r.localStore,t,!1).then(()=>gf(r,t,n)).catch(_s)}async function hf(e,t){const n=No(e),r=t.batch.batchId;try{const e=await function(e,t){const n=No(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Es.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ro(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);mf(n,r,null),pf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xf(n,e)}catch(e){await _s(e)}}async function ff(e,t,n){const r=No(e);try{const e=await function(e,t){const n=No(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ro(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);mf(r,t,n),pf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xf(r,e)}catch(n){await _s(n)}}function pf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function mf(e,t,n){const r=No(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||yf(e,t)})}function yf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ah(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),wf(e))}function vf(e,t,n){for(const r of n)r instanceof Yh?(e.Ru.addReference(r.key,t),bf(e,r)):r instanceof Jh?(Eo($h,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||yf(e,r.key)):Io(19791,{wu:r})}function bf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Eo($h,"New document in limbo: "+n),e.Eu.add(r),wf(e))}function wf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ns(Zo.fromString(t)),r=e.fu.next();e.Au.set(r,new ef(n)),e.du=e.du.insert(n,r),sh(e.remoteStore,new Vu(Ol(Nl(n.path)),r,"TargetPurposeLimboResolution",Cs.ce))}}async function xf(e,t,n){const r=No(e),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{s.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=bd.As(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(e,t){const n=No(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Es.forEach(t,t=>Es.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Es.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ts(e))throw e;Eo(Sd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Sf(e,t){const n=No(e);if(!n.currentUser.isEqual(t)){Eo($h,"User change. New user:",t.toKey());const e=await kd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Do(Po.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xf(n,e.Ls)}}function _f(e,t){const n=No(e),r=n.Au.get(t);if(r&&r.hu)return rc().add(r.key);{let e=rc();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Ef(e){const t=No(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_f.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=df.bind(null,t),t.Pu.H_=Wh.bind(null,t.eventManager),t.Pu.yu=Hh.bind(null,t.eventManager),t}function kf(e){const t=No(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ff.bind(null,t),t}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ed(this.persistence,new xd,e.initialUser,this.serializer)}Cu(e){return new md(yd.mi,this.serializer)}Du(e){return new jd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class Cf extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ro(this.persistence.referenceDelegate instanceof vd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ed(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Qu.withCacheSize(this.cacheSizeBytes):Qu.DEFAULT;return new md(e=>vd.mi(e,t),this.serializer)}}class If{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sf.bind(null,this.syncEngine),await Rh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Uh}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),n=function(e){return new qd(e)}(e.databaseInfo);return function(e,t,n,r){return new eh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new rh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>uf(this.syncEngine,e,0),Md.v()?new Md:new Od)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new tf(e,t,n,r,i,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=No(e);Eo(nh,"RemoteStore shutting down."),t.Ea.add(5),await oh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}If.provider={build:()=>new If};class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Rf="FirestoreClient";class Nf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wo.UNAUTHENTICATED,this.clientId=Ho.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Eo(Rf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Eo(Rf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=jh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Pf(e,t){e.asyncQueue.verifyOperationInProgress(),Eo(Rf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await kd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Df(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jf(e);Eo(Rf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ah(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ah(t.remoteStore,n)),e._onlineComponents=t}async function jf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Eo(Rf,"Using user provided OfflineComponentProvider");try{await Pf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Po.FAILED_PRECONDITION||e.code===Po.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Pf(e,new Tf)}}else Eo(Rf,"Using default OfflineComponentProvider"),await Pf(e,new Cf(void 0));return e._offlineComponents}async function Of(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Eo(Rf,"Using user provided OnlineComponentProvider"),await Df(e,e._uninitializedComponentsProvider._online)):(Eo(Rf,"Using default OnlineComponentProvider"),await Df(e,new If))),e._onlineComponents}function Lf(e){return Of(e).then(e=>e.syncEngine)}async function Mf(e){const t=await Of(e),n=t.eventManager;return n.onListen=nf.bind(null,t.syncEngine),n.onUnlisten=af.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=rf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lf.bind(null,t.syncEngine),n}function Ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Af({next:a=>{o.Nu(),t.enqueueAndForget(()=>Bh(e,s));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Do(Po.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Do(Po.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new Qh(Nl(n.path),o,{includeMetadataChanges:!0,qa:!0});return zh(e,s)}(await Mf(e),e.asyncQueue,t,n,r)),r.promise}function Uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Af({next:n=>{o.Nu(),t.enqueueAndForget(()=>Bh(e,s)),n.fromCache&&"server"===r.source?i.reject(new Do(Po.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Qh(n,o,{includeMetadataChanges:!0,qa:!0});return zh(e,s)}(await Mf(e),e.asyncQueue,t,n,r)),r.promise}function Vf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const zf=new Map,Bf="firestore.googleapis.com",Wf=!0;class Hf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Do(Po.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bf,this.ssl=Wf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Wf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Gu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Xu)throw new Do(Po.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Do(Po.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Do(Po.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Do(Po.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Do(Po.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lo;switch(e.type){case"firstParty":return new Vo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Do(Po.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zf.get(e);t&&(Eo("ComponentProvider","Removing Datastore"),zf.delete(e),t.terminate())}(this),Promise.resolve()}}class Kf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Kf(this.firestore,e,this._query)}}class Gf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gf(this.firestore,e,this._key)}toJSON(){return{type:Gf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(us(t,Gf._jsonSchema))return new Gf(e,n||null,new ns(Zo.fromString(t.referencePath)))}}Gf._jsonSchemaVersion="firestore/documentReference/1.0",Gf._jsonSchema={type:cs("string",Gf._jsonSchemaVersion),referencePath:cs("string")};class Qf extends Kf{constructor(e,t,n){super(e,t,Nl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gf(this.firestore,null,new ns(e))}withConverter(e){return new Qf(this.firestore,e,this._path)}}function Yf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Tt.Ku)(e),rs("collection","path",t),e instanceof qf){const n=Zo.fromString(t,...r);return os(n),new Qf(e,null,n)}{if(!(e instanceof Gf||e instanceof Qf))throw new Do(Po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zo.fromString(t,...r));return os(n),new Qf(e.firestore,null,n)}}function Jf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Tt.Ku)(e),1===arguments.length&&(t=Ho.newId()),rs("doc","path",t),e instanceof qf){const n=Zo.fromString(t,...r);return is(n),new Gf(e,null,new ns(n))}{if(!(e instanceof Gf||e instanceof Qf))throw new Do(Po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Zo.fromString(t,...r));return is(n),new Gf(e.firestore,e instanceof Qf?e.converter:null,new ns(n))}}const Xf="AsyncQueue";class $f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qd(this,"async_queue_retry"),this._c=()=>{const e=Kd();e&&Eo(Xf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Kd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new jo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(zy){if(!Ts(zy))throw zy;Eo(Xf,"Operation failed with retryable error: "+zy)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ko("INTERNAL UNHANDLED ERROR: ",Zf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Dh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Io(47125,{Pc:Zf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function ep(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class tp extends qf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $f,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $f(e),this._firestoreClient=void 0,await e}}}function np(e){if(e._terminated)throw new Do(Po.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||rp(e),e._firestoreClient}function rp(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Ca(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Vf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Nf(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ip{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ip(ma.fromBase64String(e))}catch(e){throw new Do(Po.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ip(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ip._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(us(e,ip._jsonSchema))return ip.fromBase64String(e.bytes)}}ip._jsonSchemaVersion="firestore/bytes/1.0",ip._jsonSchema={type:cs("string",ip._jsonSchemaVersion),bytes:cs("string")};class op{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Do(Po.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sp{constructor(e){this._methodName=e}}class ap{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Do(Po.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Do(Po.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qo(this._lat,e._lat)||qo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ap._jsonSchemaVersion}}static fromJSON(e){if(us(e,ap._jsonSchema))return new ap(e.latitude,e.longitude)}}ap._jsonSchemaVersion="firestore/geoPoint/1.0",ap._jsonSchema={type:cs("string",ap._jsonSchemaVersion),latitude:cs("number"),longitude:cs("number")};class lp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:lp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(us(e,lp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new lp(e.vectorValues);throw new Do(Po.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lp._jsonSchemaVersion="firestore/vectorValue/1.0",lp._jsonSchema={type:cs("string",lp._jsonSchemaVersion),vectorValues:cs("object")};const cp=/^__.*__$/;class up{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class dp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Io(40011,{Ac:e})}}class fp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fp((0,a.A)((0,a.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ap(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(hp(this.Ac)&&cp.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gd(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fp({Ac:e,methodName:t,Dc:n,path:ts.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(e){const t=e._freezeSettings(),n=Gd(e._databaseId);return new pp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gp(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);kp("Data must be an object, but it was:",s,r);const a=_p(r,s);let l,c;if(o.merge)l=new fa(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Tp(t,r,n);if(!s.contains(i))throw new Do(Po.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Rp(e,i)||e.push(i)}l=new fa(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new up(new Za(a),l,c)}class yp extends sp{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}class vp extends sp{_toFieldTransform(e){return new xc(e.path,new fc)}isEqual(e){return e instanceof vp}}function bp(e,t,n,r){const i=e.Cc(1,t,n);kp("Data must be an object, but it was:",i,r);const o=[],s=Za.empty();sa(r,(e,r)=>{const a=Ip(t,e,n);r=(0,Tt.Ku)(r);const l=i.yc(a);if(r instanceof yp)o.push(a);else{const e=Sp(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new fa(o);return new dp(s,a,i.fieldTransforms)}function wp(e,t,n,r,i,o){const s=e.Cc(1,t,n),a=[Tp(t,r,n)],l=[i];if(o.length%2!=0)throw new Do(Po.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(Tp(t,o[h])),l.push(o[h+1]);const c=[],u=Za.empty();for(let h=a.length-1;h>=0;--h)if(!Rp(c,a[h])){const e=a[h];let t=l[h];t=(0,Tt.Ku)(t);const n=s.yc(e);if(t instanceof yp)c.push(e);else{const r=Sp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new fa(c);return new dp(u,d,s.fieldTransforms)}function xp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sp(n,e.Cc(r?4:3,t))}function Sp(e,t){if(Ep(e=(0,Tt.Ku)(e)))return kp("Unsupported field value:",t,e),_p(e,t);if(e instanceof sp)return function(e,t){if(!hp(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sp(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Tt.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return lc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=fs.fromDate(e);return{timestampValue:fu(t.serializer,n)}}if(e instanceof fs){const n=new fs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fu(t.serializer,n)}}if(e instanceof ap)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ip)return{bytesValue:pu(t.serializer,e._byteString)};if(e instanceof Gf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:yu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof lp)return function(e,t){return{mapValue:{fields:{[Ra]:{stringValue:Da},[ja]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return sc(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(as(e)))}(e,t)}function _p(e,t){const n={};return aa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sa(e,(e,r)=>{const i=Sp(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ep(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof fs||e instanceof ap||e instanceof ip||e instanceof Gf||e instanceof sp||e instanceof lp)}function kp(e,t,n){if(!Ep(n)||!ss(n)){const r=as(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Tp(e,t,n){if((t=(0,Tt.Ku)(t))instanceof op)return t._internalPath;if("string"==typeof t)return Ip(e,t);throw Ap("Field path arguments must be of type string or ",e,!1,void 0,n)}const Cp=new RegExp("[~\\*/\\[\\]]");function Ip(e,t,n){if(t.search(Cp)>=0)throw Ap("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new op(...t.split("."))._internalPath}catch(r){throw Ap("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ap(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Do(Po.INVALID_ARGUMENT,a+e+l)}function Rp(e,t){return e.some(e=>e.isEqual(t))}class Np{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pp extends Np{data(){return super.data()}}function Dp(e,t){return"string"==typeof t?Ip(e,t):t instanceof op?t._internalPath:t._delegate._internalPath}function jp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Do(Po.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Op{}class Lp extends Op{}function Mp(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Op&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Vp).length,n=e.filter(e=>e instanceof Fp).length;if(t>1||t>0&&n>0)throw new Do(Po.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Fp extends Lp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fp(e,t,n)}_apply(e){const t=this._parse(e);return qp(e._query,t),new Kf(e.firestore,e.converter,Ml(e._query,t))}_parse(e){const t=mp(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Do(Po.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Hp(s,o);const t=[];for(const n of s)t.push(Wp(r,e,n));a={arrayValue:{values:t}}}else a=Wp(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Hp(s,o),a=xp(n,t,s,"in"===o||"not-in"===o);return ll.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Up(e,t,n){const r=t,i=Dp("where",e);return Fp._create(i,r,n)}class Vp extends Op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:cl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)qp(n,i),n=Ml(n,i)}(e._query,t),new Kf(e.firestore,e.converter,Ml(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zp extends Lp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(t,n)}(e._query,this._field,this._direction);return new Kf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Al(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Bp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Dp("orderBy",e);return zp._create(n,t)}function Wp(e,t,n){if("string"==typeof(n=(0,Tt.Ku)(n))){if(""===n)throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dl(t)&&-1!==n.indexOf("/"))throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Zo.fromString(n));if(!ns.isDocumentKey(r))throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ha(e,new ns(r))}if(n instanceof Gf)return Ha(e,n._key);throw new Do(Po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(as(n),"."))}function Hp(e,t){if(!Array.isArray(e)||0===e.length)throw new Do(Po.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function qp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Do(Po.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Do(Po.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Kp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return va(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Io(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sa(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[ja].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>va(e.doubleValue));return new lp(n)}convertGeoPoint(e){return new ap(va(e.latitude),va(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ka(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const t=ya(e);return new fs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zo.fromString(e);Ro(Uu(n),9688,{name:e});const r=new Aa(n.get(1),n.get(3)),i=new ns(n.popFirst(5));return r.isEqual(t)||ko("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Gp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yp extends Np{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Do(Po.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yp._jsonSchema={type:cs("string",Yp._jsonSchemaVersion),bundleSource:cs("string","DocumentSnapshot"),bundleName:cs("string"),bundle:cs("string")};class Jp extends Yp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jp(this._firestore,this._userDataWriter,n.key,n,new Qp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Do(Po.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:$p(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Do(Po.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ho.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $p(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Io(61501,{type:e})}}function Zp(e){e=ls(e,Gf);const t=ls(e.firestore,tp);return Ff(np(t),e._key).then(n=>sm(t,e,n))}Xp._jsonSchemaVersion="firestore/querySnapshot/1.0",Xp._jsonSchema={type:cs("string",Xp._jsonSchemaVersion),bundleSource:cs("string","QuerySnapshot"),bundleName:cs("string"),bundle:cs("string")};class em extends Kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ip(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gf(this.firestore,null,t)}}function tm(e){e=ls(e,Kf);const t=ls(e.firestore,tp),n=np(t),r=new em(t);return jp(e._query),Uf(n,e._query).then(n=>new Xp(t,r,e,n))}function nm(e,t,n){e=ls(e,Gf);const r=ls(e.firestore,tp),i=Gp(e.converter,t,n);return om(r,[gp(mp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,_c.none())])}function rm(e,t){const n=ls(e.firestore,tp),r=Jf(e),i=Gp(e.converter,t);return om(n,[gp(mp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,_c.exists(!1))]).then(()=>r)}function im(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,Tt.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||ep(n[o])||(i=n[o++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ep(n[o])){var a,l,c;const e=n[o];n[o]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Gf)d=ls(e.firestore,tp),h=Nl(e._key.path),u={next:t=>{n[o]&&n[o](sm(d,e,t))},error:n[o+1],complete:n[o+2]};else{const t=ls(e,Kf);d=ls(t.firestore,tp),h=t._query;const r=new em(d);u={next:e=>{n[o]&&n[o](new Xp(d,r,t,e))},error:n[o+1],complete:n[o+2]},jp(e._query)}return function(e,t,n,r){const i=new Af(r),o=new Qh(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>zh(await Mf(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Bh(await Mf(e),o))}}(np(d),h,s,u)}function om(e,t){return function(e,t){const n=new jo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=kf(e);try{const e=await function(e,t){const n=No(e),r=fs.now(),i=t.reduce((e,t)=>e.add(t.key),rc());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ql(),l=rc();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=Ac(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Pc(e.key,t,el(t.value.mapValue),_c.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Xl(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new la(qo)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await xf(r,e.changes),await wh(r.remoteStore)}catch(e){const t=jh(e,"Failed to persist write");n.reject(t)}}(await Lf(e),t,n)),n.promise}(np(e),t)}function sm(e,t,n){const r=n.docs.get(t._key),i=new em(e);return new Yp(e,i,t._key,r,new Qp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xo=e}(kt.MF),(0,kt.om)(new It.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new tp(new Fo(e.getProvider("auth-internal")),new Bo(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Do(Po.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(e.options.projectId,t)}(o,r),o);return i=(0,a.A)({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,kt.KO)(vo,bo,e),(0,kt.KO)(vo,bo,"esm2020")}();const am=(0,kt.Wp)({apiKey:"AIzaSyDhj5l-c2o2U3Yc3ZN_rnbMlf8-MNCWfEA",authDomain:"tbreakapp.firebaseapp.com",projectId:"tbreakapp",storageBucket:"tbreakapp.firebasestorage.app",messagingSenderId:"152648510768",appId:"1:152648510768:web:3f3d7df7e4f1d608be2cf5"}),lm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,kt.Sx)();const t=(0,kt.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,kt.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,Tt.bD)(r,null!==t&&void 0!==t?t:{}))return e;Mt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ji,persistence:[si,Vr,qr]}),r=(0,Tt.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eo)return;const r=null===t||void 0===t?void 0:t.token;to!==r&&(to=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,Tt.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,Tt.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=(0,Tt.Tj)("auth");return o&&rr(n,"http://".concat(o)),n}(am),cm=function(e,t){const n="object"==typeof e?e:(0,kt.Sx)(),r="string"==typeof e?e:t||Ia,i=(0,kt.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,Tt.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ls(e,qf);const i=(0,Tt.zJ)(t),o=e._getSettings(),s=(0,a.A)((0,a.A)({},o),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,Tt.gE)("https://".concat(l)),(0,Tt.P1)("Firestore",!0)),o.host!==Bf&&o.host!==l&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=(0,a.A)((0,a.A)({},o),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,Tt.bD)(c,s)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wo.MOCK_USER;else{var u;t=(0,Tt.Fy)(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Do(Po.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wo(i)}e._authCredentials=new Mo(new Oo(t,n))}}(i,...e)}return i}(am),um=(e,t)=>async function(e,t,n){if((0,kt.xZ)(e.app))return Promise.reject(Vt(e));const r=qn(e),i=tr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kr,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Or(e),t}),s=await Tr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(lm,e,t),dm=(e,t)=>function(e,t,n){return(0,kt.xZ)(e.app)?Promise.reject(Vt(e)):Dr((0,Tt.Ku)(e),vr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Or(e),t})}(lm,e,t),hm=e=>async function(e,t,n){const r=qn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&jr(r,i,n),await tr(r,i,"getOobCode",ur,"EMAIL_PASSWORD_PROVIDER")}(lm,e),fm=e=>function(e,t,n,r){return(0,Tt.Ku)(e).onAuthStateChanged(t,n,r)}(lm,t=>{e(t)});var pm=n(579);const mm=(0,r.createContext)({authUser:null,profile:null,user:null}),gm=()=>(0,r.useContext)(mm),ym=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=fm(e=>{i(e)});return()=>e()},[]),(0,r.useEffect)(()=>{if(!n)return void s(null);const e=im(Jf(cm,"users",n.uid),e=>{e.exists()?s(e.data()):s(null)});return()=>e()},[n]);const a={authUser:n,profile:o,user:n};return(0,pm.jsx)(mm.Provider,{value:a,children:t})},vm=async(e,t)=>{const n=Jf(cm,"users",e);await nm(n,t,{merge:!0})},bm=async e=>{const t=Jf(cm,"users",e),n=await Zp(t);return n.exists()?n.data():null},wm=async(e,t)=>{var n,r;const i=Jf(cm,"users",e),o=await Zp(i);if(!o.exists())return;const s=o.data(),a=null!==(n=s.rewards)&&void 0!==n&&n.medals?[...s.rewards.medals]:[];t.medal&&a.push(t.medal),await function(e,t,n){e=ls(e,Gf);const r=ls(e.firestore,tp),i=mp(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=(0,Tt.Ku)(t))||t instanceof op?wp(i,"updateDoc",e._key,t,n,a):bp(i,"updateDoc",e._key,t),om(r,[o.toMutation(e._key,_c.exists(!0))])}(i,{rewards:{coins:((null===(r=s.rewards)||void 0===r?void 0:r.coins)||0)+t.coins,medals:a}})},xm=["You have power over your mind - not outside events. Realize this, and you will find strength. - Marcus Aurelius","The impediment to action advances action. What stands in the way becomes the way. - Marcus Aurelius","He who fears death will never do anything worth of a man who is alive. - Seneca","Wealth consists not in having great possessions, but in having few wants. - Epictetus","It's not what happens to you, but how you react to it that matters. - Epictetus","First say to yourself what you would be; and then do what you have to do. - Epictetus","The happiness of your life depends upon the quality of your thoughts. - Marcus Aurelius","Waste no more time arguing about what a good man should be. Be one. - Marcus Aurelius","Every day is a new opportunity to grow stronger and more resilient.","Your brain is healing. Every hour without use is progress.","Discomfort is temporary. Regret lasts forever. Stay strong.","You're not giving up something - you're gaining clarity, energy, and control.","The urge will pass. It always does. Ride the wave.","Your future self is proud of the choice you're making today.","Healing isn't linear. Bad days don't erase your progress.","You're teaching your brain that you don't need it to feel good.","Every craving you resist makes the next one easier.","Your willpower is a muscle. Today you're making it stronger.","This break is an investment in your mental clarity and emotional stability.","You're proving to yourself that you're in control.","Progress, not perfection. Every day counts.","Your dopamine receptors are healing. Give them time.","The person you'll be after this break is worth the temporary discomfort.","Be here now. This moment is all you have.","Breathe. You've survived every difficult moment before this one.","Your anxiety about the future robs the present of its peace.","Cravings are just thoughts. Thoughts aren't commands.","Notice the urge, acknowledge it, let it pass like a cloud.","40 days of discipline creates a lifetime of freedom.","You didn't come this far to only come this far.","Small daily improvements lead to stunning long-term results.","Your commitment today determines your tomorrow.","Champions are made when no one is watching."],Sm=[{title:"4-7-8 Breathing",description:"Inhale for 4 counts, hold for 7, exhale for 8. Calms the nervous system instantly.",duration:"2 minutes",icon:"\ud83e\udec1"},{title:"Progressive Muscle Relaxation",description:"Tense each muscle group for 5 seconds, then release. Start with toes, work up to head.",duration:"10 minutes",icon:"\ud83d\udcaa"},{title:"Cold Shower",description:"30-second cold blast releases endorphins and reduces inflammation. Great for cravings.",duration:"5 minutes",icon:"\ud83d\udebf"},{title:"Nature Walk",description:"Green spaces reduce cortisol by 15%. Just 20 minutes outdoors helps.",duration:"20 minutes",icon:"\ud83c\udf33"},{title:"Box Breathing (Navy SEAL technique)",description:"Inhale 4, hold 4, exhale 4, hold 4. Repeat. Used in high-stress situations.",duration:"5 minutes",icon:"\ud83d\udce6"},{title:"Guided Meditation",description:"Use apps like Headspace, Calm, or Insight Timer. Focus on body scan meditations.",duration:"10-20 minutes",icon:"\ud83e\uddd8"},{title:"Exercise",description:"Even 15 minutes boosts dopamine naturally. Try yoga, running, or bodyweight exercises.",duration:"15-30 minutes",icon:"\ud83c\udfc3"},{title:"Journaling",description:"Write about cravings, emotions, progress. Externalizing thoughts reduces their power.",duration:"10 minutes",icon:"\ud83d\udcdd"}],_m=[{id:"food",title:"Food & Nutrition",icon:"\ud83e\udd57",color:"#4CAF50",lightColor:"#E8F5E9",resources:[{name:"Leafy Greens (Spinach, Kale)",benefits:"Detoxification, liver support",helps:["cleanse","energy"],description:"Rich in chlorophyll which helps eliminate toxins and supports liver function"},{name:"Cruciferous Vegetables (Broccoli, Cauliflower)",benefits:"Speeds up metabolism, cleanse",helps:["cleanse","metabolism"],description:"Contain compounds that activate detox enzymes and speed THC elimination"},{name:"Citrus Fruits (Lemon, Grapefruit)",benefits:"Liver detox, vitamin C boost",helps:["cleanse","immunity"],description:"High in vitamin C and enzymes that support liver detoxification pathways"},{name:"Fatty Fish (Salmon, Mackerel)",benefits:"Brain healing, mood regulation",helps:["mood","brain"],description:"Omega-3 fatty acids restore brain chemistry and reduce inflammation"},{name:"Berries (Blueberries, Strawberries)",benefits:"Antioxidants, brain protection",helps:["brain","cleanse"],description:"High antioxidant content protects brain cells and aids detoxification"},{name:"Whole Grains (Brown Rice, Quinoa)",benefits:"Stable energy, mood balance",helps:["mood","energy"],description:"Complex carbs regulate blood sugar and serotonin production"},{name:"Nuts & Seeds (Walnuts, Chia)",benefits:"Omega-3s, anxiety relief",helps:["anxiety","brain"],description:"Essential fatty acids support nervous system and reduce anxiety"},{name:"Avocados",benefits:"Brain health, stress reduction",helps:["brain","anxiety"],description:"Healthy fats and B vitamins support neurotransmitter production"},{name:"Green Tea",benefits:"Metabolism boost, cleanse",helps:["cleanse","energy"],description:"Catechins accelerate fat metabolism and THC elimination"},{name:"Garlic & Onions",benefits:"Detox support, immunity",helps:["cleanse","immunity"],description:"Sulfur compounds enhance liver detoxification and immune function"}]},{id:"herbs",title:"Herbs & Supplements",icon:"\ud83c\udf3f",color:"#8BC34A",lightColor:"#F1F8E9",resources:[{name:"Milk Thistle",benefits:"Liver protection & regeneration",helps:["cleanse","liver"],description:"Silymarin protects liver cells and enhances detoxification capacity"},{name:"Ashwagandha",benefits:"Stress relief, anxiety reduction",helps:["anxiety","sleep"],description:"Adaptogen that reduces cortisol and calms nervous system"},{name:"Valerian Root",benefits:"Sleep improvement, relaxation",helps:["sleep","anxiety"],description:"Natural sedative that improves sleep quality without grogginess"},{name:"Passionflower",benefits:"Anxiety relief, calm mind",helps:["anxiety","mood"],description:"Increases GABA levels to reduce anxiety and promote relaxation"},{name:"St. John's Wort",benefits:"Mood enhancement, depression relief",helps:["mood","depression"],description:"Natural antidepressant that boosts serotonin and dopamine"},{name:"L-Theanine",benefits:"Calm focus, anxiety reduction",helps:["anxiety","focus"],description:"Amino acid from tea that promotes relaxation without drowsiness"},{name:"5-HTP",benefits:"Mood balance, sleep support",helps:["mood","sleep"],description:"Serotonin precursor that helps regulate mood and sleep cycles"},{name:"Rhodiola Rosea",benefits:"Energy, stress resilience",helps:["energy","anxiety"],description:"Adaptogen that combats fatigue and improves stress response"},{name:"Ginkgo Biloba",benefits:"Brain fog, memory support",helps:["brain","focus"],description:"Improves blood flow to brain, enhances cognitive function"},{name:"Chamomile",benefits:"Sleep, digestive calm",helps:["sleep","anxiety"],description:"Gentle sedative and anti-anxiety herb, promotes restful sleep"}]},{id:"vitamins",title:"Vitamins & Minerals",icon:"\ud83d\udc8a",color:"#FF9800",lightColor:"#FFF3E0",resources:[{name:"Vitamin C (1000-2000mg)",benefits:"Immune boost, detox support",helps:["cleanse","immunity"],description:"Powerful antioxidant that supports liver detoxification"},{name:"B-Complex Vitamins",benefits:"Energy, mood, brain function",helps:["energy","mood","brain"],description:"Essential for neurotransmitter production and energy metabolism"},{name:"Vitamin D3 (2000-4000 IU)",benefits:"Mood regulation, immunity",helps:["mood","immunity"],description:"Deficiency linked to depression; crucial for mental health"},{name:"Magnesium (400-500mg)",benefits:"Sleep, anxiety, muscle relaxation",helps:["sleep","anxiety","relaxation"],description:"Natural relaxant that improves sleep and reduces anxiety"},{name:"Zinc (15-30mg)",benefits:"Immune function, brain health",helps:["immunity","brain"],description:"Supports neurotransmitter function and immune response"},{name:"Omega-3 Fish Oil (1000-2000mg)",benefits:"Brain healing, inflammation",helps:["brain","mood"],description:"EPA/DHA restore brain cell membranes and reduce inflammation"},{name:"N-Acetyl Cysteine (NAC)",benefits:"Glutathione production, detox",helps:["cleanse","liver"],description:"Precursor to glutathione, the body's master detoxifier"},{name:"Probiotics",benefits:"Gut health, mood (gut-brain axis)",helps:["mood","digestion"],description:"90% of serotonin is made in the gut; healthy gut = better mood"},{name:"Melatonin (3-10mg)",benefits:"Sleep regulation",helps:["sleep"],description:"Natural sleep hormone; helps reset disrupted sleep cycles"},{name:"CoQ10",benefits:"Energy production, brain support",helps:["energy","brain"],description:"Cellular energy booster that combats fatigue"}]},{id:"sport",title:"Physical Exercise",icon:"\ud83d\udcaa",color:"#F44336",lightColor:"#FFEBEE",resources:[{name:"Cardio Exercise (Running, Cycling)",benefits:"Speeds THC elimination through sweat",helps:["cleanse","mood"],description:"30-45 min sessions increase metabolism and fat burning where THC is stored",frequency:"4-5 times per week"},{name:"Hot Yoga / Bikram",benefits:"Deep sweating, detoxification",helps:["cleanse","flexibility"],description:"Combines exercise with heat to maximize toxin elimination through sweat",frequency:"3-4 times per week"},{name:"Sauna Sessions",benefits:"Toxin release through sweating",helps:["cleanse","relaxation"],description:"15-20 min sessions help eliminate fat-soluble compounds like THC",frequency:"Daily if possible"},{name:"Swimming",benefits:"Full-body cardio, low impact",helps:["cleanse","anxiety"],description:"Gentle on joints while providing excellent cardiovascular workout",frequency:"3-5 times per week"},{name:"Strength Training",benefits:"Builds muscle, boosts metabolism",helps:["energy","mood"],description:"Increases lean muscle mass which raises basal metabolic rate",frequency:"3 times per week"},{name:"HIIT (High-Intensity Interval)",benefits:"Maximum fat burn, fast cleanse",helps:["cleanse","energy"],description:"Short bursts maximize fat oxidation and THC elimination",frequency:"2-3 times per week"},{name:"Walking in Nature",benefits:"Gentle movement, mental clarity",helps:["mood","anxiety"],description:"Low-impact exercise combined with nature therapy for mental health",frequency:"Daily, 30+ minutes"},{name:"Boxing / Martial Arts",benefits:"Stress release, discipline",helps:["anxiety","mood"],description:"Physical outlet for emotions while building mental strength",frequency:"2-4 times per week"}]},{id:"activities",title:"Wellness Activities",icon:"\ud83e\uddd8\u200d\u2640\ufe0f",color:"#9C27B0",lightColor:"#F3E5F5",resources:[{name:"Meditation (10-20 min)",benefits:"Anxiety relief, mental clarity",helps:["anxiety","focus"],description:"Mindfulness practice that rewires brain patterns and reduces cravings",frequency:"Daily"},{name:"Breathwork (Box Breathing)",benefits:"Immediate anxiety relief",helps:["anxiety","sleep"],description:"4-4-4-4 breathing pattern activates parasympathetic nervous system",frequency:"As needed, 5-10 min"},{name:"Journaling",benefits:"Emotional processing, clarity",helps:["mood","insight"],description:"Writing thoughts and feelings helps process withdrawal emotions",frequency:"Daily, before bed"},{name:"Cold Exposure (Showers)",benefits:"Mood boost, mental resilience",helps:["mood","energy"],description:"30-90 sec cold water increases dopamine and norepinephrine",frequency:"Daily, morning"},{name:"Massage Therapy",benefits:"Muscle tension, relaxation",helps:["anxiety","sleep"],description:"Releases physical tension and promotes parasympathetic state",frequency:"Weekly or bi-weekly"},{name:"Acupuncture",benefits:"Withdrawal symptom relief",helps:["anxiety","sleep","cravings"],description:"Stimulates endorphin release and balances energy systems",frequency:"1-2 times per week"},{name:"Art / Music Therapy",benefits:"Emotional expression, joy",helps:["mood","creativity"],description:"Creative outlets provide healthy dopamine stimulation",frequency:"As desired"},{name:"Social Connection",benefits:"Support, accountability",helps:["mood","motivation"],description:"Spending time with supportive people boosts oxytocin and motivation",frequency:"Multiple times per week"},{name:"Nature Immersion (Forest Bathing)",benefits:"Stress reduction, grounding",helps:["anxiety","mood"],description:"Spending time in nature lowers cortisol and improves mental health",frequency:"Weekly, 2+ hours"},{name:"Sleep Hygiene Routine",benefits:"Restorative sleep",helps:["sleep","recovery"],description:"Consistent bedtime, dark room, cool temp, no screens 1hr before bed",frequency:"Daily"}]}];function Em(e){let{onClose:t,onSubmit:n}=e;const[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)("");return(0,pm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,pm.jsxs)("div",{style:{background:"white",borderRadius:16,padding:30,maxWidth:500,width:"100%",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",animation:"slideInUp 0.4s ease-out"},children:[(0,pm.jsx)("h2",{style:{background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10,textAlign:"center"},children:"\ud83c\udf19 Evening Check-In"}),(0,pm.jsx)("p",{style:{textAlign:"center",color:"var(--gray-medium)",marginBottom:25},children:"How was your day today?"}),(0,pm.jsxs)("div",{style:{marginBottom:25},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12},children:"Rate your day:"}),(0,pm.jsx)("div",{style:{display:"flex",gap:10,justifyContent:"space-around"},children:[{emoji:"\ud83d\ude0a",label:"Great",color:"var(--joy-green)"},{emoji:"\ud83d\ude42",label:"Good",color:"var(--joy-teal)"},{emoji:"\ud83d\ude10",label:"Okay",color:"var(--joy-yellow)"},{emoji:"\ud83d\ude14",label:"Struggling",color:"var(--joy-orange)"},{emoji:"\ud83d\ude1e",label:"Difficult",color:"var(--joy-red)"}].map(e=>(0,pm.jsxs)("button",{onClick:()=>o(e.label),style:{padding:"15px 10px",border:i===e.label?"3px solid ".concat(e.color):"2px solid var(--gray-light)",borderRadius:12,background:i===e.label?"".concat(e.color,"20"):"white",cursor:"pointer",transition:"all 0.2s",flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:5},children:[(0,pm.jsx)("span",{style:{fontSize:"2rem"},children:e.emoji}),(0,pm.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:600},children:e.label})]},e.label))})]}),(0,pm.jsxs)("div",{style:{marginBottom:25},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:8},children:"Any thoughts? (optional)"}),(0,pm.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"How did you handle cravings? What helped? What was challenging?",rows:4,style:{width:"100%",padding:12,borderRadius:8,border:"1px solid var(--gray-light)",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"}})]}),(0,pm.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,pm.jsx)("button",{onClick:t,style:{flex:1,padding:"12px 20px",borderRadius:8,border:"2px solid var(--gray-light)",background:"white",color:"var(--gray-dark)",fontWeight:600,cursor:"pointer"},children:"Skip Tonight"}),(0,pm.jsx)("button",{onClick:()=>{i&&(n(i,s),t())},disabled:!i,style:{flex:2,padding:"12px 20px",borderRadius:8,border:"none",background:i?"var(--gradient-sunset)":"var(--gray-light)",color:"white",fontWeight:600,cursor:i?"pointer":"not-allowed",transition:"transform 0.2s"},onMouseEnter:e=>i&&(e.currentTarget.style.transform="scale(1.05)"),onMouseLeave:e=>i&&(e.currentTarget.style.transform="scale(1)"),children:"Submit Check-In"})]})]})})}const km=[{id:"insomnia",label:"Trouble Sleeping",category:"sleep"},{id:"nightSweats",label:"Night Sweats",category:"sleep"},{id:"vivid_dreams",label:"Vivid Dreams",category:"sleep"},{id:"irritability",label:"Irritability",category:"mood"},{id:"anxiety",label:"Anxiety",category:"mood"},{id:"depression",label:"Low Mood",category:"mood"},{id:"anger",label:"Anger/Rage",category:"mood"},{id:"brain_fog",label:"Brain Fog",category:"cognitive"},{id:"concentration",label:"Difficulty Concentrating",category:"cognitive"},{id:"memory",label:"Memory Issues",category:"cognitive"},{id:"headache",label:"Headaches",category:"physical"},{id:"nausea",label:"Nausea",category:"physical"},{id:"appetite_loss",label:"Loss of Appetite",category:"physical"},{id:"stomach_pain",label:"Stomach Pain",category:"physical"},{id:"chills",label:"Chills",category:"physical"},{id:"tremors",label:"Tremors/Shaking",category:"physical"},{id:"fatigue",label:"Extreme Fatigue",category:"physical"},{id:"cravings",label:"Strong Cravings",category:"cravings"},{id:"boredom",label:"Boredom",category:"mood"},{id:"restlessness",label:"Restlessness",category:"physical"}],Tm=e=>{switch(e){case"mild":default:return"#4CAF50";case"moderate":return"#FF9800";case"hard":return"#FF5722";case"very-hard":return"#E91E63";case"peak":return"#9C27B0"}},Cm=e=>{switch(e){case"mild":default:return"Mild";case"moderate":return"Moderate";case"hard":return"Hard";case"very-hard":return"Very Hard";case"peak":return"PEAK \ud83d\udd25"}},Im="symptomReports";function Am(e){let{userId:t,currentDay:n,onSave:i}=e;const[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)("moderate"),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m&&y()},[m,n]);const y=async()=>{const e=await(async e=>{try{const t=Mp(Yf(cm,Im),Up("day","==",e)),n=await tm(t),r={};return n.docs.forEach(e=>{const t=e.data();t.symptoms&&Array.isArray(t.symptoms)&&t.symptoms.forEach(e=>{r[e]=(r[e]||0)+1})}),{day:e,symptomCounts:r,totalReports:n.size}}catch(t){return console.error("Error getting aggregated symptoms:",t),{day:e,symptomCounts:{},totalReports:0}}})(n);p(e)},v=km.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),b=e=>({sleep:"\ud83d\udca4 Sleep",mood:"\ud83d\ude14 Mood & Mental",cognitive:"\ud83e\udde0 Cognitive",physical:"\ud83e\udd12 Physical",cravings:"\ud83c\udfaf Cravings"}[e]||e);return(0,pm.jsxs)("div",{style:{background:"white",borderRadius:12,padding:24,boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginTop:20},children:[(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsxs)("h3",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"1.3rem"},children:["\ud83d\udcca Track Your Symptoms - Day ",n]}),(0,pm.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#666",lineHeight:1.5},children:["Help yourself and others by logging what you're experiencing. ",(0,pm.jsx)("strong",{children:"Your data is anonymized"})," and helps the community understand what to expect."]})]}),(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,color:"#333"},children:"Overall Severity Today:"}),(0,pm.jsx)("div",{style:{display:"flex",gap:12},children:["mild","moderate","severe"].map(e=>(0,pm.jsx)("button",{onClick:()=>l(e),style:{flex:1,padding:"10px 16px",background:a===e?"#667eea":"#f0f0f0",color:a===e?"white":"#666",border:"none",borderRadius:8,fontSize:"0.9rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",textTransform:"capitalize"},children:e},e))})]}),Object.entries(v).map(e=>{let[t,n]=e;return(0,pm.jsxs)("div",{style:{marginBottom:16},children:[(0,pm.jsx)("h4",{style:{margin:"0 0 10px 0",fontSize:"0.95rem",color:"#333"},children:b(t)}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:8},children:n.map(e=>(0,pm.jsxs)("label",{style:{display:"flex",alignItems:"center",padding:"8px 12px",background:o.includes(e.id)?"#e8eaf6":"#f9f9f9",borderRadius:8,cursor:"pointer",border:o.includes(e.id)?"2px solid #667eea":"2px solid transparent",transition:"all 0.2s ease"},children:[(0,pm.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>{return t=e.id,void s(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},style:{marginRight:8,cursor:"pointer"}}),(0,pm.jsx)("span",{style:{fontSize:"0.85rem",fontWeight:o.includes(e.id)?600:400},children:e.label})]},e.id))})]},t)}),(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,color:"#333"},children:"Additional Notes (Optional):"}),(0,pm.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Any additional details about how you're feeling...",style:{width:"100%",padding:12,borderRadius:8,border:"2px solid #e0e0e0",fontSize:"0.9rem",fontFamily:"inherit",minHeight:80,resize:"vertical"}})]}),(0,pm.jsx)("button",{onClick:async()=>{if(0!==o.length){h(!0);try{await(async(e,t,n,r,i)=>{try{const o={userId:e,day:t,symptoms:n,severity:r,notes:i,timestamp:Date.now()};return await rm(Yf(cm,Im),o),{success:!0}}catch(o){throw console.error("Error saving symptom report:",o),o}})(t,n,o,a,c),alert("\u2705 Symptoms logged! Your data helps others understand what to expect."),s([]),u(""),i()}catch(e){alert("Failed to save symptoms. Please try again.")}finally{h(!1)}}else alert("Please select at least one symptom")},disabled:d||0===o.length,style:{padding:"14px 32px",background:d||0===o.length?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:8,fontSize:"1rem",fontWeight:700,cursor:d||0===o.length?"not-allowed":"pointer",width:"100%",marginBottom:12},children:d?"\u23f3 Saving...":"\ud83d\udcbe Log Symptoms for Day ".concat(n)}),(0,pm.jsxs)("button",{onClick:()=>g(!m),style:{padding:"10px 20px",background:"white",color:"#667eea",border:"2px solid #667eea",borderRadius:8,fontSize:"0.9rem",fontWeight:600,cursor:"pointer",width:"100%"},children:[m?"Hide":"Show"," What Others Report on Day ",n]}),m&&f&&(0,pm.jsxs)("div",{style:{marginTop:16,padding:16,background:"#f5f5f5",borderRadius:8,border:"2px solid #e0e0e0"},children:[(0,pm.jsxs)("h4",{style:{margin:"0 0 12px 0",color:"#333",fontSize:"1rem"},children:["\ud83d\udcc8 Community Reports for Day ",n]}),0===f.totalReports?(0,pm.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#666",fontStyle:"italic"},children:"No community data yet for this day. Be the first to contribute!"}):(0,pm.jsxs)(pm.Fragment,{children:[(0,pm.jsxs)("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"#666"},children:["Based on ",(0,pm.jsx)("strong",{children:f.totalReports})," anonymous reports:"]}),(0,pm.jsx)("div",{style:{display:"grid",gap:6},children:Object.entries(f.symptomCounts).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t,n]=e;const r=km.find(e=>e.id===t),i=Math.round(n/f.totalReports*100);return(0,pm.jsxs)("div",{style:{fontSize:"0.85rem",color:"#333"},children:[(0,pm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[(0,pm.jsx)("span",{children:(null===r||void 0===r?void 0:r.label)||t}),(0,pm.jsxs)("span",{style:{fontWeight:600},children:[i,"%"]})]}),(0,pm.jsx)("div",{style:{height:6,background:"#e0e0e0",borderRadius:3,overflow:"hidden"},children:(0,pm.jsx)("div",{style:{width:"".concat(i,"%"),height:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",transition:"width 0.3s ease"}})})]},t)})})]})]})]})}function Rm(e){let{frequency:t,yearsOfUse:n,currentDay:i}=e;const o=((e,t)=>{const n="heavy"===e||"chronic"===e,r=[{day:1,phase:"Initial Phase",difficulty:"mild",commonSymptoms:["cravings","restlessness","boredom"],description:"First day is often deceptively easy. THC is still in your system. You might feel motivated and excited.",tips:["Stay busy with activities","Drink plenty of water","Get rid of any cannabis/paraphernalia","Tell a friend about your goal"]},{day:2,phase:"Withdrawal Begins",difficulty:n?"hard":"moderate",commonSymptoms:["insomnia","irritability","cravings","appetite_loss","restlessness"],description:"Reality sets in. Withdrawal symptoms start appearing. Sleep may be difficult. Cravings intensify.",tips:["Expect sleep difficulties - this is normal","Light exercise can help","Avoid alcohol and caffeine late in the day","Practice deep breathing for cravings"]},{day:3,phase:"Peak Withdrawal",difficulty:n?"very-hard":"hard",commonSymptoms:["insomnia","nightSweats","irritability","anger","anxiety","headache","nausea","cravings"],description:n?"\u26a0\ufe0f HARDEST DAY for heavy users. Peak withdrawal symptoms. Night sweats, insomnia, and intense irritability are common.":"Peak withdrawal begins. Sleep is difficult, mood swings increase. This is a critical day - push through!",tips:["\ud83d\udea8 This is the hardest day - you can do this!","Take a hot shower/bath for sweats","Eat small, frequent meals if nauseous","Reach out for support if needed","Remember: this will pass"]},{day:4,phase:"Peak Withdrawal",difficulty:"very-hard",commonSymptoms:["insomnia","vivid_dreams","anxiety","depression","brain_fog","fatigue","cravings"],description:"\u26a0\ufe0f SECOND HARDEST DAY. Extreme fatigue and emotional vulnerability. Dreams become incredibly vivid and intense.",tips:["Vivid dreams are normal - your brain is recovering","Allow yourself to rest if exhausted","Be gentle with yourself emotionally","Journal your feelings","This too shall pass"]},{day:5,phase:"Acute Withdrawal",difficulty:"hard",commonSymptoms:["insomnia","vivid_dreams","irritability","anxiety","brain_fog","concentration","cravings"],description:"Symptoms remain intense but slightly more manageable. Cognitive fog is prominent. Sleep remains disrupted.",tips:["Do simple tasks - don't overload your brain","Short walks in nature can help","Melatonin may help with sleep (consult doctor)","Connect with supportive people"]},{day:6,phase:"Acute Withdrawal",difficulty:"hard",commonSymptoms:["insomnia","vivid_dreams","mood_swings","fatigue","cravings"],description:"Symptoms continue but you're past the peak. Small improvements may be noticed. Energy is still low.",tips:["Notice any small improvements","Celebrate making it through the worst","Maintain healthy eating habits","Light exercise if energy allows"]},{day:7,phase:"Week 1 Complete",difficulty:"moderate",commonSymptoms:["insomnia","vivid_dreams","anxiety","brain_fog","cravings"],description:"\ud83c\udf89 You've completed the hardest week! Acute symptoms start to lessen. Sleep may still be difficult but improving.",tips:["Congratulations on one week!","Reflect on your progress","Plan activities for week 2","Reward yourself (non-substance)"]},{day:10,phase:"Early Recovery",difficulty:"moderate",commonSymptoms:["vivid_dreams","mood_swings","brain_fog","cravings"],description:"Symptoms are milder. Dreams remain vivid but less disruptive. Mental clarity starts returning slowly.",tips:["Mental fog is lifting gradually","Resume normal routines","Consider new hobbies","Support others in their journey"]},{day:14,phase:"Two Weeks",difficulty:"mild",commonSymptoms:["vivid_dreams","occasional_anxiety","mild_cravings"],description:"\ud83c\udf89 Two weeks! Major milestone. Most acute symptoms have subsided. Mood stabilizes. Energy returns.",tips:["Major accomplishment - celebrate it!","Sleep should be much better","Mental clarity improving","Physical health improving"]},{day:21,phase:"Three Weeks",difficulty:"mild",commonSymptoms:["occasional_cravings","emotional_sensitivity"],description:"Feeling significantly better. Dreams normalizing. Cravings are situational rather than constant.",tips:["Identify your trigger situations","Practice coping strategies","Notice improved sleep quality","Enjoy increased energy"]},{day:30,phase:"One Month",difficulty:"mild",commonSymptoms:["occasional_cravings"],description:"\ud83c\udf89 ONE MONTH! You've made it! Most symptoms resolved. Mood is stable. Sleep is normal. Mental clarity restored.",tips:["Huge achievement - be proud!","Reflect on all improvements","Continue healthy habits","Stay connected to support"]}];return(t||1)>=5&&n&&r.splice(3,0,{day:3.5,phase:"Extended Peak",difficulty:"peak",commonSymptoms:["all_symptoms"],description:"\u26a0\ufe0f\u26a0\ufe0f ABSOLUTE PEAK for chronic long-term users. All withdrawal symptoms at maximum intensity. This is the storm before the calm.",tips:["\ud83d\udea8 You're at the absolute peak - it gets better from here","Stay safe - reach out if you need help","This is temporary - your brain is healing","One hour at a time if needed"]}),r.filter(e=>"number"===typeof e.day)})(t,n),s=((e,t)=>{let n=t[0],r=Math.abs(t[0].day-e);for(const i of t){const t=Math.abs(i.day-e);t<r&&(r=t,n=i)}return n})(i,o),[a,l]=(0,r.useState)(i);return(0,pm.jsxs)("div",{style:{background:"white",borderRadius:12,padding:24,boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginTop:20},children:[(0,pm.jsx)("h3",{style:{margin:"0 0 8px 0",color:"#667eea",fontSize:"1.3rem"},children:"\ud83d\uddd3\ufe0f What to Expect - Your Withdrawal Timeline"}),(0,pm.jsxs)("p",{style:{margin:"0 0 16px 0",fontSize:"0.9rem",color:"#666",lineHeight:1.5},children:["Based on your usage pattern (",(0,pm.jsx)("strong",{children:t}),", ",n||1," years), here's what to expect each day."]}),s&&(0,pm.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(Tm(s.difficulty),"20, ").concat(Tm(s.difficulty),"10)"),border:"3px solid ".concat(Tm(s.difficulty)),borderRadius:12,padding:20,marginBottom:24},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[(0,pm.jsxs)("div",{style:{background:Tm(s.difficulty),color:"white",padding:"8px 16px",borderRadius:20,fontWeight:700,fontSize:"1rem"},children:["\ud83d\udccd You are here - Day ",i]}),(0,pm.jsx)("div",{style:{background:Tm(s.difficulty),color:"white",padding:"4px 12px",borderRadius:12,fontSize:"0.85rem",fontWeight:600},children:Cm(s.difficulty)})]}),(0,pm.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",color:"#333"},children:s.phase}),(0,pm.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"0.95rem",lineHeight:1.5,color:"#555"},children:s.description}),s.tips.length>0&&(0,pm.jsxs)("div",{children:[(0,pm.jsx)("strong",{style:{fontSize:"0.9rem",color:"#333"},children:"\ud83d\udca1 Tips for today:"}),(0,pm.jsx)("ul",{style:{margin:"8px 0 0 0",paddingLeft:20},children:s.tips.map((e,t)=>(0,pm.jsx)("li",{style:{fontSize:"0.85rem",marginBottom:4,color:"#555"},children:e},t))})]})]}),(0,pm.jsx)("h4",{style:{margin:"0 0 16px 0",fontSize:"1.1rem",color:"#333"},children:"\ud83d\udcc8 Full Timeline"}),(0,pm.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:o.map(e=>{const t=a===e.day,n=e.day===i,r=e.day<i;return(0,pm.jsxs)("div",{style:{border:"2px solid ".concat(n?Tm(e.difficulty):"#e0e0e0"),borderRadius:8,overflow:"hidden",opacity:r?.6:1,transition:"all 0.2s ease"},children:[(0,pm.jsxs)("button",{onClick:()=>l(t?null:e.day),style:{width:"100%",padding:"12px 16px",background:r?"#f5f5f5":n?"".concat(Tm(e.difficulty),"15"):"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"background 0.2s ease"},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,pm.jsxs)("div",{style:{minWidth:60,padding:"6px 12px",background:Tm(e.difficulty),color:"white",borderRadius:8,fontWeight:700,fontSize:"0.9rem",textAlign:"center"},children:["Day ",e.day]}),(0,pm.jsxs)("div",{style:{textAlign:"left"},children:[(0,pm.jsxs)("div",{style:{fontWeight:600,fontSize:"0.95rem",color:"#333",marginBottom:2},children:[e.phase," ",n&&"\u2190 You are here"]}),(0,pm.jsxs)("div",{style:{fontSize:"0.75rem",color:"#666"},children:[Cm(e.difficulty)," difficulty"]})]})]}),(0,pm.jsx)("span",{style:{fontSize:"1.2rem",color:"#999"},children:t?"\u2212":"+"})]}),t&&(0,pm.jsxs)("div",{style:{padding:"16px 16px 16px 88px",background:"#f9f9f9",borderTop:"1px solid #e0e0e0"},children:[(0,pm.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",lineHeight:1.5,color:"#555"},children:e.description}),e.tips.length>0&&(0,pm.jsxs)("div",{children:[(0,pm.jsx)("strong",{style:{fontSize:"0.85rem",color:"#333"},children:"\ud83d\udca1 Tips:"}),(0,pm.jsx)("ul",{style:{margin:"6px 0 0 0",paddingLeft:20},children:e.tips.map((e,t)=>(0,pm.jsx)("li",{style:{fontSize:"0.8rem",marginBottom:4,color:"#555"},children:e},t))})]})]})]},e.day)})}),(0,pm.jsx)("div",{style:{marginTop:20,padding:16,background:"#fff3cd",borderRadius:8,border:"2px solid #ffecb5"},children:(0,pm.jsxs)("p",{style:{margin:0,fontSize:"0.85rem",color:"#856404",lineHeight:1.5},children:[(0,pm.jsx)("strong",{children:"\u26a0\ufe0f Remember:"})," Everyone's experience is different. This timeline is a general guide. If symptoms are severe or concerning, please consult a healthcare professional."]})})]})}function Nm(e){let{onAccept:t}=e;const[n,i]=(0,r.useState)(!1);return(0,pm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,pm.jsxs)("div",{style:{background:"white",borderRadius:16,maxWidth:650,width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",animation:"slideInUp 0.3s ease-out"},children:[(0,pm.jsxs)("div",{style:{padding:"24px 24px 20px",borderBottom:"2px solid #f0f0f0",background:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)",borderRadius:"16px 16px 0 0",color:"white"},children:[(0,pm.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,display:"flex",alignItems:"center",gap:10},children:"\u26a0\ufe0f Important Disclaimer"}),(0,pm.jsx)("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",opacity:.95},children:"Please read carefully before using T-Break"})]}),(0,pm.jsxs)("div",{onScroll:e=>{const t=e.currentTarget;(t.scrollTop/(t.scrollHeight-t.clientHeight)*100>=80||t.scrollHeight<=t.clientHeight)&&!n&&i(!0)},style:{flex:1,overflowY:"auto",padding:24,fontSize:"1rem",lineHeight:1.7,color:"var(--gray-dark)"},children:[(0,pm.jsx)("div",{style:{background:"#fff3cd",padding:20,borderRadius:12,marginBottom:20,borderLeft:"4px solid #ff9800"},children:(0,pm.jsx)("p",{style:{margin:0,fontSize:"1.05rem",fontWeight:600,color:"#856404"},children:"T-Break is a self-tracking and support tool. It is NOT a substitute for professional medical advice, diagnosis, or treatment."})}),(0,pm.jsx)("h3",{style:{color:"#FF6B6B",marginTop:0},children:"\ud83c\udfe5 Medical Disclaimer"}),(0,pm.jsxs)("p",{children:[(0,pm.jsx)("strong",{children:"T-Break is designed as a personal aid and self-tracker"})," to help you manage your cannabis tolerance break journey. However, you should be aware of the following:"]}),(0,pm.jsx)("h4",{style:{color:"#333",marginTop:20,fontSize:"1rem"},children:"This App Does NOT:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20,marginTop:8},children:[(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Provide medical advice"})," - We are not doctors or healthcare professionals"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Diagnose conditions"})," - Withdrawal symptoms vary and may indicate other issues"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Replace professional treatment"})," - Always consult qualified healthcare providers"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Guarantee specific outcomes"})," - Individual results vary significantly"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Monitor your health status"})," - We cannot assess your medical condition"]})]}),(0,pm.jsx)("h4",{style:{color:"#333",marginTop:20,fontSize:"1rem"},children:"This App DOES:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20,marginTop:8},children:[(0,pm.jsxs)("li",{children:["Help you ",(0,pm.jsx)("strong",{children:"track your progress"})," through your tolerance break"]}),(0,pm.jsxs)("li",{children:["Provide ",(0,pm.jsx)("strong",{children:"general information"})," about withdrawal symptoms"]}),(0,pm.jsxs)("li",{children:["Offer ",(0,pm.jsx)("strong",{children:"peer support"})," through community features"]}),(0,pm.jsxs)("li",{children:["Suggest ",(0,pm.jsx)("strong",{children:"wellness strategies"})," that may help during your break"]}),(0,pm.jsxs)("li",{children:["Give you tools to ",(0,pm.jsx)("strong",{children:"monitor your own journey"})]})]}),(0,pm.jsx)("h4",{style:{color:"#333",marginTop:20,fontSize:"1rem"},children:"\u2695\ufe0f When to Seek Professional Help:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20,marginTop:8},children:[(0,pm.jsxs)("li",{children:["If you experience ",(0,pm.jsx)("strong",{children:"severe withdrawal symptoms"})]}),(0,pm.jsxs)("li",{children:["If you have thoughts of ",(0,pm.jsx)("strong",{children:"self-harm or suicide"})]}),(0,pm.jsxs)("li",{children:["If symptoms interfere with ",(0,pm.jsx)("strong",{children:"daily functioning"})]}),(0,pm.jsxs)("li",{children:["If you have ",(0,pm.jsx)("strong",{children:"pre-existing medical conditions"})]}),(0,pm.jsxs)("li",{children:["If you're taking ",(0,pm.jsx)("strong",{children:"medications"})," that may interact"]}),(0,pm.jsxs)("li",{children:["If you have ",(0,pm.jsx)("strong",{children:"mental health concerns"})]})]}),(0,pm.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(255, 142, 83, 0.1) 100%)",padding:16,borderRadius:12,marginTop:24,borderLeft:"4px solid #FF6B6B"},children:[(0,pm.jsxs)("p",{style:{margin:0,fontSize:"0.95rem",fontWeight:600},children:["\ud83d\udea8 ",(0,pm.jsx)("strong",{children:"Emergency Resources:"})]}),(0,pm.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem"},children:["\u2022 National Suicide Prevention Lifeline: ",(0,pm.jsx)("strong",{children:"988"}),(0,pm.jsx)("br",{}),"\u2022 Crisis Text Line: Text ",(0,pm.jsx)("strong",{children:"HOME"})," to ",(0,pm.jsx)("strong",{children:"741741"}),(0,pm.jsx)("br",{}),"\u2022 SAMHSA National Helpline: ",(0,pm.jsx)("strong",{children:"1-800-662-4357"})]})]}),(0,pm.jsx)("h4",{style:{color:"#333",marginTop:24,fontSize:"1rem"},children:"\ud83d\udccb Your Responsibility:"}),(0,pm.jsx)("p",{children:"By using T-Break, you acknowledge that:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20,marginTop:8},children:[(0,pm.jsxs)("li",{children:["You are using this app ",(0,pm.jsx)("strong",{children:"at your own risk"})]}),(0,pm.jsxs)("li",{children:["You understand this is a ",(0,pm.jsx)("strong",{children:"self-help tool"}),", not medical care"]}),(0,pm.jsx)("li",{children:"You will seek professional help if needed"}),(0,pm.jsxs)("li",{children:["The app developers are ",(0,pm.jsx)("strong",{children:"not liable"})," for health outcomes"]}),(0,pm.jsxs)("li",{children:["Community advice is ",(0,pm.jsx)("strong",{children:"not professional guidance"})]})]}),(0,pm.jsx)("div",{style:{background:"#e8f5e9",padding:16,borderRadius:12,marginTop:24,borderLeft:"4px solid #4CAF50"},children:(0,pm.jsxs)("p",{style:{margin:0,fontSize:"0.95rem"},children:[(0,pm.jsx)("strong",{children:"\u2705 We Support You:"})," While T-Break is not a medical service, we're here to provide tools, community support, and resources to help you on your journey. Use this app as a complement to, not a replacement for, professional care."]})}),(0,pm.jsx)("div",{style:{textAlign:"center",marginTop:20,color:n?"#4CAF50":"var(--gray-medium)",fontSize:"0.8rem",fontWeight:n?600:400,fontStyle:n?"normal":"italic"},children:n?"\u2705 Ready to accept":"\ud83d\udcdc Scroll down to continue"})]}),(0,pm.jsx)("div",{style:{padding:20,borderTop:"2px solid #f0f0f0",display:"flex",justifyContent:"center"},children:(0,pm.jsx)("button",{onClick:t,disabled:!n,style:{padding:"14px 40px",background:n?"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)":"#ccc",color:"white",border:"none",borderRadius:25,fontSize:"1rem",fontWeight:700,cursor:n?"pointer":"not-allowed",transition:"all 0.2s ease",boxShadow:n?"0 4px 15px rgba(76, 175, 80, 0.4)":"none"},onMouseEnter:e=>{n&&(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(76, 175, 80, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=n?"0 4px 15px rgba(76, 175, 80, 0.4)":"none"},children:"\u2705 I Understand & Accept"})})]})})}function Pm(){var e,t,n,i,o,s,a;const{user:l}=gm(),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),[x,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!l)return;(async()=>{const e=await bm(l.uid);if(h(e),null!==e&&void 0!==e&&e.disclaimerAccepted||E(!0),null!==e&&void 0!==e&&e.startDate){const t=new Date(e.startDate),n=new Date,r=Math.floor((n.getTime()-t.getTime())/864e5);if(p(Math.max(0,r)),e.frequency&&e.yearsOfUse&&e.weight&&e.usageType){const t=function(e,t,n,r,i){let o=30;"light"===e?o=10:"moderate"===e?o=20:"heavy"===e?o=45:"chronic"===e&&(o=90),t>5&&(o+=15),t>10&&(o+=20),"edible"===r&&(o+=10),n>90&&(o+=7);const s=Math.min(100,100*(1-Math.exp(-i/(.4*o))));Math.max(0,o-i);let a="";return a=s<25?"Early detox - stay strong! \ud83d\udcaa":s<50?"Progress building! \ud83c\udf31":s<75?"More than halfway! \ud83d\ude80":s<95?"Almost there! \ud83c\udfaf":"System clear! \ud83c\udf89",{daysClean:i,estimatedDaysToFullClear:o,currentClearancePercent:Math.round(s),status:a}}(e.frequency,e.yearsOfUse,e.weight,e.usageType,r);v(t)}}g(xm[(f||1)%xm.length])})();const e=()=>{const e=new Date,t=e.getHours(),n=localStorage.getItem("lastNightlyCheckIn_".concat(l.uid)),r=e.toDateString();t>=20&&n!==r&&u(!0)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[l]);const k=async(e,t)=>{l&&(await vm(l.uid,{lastNightlyCheckIn:(new Date).toISOString(),lastNightlyMood:e,lastNightlyNotes:t}),localStorage.setItem("lastNightlyCheckIn_".concat(l.uid),(new Date).toDateString()),u(!1))};return(0,pm.jsxs)("div",{style:{padding:20,minHeight:"100vh",background:"linear-gradient(135deg, rgba(26, 188, 156, 0.05) 0%, rgba(142, 68, 173, 0.05) 100%)"},children:[_&&l&&(0,pm.jsx)(Nm,{onAccept:async()=>{if(l)try{await vm(l.uid,{disclaimerAccepted:!0}),E(!1)}catch(e){console.error("Error accepting disclaimer:",e),alert("Failed to save. Please try again.")}}}),c&&l&&(0,pm.jsx)(Em,{onSubmit:k,onClose:()=>u(!1)}),(0,pm.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto"},children:[(0,pm.jsxs)("div",{style:{textAlign:"center",marginBottom:40,animation:"slideInDown 0.6s ease-out"},children:[(0,pm.jsx)("h1",{style:{fontSize:"3.5rem",background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10,animation:"bounce 3s ease-in-out infinite"},children:"\ud83c\udf89 T-Break40 \ud83c\udf89"}),l?(0,pm.jsxs)("div",{children:[(0,pm.jsxs)("p",{style:{fontSize:"1.3rem",color:"var(--joy-teal)",fontWeight:600},children:["\u2728 Welcome, ",l.email,"! \u2728"]}),(0,pm.jsx)("p",{style:{color:"var(--gray-medium)",marginTop:8},children:"You're on an amazing journey to transform your life"})]}):(0,pm.jsxs)("div",{children:[(0,pm.jsx)("p",{style:{fontSize:"1.2rem",color:"var(--joy-purple)",fontWeight:600},children:"Start your 40-day break journey!"}),(0,pm.jsxs)("nav",{style:{marginTop:20,display:"flex",gap:12,justifyContent:"center"},children:[(0,pm.jsx)(yt,{to:"/login",style:{padding:"12px 24px",background:"var(--gradient-cool)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600},children:"Login"}),(0,pm.jsx)(yt,{to:"/signup",style:{padding:"12px 24px",background:"var(--gradient-warm)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600},children:"Signup"})]})]})]}),l&&(0,pm.jsxs)(pm.Fragment,{children:[(0,pm.jsxs)("div",{style:{background:"var(--gradient-sunset)",backgroundSize:"200% 200%",padding:25,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",marginBottom:20,boxShadow:"var(--shadow-lg)",animation:"slideInUp 0.6s ease-out"},children:[(0,pm.jsx)("div",{style:{fontSize:"2rem",marginBottom:10},children:"\ud83d\udcad"}),(0,pm.jsxs)("p",{style:{fontSize:"1.1rem",fontStyle:"italic",margin:0,lineHeight:1.6,color:"rgba(255,255,255,0.98)"},children:['"',m,'"']})]}),y&&(0,pm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.7s ease-out"},children:[(0,pm.jsx)("h3",{style:{background:"var(--gradient-cool)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83e\uddea Metabolite Clearance Tracker"}),(0,pm.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:15,marginBottom:20},children:[(0,pm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-teal-light)",borderRadius:8},children:[(0,pm.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-teal)"},children:f}),(0,pm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Days Clean"})]}),(0,pm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-orange-light)",borderRadius:8},children:[(0,pm.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-orange)"},children:y.estimatedDaysToFullClear-f}),(0,pm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Days Remaining"})]}),(0,pm.jsxs)("div",{style:{textAlign:"center",padding:15,background:"var(--joy-green-light)",borderRadius:8},children:[(0,pm.jsxs)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--joy-green)"},children:[y.currentClearancePercent,"%"]}),(0,pm.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--gray-dark)"},children:"Cleared"})]})]}),(0,pm.jsx)("div",{style:{width:"100%",height:20,background:"var(--gray-light)",borderRadius:10,overflow:"hidden",marginBottom:10},children:(0,pm.jsx)("div",{style:{width:"".concat(y.currentClearancePercent,"%"),height:"100%",background:"var(--gradient-forest)",transition:"width 1s ease-out"}})}),(0,pm.jsx)("p",{style:{textAlign:"center",color:"var(--joy-green)",fontWeight:600,margin:0},children:y.status})]}),(0,pm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:[(0,pm.jsx)("h3",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83e\uddd8 Quick Relaxation Techniques"}),(0,pm.jsx)("div",{style:{display:"grid",gap:12},children:Sm.slice(0,4).map(e=>(0,pm.jsxs)("div",{style:{padding:15,background:"var(--gray-lightest)",borderRadius:8,borderLeft:"4px solid var(--joy-teal)"},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:5},children:[(0,pm.jsx)("span",{style:{fontSize:"1.5rem"},children:e.icon}),(0,pm.jsx)("strong",{style:{color:"var(--joy-teal)"},children:e.title}),(0,pm.jsx)("span",{style:{marginLeft:"auto",fontSize:"0.85rem",color:"var(--gray-medium)",background:"white",padding:"4px 8px",borderRadius:4},children:e.duration})]}),(0,pm.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--gray-dark)"},children:e.description})]},e.title))})]}),(0,pm.jsxs)("div",{style:{background:"white",padding:25,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.9s ease-out"},children:[(0,pm.jsx)("h3",{style:{background:"var(--gradient-forest)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:15},children:"\ud83c\udf1f Wellness Resources & Support"}),(0,pm.jsx)("p",{style:{color:"var(--gray-dark)",marginBottom:20},children:"Click a category to explore resources that help with detox, anxiety, sleep, and more!"}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:15,marginBottom:20},children:_m.map(e=>(0,pm.jsxs)("div",{onClick:()=>w(b===e.id?null:e.id),style:{padding:20,background:b===e.id?e.lightColor:"var(--gray-lightest)",borderRadius:12,textAlign:"center",cursor:"pointer",border:b===e.id?"3px solid ".concat(e.color):"3px solid transparent",transition:"all 0.3s ease",transform:b===e.id?"scale(1.05)":"scale(1)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="var(--shadow-lg)"},onMouseLeave:t=>{t.currentTarget.style.transform=b===e.id?"scale(1.05)":"scale(1)",t.currentTarget.style.boxShadow="none"},children:[(0,pm.jsx)("div",{style:{fontSize:"3rem",marginBottom:8},children:e.icon}),(0,pm.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:600,color:e.color},children:e.title})]},e.id))}),b&&(0,pm.jsxs)("div",{style:{background:null===(e=_m.find(e=>e.id===b))||void 0===e?void 0:e.lightColor,padding:20,borderRadius:12,border:"2px solid ".concat(null===(t=_m.find(e=>e.id===b))||void 0===t?void 0:t.color),animation:"slideInUp 0.4s ease-out"},children:[(0,pm.jsxs)("h4",{style:{color:null===(n=_m.find(e=>e.id===b))||void 0===n?void 0:n.color,marginTop:0,marginBottom:15,display:"flex",alignItems:"center",gap:10},children:[(0,pm.jsx)("span",{style:{fontSize:"1.5rem"},children:null===(i=_m.find(e=>e.id===b))||void 0===i?void 0:i.icon}),null===(o=_m.find(e=>e.id===b))||void 0===o?void 0:o.title]}),(0,pm.jsx)("div",{style:{display:"grid",gap:12},children:null===(s=_m.find(e=>e.id===b))||void 0===s?void 0:s.resources.map((e,t)=>{var n,r,i;return(0,pm.jsxs)("div",{style:{padding:15,background:"white",borderRadius:8,boxShadow:"var(--shadow-sm)"},children:[(0,pm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,pm.jsx)("strong",{style:{color:null===(n=_m.find(e=>e.id===b))||void 0===n?void 0:n.color,fontSize:"1.05rem"},children:e.name}),e.frequency&&(0,pm.jsx)("span",{style:{fontSize:"0.75rem",background:null===(r=_m.find(e=>e.id===b))||void 0===r?void 0:r.lightColor,padding:"4px 8px",borderRadius:4,color:null===(i=_m.find(e=>e.id===b))||void 0===i?void 0:i.color,fontWeight:600},children:e.frequency})]}),(0,pm.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--joy-teal)",fontWeight:600,marginBottom:6},children:["\u2713 ",e.benefits]}),(0,pm.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--gray-dark)",lineHeight:1.5},children:e.description}),(0,pm.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:e.helps.map(e=>(0,pm.jsx)("span",{style:{fontSize:"0.7rem",background:"var(--gray-lightest)",padding:"3px 8px",borderRadius:12,color:"var(--gray-medium)",textTransform:"uppercase",fontWeight:600},children:e},e))})]},t)})}),(0,pm.jsx)("button",{onClick:()=>w(null),style:{marginTop:15,padding:"10px 20px",background:null===(a=_m.find(e=>e.id===b))||void 0===a?void 0:a.color,color:"white",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,width:"100%"},children:"\u2190 Back to Categories"})]})]}),(0,pm.jsxs)("div",{style:{background:"var(--gradient-rainbow)",backgroundSize:"200% 200%",padding:20,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",marginBottom:30,boxShadow:"var(--shadow-lg)",animation:"slideInUp 1s ease-out"},children:[(0,pm.jsx)("h2",{style:{color:"white",marginTop:0},children:"\ud83d\ude80 Keep Going! \ud83d\ude80"}),(0,pm.jsx)("p",{style:{color:"rgba(255,255,255,0.95)"},children:"Log your mood, track your progress, and connect with our amazing community!"})]})]}),d&&d.frequency&&f>0&&(0,pm.jsx)(Rm,{frequency:d.frequency,yearsOfUse:d.yearsOfUse,currentDay:f}),d&&f>0&&l&&(0,pm.jsx)(Am,{userId:l.uid,currentDay:f,onSave:()=>console.log("Symptoms saved")}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:20},children:[{path:"/checkin",label:"Daily Check-in",icon:"\ud83d\udcdd",color:"var(--gradient-warm)"},{path:"/calendar",label:"Emotion Calendar",icon:"\ud83d\udcc5",color:"var(--gradient-ocean)"},{path:"/chat",label:"Community Chat",icon:"\ud83d\udcac",color:"var(--gradient-cool)"},{path:"/nutrition",label:"Nutrition Center",icon:"\ud83e\udd57",color:"var(--gradient-forest)"},{path:"/estimator",label:"Metabolite Estimator",icon:"\u2697\ufe0f",color:"var(--gradient-sunset)"},{path:"/profile",label:"My Profile",icon:"\ud83d\udc64",color:"var(--gradient-ocean)"},{path:"/donations",label:"\ud83d\udc9a Support Us (Donations)",icon:"\ud83c\udf81",color:"var(--gradient-warm)",isSpecial:!0}].map(e=>(0,pm.jsx)(yt,{to:e.path,style:{textDecoration:"none",color:"inherit",animation:"slideInUp 0.6s ease-out forwards"},children:(0,pm.jsxs)("div",{style:{background:e.color,backgroundSize:"200% 200%",padding:20,borderRadius:"var(--radius-lg)",color:"white",textAlign:"center",boxShadow:"var(--shadow-md)",transition:"all var(--transition-normal)",cursor:"pointer",transform:"scale(1)",border:"none"},onMouseEnter:e=>{const t=e.currentTarget;t.style.transform="translateY(-8px) scale(1.05)",t.style.boxShadow="var(--shadow-xl)"},onMouseLeave:e=>{const t=e.currentTarget;t.style.transform="scale(1)",t.style.boxShadow="var(--shadow-md)"},children:[(0,pm.jsx)("div",{style:{fontSize:"3rem",marginBottom:12,animation:"bounce 2s ease-in-out infinite"},children:e.icon}),(0,pm.jsx)("h3",{style:{color:"white",marginTop:0,fontSize:"1.2rem",fontWeight:700,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:e.label}),(0,pm.jsx)("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"0.95rem",margin:0,fontWeight:500},children:e.isSpecial?"Make a difference":"Click to explore"})]})},e.path))}),(0,pm.jsx)("div",{style:{textAlign:"center",marginTop:40,padding:20,background:"white",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:(0,pm.jsx)("p",{style:{fontSize:"1.1rem",color:"var(--gray-dark)"},children:"\ud83d\udcaa Remember: Every day you stay strong, you're building a better tomorrow!"})})]}),c&&(0,pm.jsx)(Em,{onClose:()=>u(!1),onSubmit:k})]})}const Dm=e=>7===e?"bronze":20===e?"silver":40===e?"gold":null,jm=()=>new Promise((e,t)=>{const n=indexedDB.open("tbreak-offline-db",1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("daily-entries")){const e=t.createObjectStore("daily-entries",{keyPath:"id"});e.createIndex("userId","userId",{unique:!1}),e.createIndex("date","date",{unique:!1})}t.objectStoreNames.contains("pending-changes")||t.createObjectStore("pending-changes",{keyPath:"id"}),t.objectStoreNames.contains("metadata")||t.createObjectStore("metadata",{keyPath:"key"})}}),Om=async(e,t,n)=>{const r=await jm(),i="".concat(e,"-").concat(Date.now());return new Promise((o,s)=>{const a=r.transaction(["pending-changes"],"readwrite").objectStore("pending-changes").put({id:i,endpoint:e,method:t,data:n,timestamp:Date.now(),synced:!1});a.onerror=()=>s(a.error),a.onsuccess=()=>o(i)})},Lm=()=>navigator.onLine,Mm="dailyEntries",Fm=async e=>{try{const r=Jf(cm,Mm,e.id);await nm(r,e,{merge:!0});try{const n=1===(t=e.dayNumber)?5:t%7===0?10:1;await wm(e.userId,{coins:n,medal:Dm(e.dayNumber)})}catch(n){console.warn("Failed to update user rewards:",n)}}catch(r){if(!Lm())return console.log("Offline: Queuing daily entry for sync"),await(async e=>{const t=await jm();return new Promise((n,r)=>{const i=t.transaction(["daily-entries"],"readwrite").objectStore("daily-entries").put((0,a.A)((0,a.A)({},e),{},{_synced:!0,_pendingDelete:!1}));i.onerror=()=>r(i.error),i.onsuccess=()=>n()})})(e),await Om("/dailyEntries/".concat(e.id),"PUT",e),{success:!0,queued:!0};throw r}var t},Um=async(e,t)=>{try{const n=Mp(Yf(cm,Mm),Up("userId","==",e),Up("dayNumber","==",t)),r=await tm(n);return r.empty?null:r.docs[0].data()}catch(n){if(!Lm()){console.log("Offline: Fetching daily entry from local cache");const n=await(async e=>{const t=await jm();return new Promise((n,r)=>{const i=t.transaction(["daily-entries"],"readonly").objectStore("daily-entries").index("userId").getAll(e);i.onerror=()=>r(i.error),i.onsuccess=()=>n(i.result||[])})})(e);return n.find(e=>e.dayNumber===t)||null}throw n}};function Vm(){var e;const{user:t,profile:n}=gm(),[i,o]=(0,r.useState)("\ud83d\ude42"),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(0),[u,d]=(0,r.useState)("moderate"),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),v=null!==n&&void 0!==n&&n.startDate?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return 1;const n=new Date(e);if(isNaN(n.getTime()))return 1;const r=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),i=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),o=Math.floor((i-r)/864e5);return Math.max(1,o+1)}(n.startDate):1,b=[{emoji:"\ud83d\ude14",label:"Struggling",color:"var(--gradient-sunset)"},{emoji:"\ud83d\ude10",label:"Neutral",color:"var(--gradient-cool)"},{emoji:"\ud83d\ude42",label:"Good",color:"var(--gradient-forest)"},{emoji:"\ud83d\ude04",label:"Excellent",color:"linear-gradient(135deg, #ff6b35 0%, #2ecc71 100%)"}];(0,r.useEffect)(()=>{const e=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderate";const r=Math.max(0,Number(e)||0),i={light:1,moderate:3,heavy:7,chronic:14},o=null!==(t=i[n])&&void 0!==t?t:i.moderate,s=100*(1-Math.pow(.5,r/o)),a=Math.max(0,Math.min(100,s));return Math.round(10*a)/10}(l,u);y(e)},[l,u]),(0,r.useEffect)(()=>{if(!t)return;let e=!0;return(async()=>{try{const n=await Um(t.uid,v);if(!e||!n)return;"number"===typeof n.metaboliteClearPercent&&y(n.metaboliteClearPercent)}catch(n){}})(),()=>{e=!1}},[t]);const w=v/40*100;return(0,pm.jsx)("div",{style:{padding:20,minHeight:"100vh",background:"linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(46, 204, 113, 0.05) 100%)"},children:(0,pm.jsxs)("div",{style:{maxWidth:600,margin:"0 auto"},children:[(0,pm.jsxs)("div",{style:{textAlign:"center",marginBottom:30,animation:"slideInDown 0.6s ease-out"},children:[(0,pm.jsx)("h1",{style:{fontSize:"2.5rem",background:"var(--gradient-sunset)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10},children:"\ud83d\udccb Daily Check-in"}),(0,pm.jsxs)("div",{style:{display:"inline-block",padding:"12px 24px",background:"var(--gradient-ocean)",color:"white",borderRadius:"var(--radius-lg)",fontWeight:600,fontSize:"1.1rem"},children:["Day ",v," / 40"]})]}),(0,pm.jsxs)("div",{style:{marginBottom:30,background:"white",padding:20,borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",animation:"slideInUp 0.6s ease-out"},children:[(0,pm.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--gray-medium)",marginBottom:8},children:["Progress: ",Math.round(w),"%"]}),(0,pm.jsx)("div",{style:{width:"100%",height:12,background:"var(--gray-light)",borderRadius:"var(--radius-md)",overflow:"hidden"},children:(0,pm.jsx)("div",{style:{width:"".concat(w,"%"),height:"100%",background:"var(--gradient-sunset)",transition:"width 0.5s ease-out"}})})]}),(0,pm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.65s ease-out"},children:[(0,pm.jsx)("label",{style:{display:"block",fontSize:"1.1rem",fontWeight:700,marginBottom:16,color:"var(--joy-purple)"},children:"How do you feel today? \ud83d\ude0a"}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:b.map(e=>(0,pm.jsx)("button",{onClick:()=>o(e.emoji),className:i===e.emoji?"active":"",style:{background:i===e.emoji?e.color:"white",color:i===e.emoji?"white":"var(--gray-dark)",border:i===e.emoji?"none":"2px solid var(--gray-light)",fontSize:"2rem",padding:16,borderRadius:"var(--radius-lg)",cursor:"pointer",transition:"all var(--transition-normal)",transform:i===e.emoji?"scale(1.1)":"scale(1)",boxShadow:i===e.emoji?"var(--shadow-lg)":"var(--shadow-sm)"},children:e.emoji},e.emoji))}),i&&(0,pm.jsx)("p",{style:{textAlign:"center",marginTop:16,color:"var(--joy-teal)",fontWeight:600,animation:"slideInUp 0.3s ease-out"},children:null===(e=b.find(e=>e.emoji===i))||void 0===e?void 0:e.label})]}),(0,pm.jsx)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.7s ease-out"},children:(0,pm.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer",fontWeight:600,fontSize:"1.05rem",color:"var(--gray-dark)"},children:[(0,pm.jsx)("input",{type:"checkbox",checked:s,onChange:e=>a(e.target.checked),style:{cursor:"pointer",width:20,height:20}}),(0,pm.jsxs)("span",{children:[s?"\u274c":"\u2705"," I used cannabis today"]})]})}),(0,pm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.75s ease-out"},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12,color:"var(--joy-purple)"},children:"Days since last use: \ud83d\udcc5"}),(0,pm.jsx)("input",{type:"number",min:0,value:l,onChange:e=>c(Number(e.target.value)),style:{width:"100%",padding:12,border:"2px solid var(--gray-light)",borderRadius:"var(--radius-md)",fontSize:"1rem",transition:"all var(--transition-normal)"}})]}),(0,pm.jsxs)("div",{style:{background:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.8s ease-out"},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:12,color:"var(--joy-purple)"},children:"Usage frequency: \ud83d\udcca"}),(0,pm.jsxs)("select",{value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:"var(--radius-md)",fontSize:"1rem",background:"white",cursor:"pointer",transition:"all var(--transition-normal)"},children:[(0,pm.jsx)("option",{value:"light",children:"\ud83d\udfe2 Light"}),(0,pm.jsx)("option",{value:"moderate",children:"\ud83d\udfe1 Moderate"}),(0,pm.jsx)("option",{value:"heavy",children:"\ud83d\udd34 Heavy"}),(0,pm.jsx)("option",{value:"chronic",children:"\ud83d\udd34\ud83d\udd34 Chronic"})]})]}),null!==g&&(0,pm.jsxs)("div",{style:{background:"var(--gradient-warm)",color:"white",padding:20,borderRadius:"var(--radius-lg)",marginBottom:20,boxShadow:"var(--shadow-lg)",animation:"slideInUp 0.85s ease-out"},children:[(0,pm.jsx)("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:8},children:"Estimated metabolite clearance"}),(0,pm.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:700,marginBottom:12},children:[g,"% \ud83e\uddea"]}),(0,pm.jsx)("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:1.5},children:"Based on your usage pattern, your system should be mostly clear soon!"})]}),p&&(0,pm.jsx)("div",{style:{background:p.includes("Error")?"var(--gradient-sunset)":"var(--gradient-forest)",color:"white",padding:16,borderRadius:"var(--radius-lg)",marginBottom:20,textAlign:"center",fontWeight:600,animation:"slideInUp 0.4s ease-out"},children:p}),(0,pm.jsx)("button",{onClick:async()=>{if(!t)return void m("You need to be logged in to save.");f(!0),m("");const e={id:"".concat(t.uid,"-").concat(v),userId:t.uid,dayNumber:v,date:(new Date).toISOString(),morningMood:i,usedToday:s,metaboliteClearPercent:null!==g&&void 0!==g?g:void 0};try{await Fm(e),m("\u2728 Check-in saved! Great job! \u2728"),setTimeout(()=>m(""),3e3)}catch(n){console.error(n),m("\u274c Error saving check-in.")}finally{f(!1)}},disabled:h,style:{width:"100%",padding:18,fontSize:"1.1rem",fontWeight:700,background:h?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:"var(--radius-lg)",cursor:h?"not-allowed":"pointer",transition:"all var(--transition-normal)",boxShadow:"var(--shadow-lg)",transform:h?"scale(0.98)":"scale(1)",animation:"slideInUp 0.9s ease-out"},children:h?"\ud83d\udcbe Saving...":"\u2728 Save My Check-in \u2728"})]})})}function zm(e){let{entries:t,onSelectDay:n}=e;const r=Array.from({length:40},(e,t)=>t+1);return(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 40px)",gap:"6px",padding:"20px"},children:r.map(e=>{const r=t.find(t=>t.dayNumber===e);return(0,pm.jsx)("div",{onClick:()=>n(r||null),style:{width:40,height:40,borderRadius:8,backgroundColor:(i=null===r||void 0===r?void 0:r.morningMood,o=null===r||void 0===r?void 0:r.usedToday,o?"#ff4d4d":i?"\ud83d\ude1e"===i?"#4db8ff":"\ud83d\ude10"===i?"#f4d03f":"\ud83d\ude42"===i?"#82e0aa":"\ud83d\ude0e"===i?"#f7c600":"#ccc":"#ccc"),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",fontSize:13,color:"#000"},children:e},e);var i,o})})}function Bm(){const{user:e}=gm(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;(async()=>{const t=[];for(let n=1;n<=40;n++){const r=await Um(e.uid,n);r&&t.push(r)}n(t)})()},[e]),(0,pm.jsxs)("div",{style:{padding:20},children:[(0,pm.jsx)("h1",{children:"Emotion Calendar"}),(0,pm.jsx)("p",{children:"Click any day to view notes."}),(0,pm.jsx)(zm,{entries:t,onSelectDay:e=>o(e)}),i&&(0,pm.jsxs)("div",{style:{marginTop:20,padding:10,border:"1px solid #ccc",borderRadius:8},children:[(0,pm.jsxs)("h3",{children:["Day ",i.dayNumber]}),(0,pm.jsxs)("p",{children:["Mood: ",i.morningMood]}),(0,pm.jsxs)("p",{children:["Used: ",i.usedToday?"Yes":"No"]}),(0,pm.jsx)("p",{children:i.journal||"No journal entry"})]})]})}const Wm="chatMessages",Hm=async()=>{try{const e=Mp(Yf(cm,Wm),Bp("createdAt","desc")),t=await tm(e);if(t.size>300){const e=t.size-300,n=t.docs.slice(-e);console.log("Cleaning up ".concat(e," old messages..."));const r=n.map(e=>{return om(ls((t=Jf(cm,Wm,e.id)).firestore,tp),[new Lc(t._key,_c.none())]);var t});await Promise.all(r),console.log("\u2705 Cleaned up ".concat(e," old messages"))}}catch(e){console.error("Error cleaning up old messages:",e)}},qm=(0,r.createContext)(void 0),Km=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(()=>navigator.onLine),[o,s]=(0,r.useState)(0),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{i(!0),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{const t=e.sync;t&&t.register("sync-offline-data").catch(e=>{console.log("Background sync registration failed (may be unsupported):",e)})})},t=()=>{i(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{const e=async()=>{const e=await(async()=>{const e=await jm();return new Promise((t,n)=>{const r=e.transaction(["pending-changes"],"readonly").objectStore("pending-changes").getAll();r.onerror=()=>n(r.error),r.onsuccess=()=>t(r.result||[])})})();s(e.length)};e(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{var n,r,i;"SYNC_COMPLETE"===(null===(n=t.data)||void 0===n?void 0:n.type)?e():"SYNC_START"===(null===(r=t.data)||void 0===r?void 0:r.type)?l(!0):"SYNC_ERROR"===(null===(i=t.data)||void 0===i?void 0:i.type)&&l(!1)});const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,pm.jsx)(qm.Provider,{value:{isOnline:n,pendingChangesCount:o,isSyncing:a},children:t})},Gm=()=>{const e=(0,r.useContext)(qm);if(!e)throw new Error("useOfflineContext must be used within OfflineProvider");return e},Qm=[{id:"smile",display:"\ud83d\ude0a",category:"Classic",name:"Happy Face"},{id:"cool",display:"\ud83d\ude0e",category:"Classic",name:"Cool"},{id:"star",display:"\u2b50",category:"Classic",name:"Star"},{id:"fire",display:"\ud83d\udd25",category:"Classic",name:"Fire"},{id:"rocket",display:"\ud83d\ude80",category:"Classic",name:"Rocket"},{id:"brain",display:"\ud83e\udde0",category:"Classic",name:"Brain"},{id:"heart",display:"\u2764\ufe0f",category:"Classic",name:"Heart"},{id:"strong",display:"\ud83d\udcaa",category:"Classic",name:"Strong"},{id:"lion",display:"\ud83e\udd81",category:"Nature",name:"Lion"},{id:"eagle",display:"\ud83e\udd85",category:"Nature",name:"Eagle"},{id:"wolf",display:"\ud83d\udc3a",category:"Nature",name:"Wolf"},{id:"phoenix",display:"\ud83d\udd25\ud83d\udc26",category:"Nature",name:"Phoenix"},{id:"tree",display:"\ud83c\udf33",category:"Nature",name:"Tree"},{id:"mountain",display:"\ud83c\udfd4\ufe0f",category:"Nature",name:"Mountain"},{id:"ocean",display:"\ud83c\udf0a",category:"Nature",name:"Ocean"},{id:"sun",display:"\u2600\ufe0f",category:"Nature",name:"Sun"},{id:"warrior",display:"\u2694\ufe0f",category:"Heroes",name:"Warrior"},{id:"shield",display:"\ud83d\udee1\ufe0f",category:"Heroes",name:"Shield"},{id:"crown",display:"\ud83d\udc51",category:"Heroes",name:"Crown"},{id:"ninja",display:"\ud83e\udd77",category:"Heroes",name:"Ninja"},{id:"viking",display:"\u26a1",category:"Heroes",name:"Viking"},{id:"samurai",display:"\ud83d\udde1\ufe0f",category:"Heroes",name:"Samurai"},{id:"book",display:"\ud83d\udcda",category:"Wisdom",name:"Scholar"},{id:"lightbulb",display:"\ud83d\udca1",category:"Wisdom",name:"Thinker"},{id:"crystal",display:"\ud83d\udd2e",category:"Wisdom",name:"Mystic"},{id:"telescope",display:"\ud83d\udd2d",category:"Wisdom",name:"Explorer"},{id:"atom",display:"\u269b\ufe0f",category:"Wisdom",name:"Scientist"},{id:"lotus",display:"\ud83e\uddd8",category:"Zen",name:"Meditator"},{id:"peace",display:"\u262e\ufe0f",category:"Zen",name:"Peace"},{id:"yin-yang",display:"\u262f\ufe0f",category:"Zen",name:"Balance"},{id:"leaf",display:"\ud83c\udf43",category:"Zen",name:"Zen Leaf"},{id:"bamboo",display:"\ud83c\udf8b",category:"Zen",name:"Bamboo"},{id:"controller",display:"\ud83c\udfae",category:"Gaming",name:"Gamer"},{id:"dice",display:"\ud83c\udfb2",category:"Gaming",name:"Dice"},{id:"trophy",display:"\ud83c\udfc6",category:"Gaming",name:"Champion"},{id:"medal",display:"\ud83e\udd47",category:"Gaming",name:"Gold Medal"},{id:"einstein",display:"\ud83d\udc68\u200d\ud83d\udd2c",category:"Historical",name:"Einstein"},{id:"philosopher",display:"\ud83e\uddd9",category:"Historical",name:"Philosopher"},{id:"artist",display:"\ud83d\udc68\u200d\ud83c\udfa8",category:"Historical",name:"Artist"},{id:"musician",display:"\ud83c\udfb5",category:"Historical",name:"Musician"}],Ym=["Brave","Wise","Strong","Calm","Swift","Noble","Fierce","Bright","Bold","Silent","Free","Rising","Golden","Silver","Crystal","Mystic","Ancient","Eternal","Phoenix","Dragon","Tiger","Eagle","Wolf","Lion","Storm","Thunder","Ocean","Mountain","Forest","Cosmic","Lunar","Solar"],Jm=["Warrior","Sage","Guardian","Seeker","Wanderer","Dreamer","Phoenix","Spirit","Soul","Knight","Monk","Ranger","Scholar","Hero","Champion","Voyager","Pioneer","Explorer","Sentinel","Defender","Pathfinder","Traveler","Nomad","Pilgrim","Keeper","Watcher","Shadow","Light"],Xm=()=>{const e=Ym[Math.floor(Math.random()*Ym.length)],t=Jm[Math.floor(Math.random()*Jm.length)],n=Math.floor(999*Math.random())+1;return"".concat(e).concat(t).concat(n)},$m="firebasestorage.googleapis.com",Zm="storageBucket";class eg extends Tt.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(rg(e),"Firebase Storage: ".concat(t," (").concat(rg(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,eg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var tg,ng;function rg(e){return"storage/"+e}function ig(){return new eg(tg.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function og(){return new eg(tg.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sg(){return new eg(tg.CANCELED,"User canceled the upload/download.")}function ag(){return new eg(tg.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lg(e){return new eg(tg.INVALID_ARGUMENT,e)}function cg(){return new eg(tg.APP_DELETED,"The Firebase app was deleted.")}function ug(e,t){return new eg(tg.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function dg(e){throw new eg(tg.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(tg||(tg={}));class hg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=hg.makeFromUrl(e,t)}catch(zy){return new hg(e,"")}if(""===n.path)return n;throw r=e,new eg(tg.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===$m?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new hg(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new eg(tg.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class fg{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function pg(e){return"string"===typeof e||e instanceof String}function mg(e){return gg()&&e instanceof Blob}function gg(){return"undefined"!==typeof Blob}function yg(e,t,n,r){if(r<t)throw lg("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw lg("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function vg(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function bg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function wg(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ng||(ng={}));class xg{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Sg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ng.NO_ERROR,i=n.getStatus();if(!t||wg(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ng.ABORT;return void e(!1,new Sg(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Sg(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(zy){r(zy)}else if(null!==i){const e=ig();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?cg():sg())}else{r(og())}};this.canceled_?t(0,new Sg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Sg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function _g(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Eg(){const e=_g();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(gg())return new Blob(n);throw new eg(tg.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function kg(e){if("undefined"===typeof atob)throw t="base-64",new eg(tg.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Tg="raw",Cg="base64",Ig="base64url",Ag="data_url";class Rg{constructor(e,t){this.data=e,this.contentType=t||null}}function Ng(e,t){switch(e){case Tg:return new Rg(Pg(t));case Cg:case Ig:return new Rg(Dg(e,t));case Ag:return new Rg(function(e){const t=new jg(e);return t.base64?Dg(Cg,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(zy){throw ug(Ag,"Malformed data URL.")}return Pg(t)}(t.rest)}(t),new jg(t).contentType)}throw ig()}function Pg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Dg(e,t){switch(e){case Cg:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ug(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Ig:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ug(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kg(t)}catch(zy){if(zy.message.includes("polyfill"))throw zy;throw ug(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jg{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ug(Ag,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Og{constructor(e,t){let n=0,r="";mg(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(mg(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Og(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Og(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(gg()){const e=t.map(e=>e instanceof Og?e.data_:e);return new Og(Eg.apply(null,e))}{const e=t.map(e=>pg(e)?Ng(Tg,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Og(r,!0)}}uploadData(){return this.data_}}function Lg(e){let t;try{t=JSON.parse(e)}catch(zy){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Mg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Fg(e,t){return t}class Ug{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Fg}}let Vg=null;function zg(){if(Vg)return Vg;const e=[];e.push(new Ug("bucket")),e.push(new Ug("generation")),e.push(new Ug("metageneration")),e.push(new Ug("name","fullPath",!0));const t=new Ug("name");t.xform=function(e,t){return function(e){return!pg(e)||e.length<2?e:Mg(e)}(t)},e.push(t);const n=new Ug("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ug("timeCreated")),e.push(new Ug("updated")),e.push(new Ug("md5Hash",null,!0)),e.push(new Ug("cacheControl",null,!0)),e.push(new Ug("contentDisposition",null,!0)),e.push(new Ug("contentEncoding",null,!0)),e.push(new Ug("contentLanguage",null,!0)),e.push(new Ug("contentType",null,!0)),e.push(new Ug("metadata","customMetadata",!0)),Vg=e,Vg}function Bg(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new hg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Wg(e,t,n){const r=Lg(t);if(null===r)return null;return Bg(e,r,n)}function Hg(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class qg{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kg(e){if(!e)throw ig()}function Gg(e,t){return function(n,r){const i=Wg(e,r,t);return Kg(null!==i),i}}function Qg(e,t){return function(n,r){const i=Wg(e,r,t);return Kg(null!==i),function(e,t,n,r){const i=Lg(t);if(null===i)return null;if(!pg(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return vg("/b/"+s(i)+"/o/"+s(o),n,r)+bg({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Yg(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new eg(tg.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new eg(tg.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new eg(tg.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new eg(tg.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Jg(e){const t=Yg(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new eg(tg.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Xg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function $g(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Xg(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Hg(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Og.getBlob(c,r,u);if(null===d)throw ag();const h={name:l.fullPath},f=vg(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new qg(f,"POST",Gg(e,n),p);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Yg(t),m}class Zg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ng.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ng.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ng.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw dg("cannot .send() more than once");if((0,Tt.zJ)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(zy){return-1}}getResponse(){if(!this.sent_)throw dg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ey extends Zg{initXhr(){this.xhr_.responseType="text"}}function ty(){return new ey}class ny{constructor(e,t){this._service=e,this._location=t instanceof hg?t:hg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ny(e,t)}get root(){const e=new hg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new hg(this._location.bucket,e);return new ny(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new eg(tg.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ry(e,t,n){e._throwIfRoot("uploadBytes");const r=$g(e.storage,e._location,zg(),new Og(t,!0),n);return e.storage.makeRequestWithTokens(r,ty).then(t=>({metadata:t,ref:e}))}function iy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=vg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new qg(r,"GET",Qg(e,n),i);return o.errorHandler=Jg(t),o}(e.storage,e._location,zg());return e.storage.makeRequestWithTokens(t,ty).then(e=>{if(null===e)throw new eg(tg.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function oy(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new hg(e._location.bucket,n);return new ny(e.storage,r)}function sy(e,t){if(e instanceof cy){const n=e;if(null==n._bucket)throw new eg(tg.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Zm+"' property when initializing the app?");const r=new ny(n,n._bucket);return null!=t?sy(r,t):r}return void 0!==t?oy(e,t):e}function ay(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof cy)return new ny(e,t);throw lg("To use ref(service, url), the first argument must be a Storage instance.")}return sy(e,t)}function ly(e,t){const n=null===t||void 0===t?void 0:t[Zm];return null==n?null:hg.makeFromBucketSpec(n,e)}class cy{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=$m,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?hg.makeFromBucketSpec(r,this._host):ly(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=hg.makeFromBucketSpec(this._url,e):this._bucket=ly(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,kt.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ny(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new fg(cg());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=bg(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new xg(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const uy="@firebase/storage",dy="0.14.0",hy="storage";function fy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,kt.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,Tt.Ku)(e);const n=(0,kt.j6)(e,hy).getImmediate({identifier:t}),r=(0,Tt.yU)("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=(0,Tt.zJ)(t);i&&((0,Tt.gE)("https://".concat(e.host,"/b")),(0,Tt.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:(0,Tt.Fy)(o,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function py(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new cy(r,i,o,n,kt.MF)}function my(e){var t;let{onComplete:n,onCancel:i}=e;const{user:o}=gm(),[s,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("Classic"),[h,f]=(0,r.useState)([]),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f([Xm(),Xm(),Xm()])},[]);const w=async()=>{if(!p||!o)return null;try{b(!0);const n=fy(),r="avatars/".concat(o.uid,"_").concat(Date.now(),".jpg"),i=(e=n,t=r,ay(e=(0,Tt.Ku)(e),t)),s=await x(p,200,200);await function(e,t,n){return ry(e=(0,Tt.Ku)(e),t,n)}(i,s);const a=await function(e){return iy(e=(0,Tt.Ku)(e))}(i);return a}catch(n){return console.error("Error uploading avatar:",n),alert("Failed to upload avatar. Please try again."),null}finally{b(!1)}var e,t},x=(e,t,n)=>new Promise((r,i)=>{const o=new Image,s=document.createElement("canvas"),a=s.getContext("2d");o.onload=()=>{let e=o.width,l=o.height;e>l?e>t&&(l*=t/e,e=t):l>n&&(e*=n/l,l=n),s.width=e,s.height=l,null===a||void 0===a||a.drawImage(o,0,0,e,l),s.toBlob(e=>{e?r(e):i(new Error("Failed to resize image"))},"image/jpeg",.8)},o.onerror=()=>i(new Error("Failed to load image")),o.src=URL.createObjectURL(e)}),S=(()=>{const e=Qm.map(e=>e.category);return Array.from(new Set(e))})();return(0,pm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,pm.jsxs)("div",{style:{background:"white",borderRadius:"var(--radius-lg)",padding:30,maxWidth:600,width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",animation:"slideInUp 0.4s ease-out"},children:[(0,pm.jsx)("h2",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:10},children:"\ud83c\udfad Set Up Your Chat Identity"}),(0,pm.jsx)("p",{style:{color:"var(--gray-dark)",marginBottom:25},children:"Choose an anonymous display name and avatar to protect your privacy in the community chat."}),(0,pm.jsxs)("div",{style:{marginBottom:25},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:10},children:"Display Name (Anonymous)"}),(0,pm.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Enter a name or pick a suggestion below",maxLength:20,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}}),(0,pm.jsxs)("div",{style:{marginTop:10},children:[(0,pm.jsx)("div",{style:{fontSize:"0.85rem",color:"var(--gray-medium)",marginBottom:8},children:"\ud83d\udca1 Suggested anonymous names:"}),(0,pm.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[h.map(e=>(0,pm.jsx)("button",{onClick:()=>a(e),style:{padding:"6px 12px",background:s===e?"var(--joy-teal)":"var(--gray-lightest)",color:s===e?"white":"var(--gray-dark)",border:"none",borderRadius:6,cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:e},e)),(0,pm.jsx)("button",{onClick:()=>{f([Xm(),Xm(),Xm()])},style:{padding:"6px 12px",background:"white",color:"var(--joy-purple)",border:"2px solid var(--joy-purple)",borderRadius:6,cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"\ud83d\udd04 More"})]})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:25},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:10},children:"Choose Your Avatar"}),(0,pm.jsxs)("div",{style:{padding:15,background:"var(--gray-lightest)",borderRadius:8,marginBottom:15,border:"custom"===l?"3px solid var(--joy-teal)":"2px solid transparent"},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,pm.jsxs)("label",{style:{flex:1,padding:"10px 16px",background:"var(--gradient-sunset)",color:"white",borderRadius:8,cursor:"pointer",textAlign:"center",fontWeight:600,fontSize:"0.95rem"},children:["\ud83d\udcf8 Upload Your Photo",(0,pm.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return void alert("Image must be less than 5MB");if(!n.type.startsWith("image/"))return void alert("Please select an image file");m(n),c("custom");const e=new FileReader;e.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n)}},style:{display:"none"}})]}),g&&(0,pm.jsxs)("div",{style:{position:"relative"},children:[(0,pm.jsx)("img",{src:g,alt:"Preview",style:{width:60,height:60,borderRadius:"50%",objectFit:"cover",border:"3px solid var(--joy-teal)"}}),(0,pm.jsx)("button",{onClick:()=>{m(null),y(null),c("")},style:{position:"absolute",top:-5,right:-5,background:"#f44336",color:"white",border:"none",borderRadius:"50%",width:20,height:20,cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]})]}),(0,pm.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--gray-medium)",marginTop:8},children:"Max 5MB \u2022 JPG, PNG, GIF \u2022 Will be resized to 200x200px"})]}),(0,pm.jsx)("div",{style:{textAlign:"center",color:"var(--gray-medium)",fontSize:"0.9rem",marginBottom:10},children:"\u2014 OR choose an emoji avatar \u2014"}),(0,pm.jsx)("div",{style:{display:"flex",gap:8,marginBottom:15,overflowX:"auto",paddingBottom:8},children:S.map(e=>(0,pm.jsx)("button",{onClick:()=>d(e),style:{padding:"8px 16px",background:u===e?"var(--gradient-ocean)":"var(--gray-lightest)",color:u===e?"white":"var(--gray-dark)",border:"none",borderRadius:8,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,whiteSpace:"nowrap"},children:e},e))}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(70px, 1fr))",gap:10,padding:15,background:"var(--gray-lightest)",borderRadius:8,maxHeight:300,overflowY:"auto"},children:(_=u,Qm.filter(e=>e.category===_)).map(e=>(0,pm.jsx)("div",{onClick:()=>c(e.id),title:e.name,style:{padding:10,background:l===e.id?"var(--joy-teal-light)":"white",border:l===e.id?"3px solid var(--joy-teal)":"2px solid transparent",borderRadius:8,cursor:"pointer",textAlign:"center",fontSize:"2rem",transition:"all 0.2s ease",aspectRatio:"1"},children:e.display},e.id))})]}),s&&l&&(0,pm.jsxs)("div",{style:{padding:15,background:"var(--joy-teal-light)",borderRadius:8,marginBottom:20,border:"2px solid var(--joy-teal)"},children:[(0,pm.jsx)("div",{style:{fontSize:"0.85rem",color:"var(--gray-dark)",marginBottom:8},children:"Preview:"}),(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:["custom"===l&&g?(0,pm.jsx)("img",{src:g,alt:"Avatar",style:{width:50,height:50,borderRadius:"50%",objectFit:"cover"}}):(0,pm.jsx)("div",{style:{fontSize:"2.5rem"},children:null===(t=Qm.find(e=>e.id===l))||void 0===t?void 0:t.display}),(0,pm.jsxs)("div",{children:[(0,pm.jsx)("div",{style:{fontWeight:700,color:"var(--joy-teal)",fontSize:"1.1rem"},children:s}),(0,pm.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--gray-medium)"},children:"This is how you'll appear in chat"})]})]})]}),(0,pm.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,pm.jsx)("button",{onClick:i,style:{flex:1,padding:12,background:"white",color:"var(--gray-dark)",border:"2px solid var(--gray-light)",borderRadius:8,cursor:"pointer",fontSize:"1rem",fontWeight:600},children:"Cancel"}),(0,pm.jsx)("button",{onClick:async()=>{if(!s.trim()||!l)return;let e;"custom"===l&&p&&(e=await w()||void 0,!e)||n(s.trim(),l,e)},disabled:!s.trim()||!l||v,style:{flex:2,padding:12,background:s.trim()&&l&&!v?"var(--gradient-ocean)":"var(--gray-light)",color:"white",border:"none",borderRadius:8,cursor:s.trim()&&l&&!v?"pointer":"not-allowed",fontSize:"1rem",fontWeight:600,opacity:s.trim()&&l&&!v?1:.5},children:v?"\u23f3 Uploading...":"\u2713 Join Chat"})]}),(0,pm.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--gray-medium)",marginTop:15,marginBottom:0,textAlign:"center"},children:"\ud83d\udd12 Your real identity remains private. Only your chosen name and avatar are visible."})]})});var _}function gy(e){let{onAccept:t,onDecline:n}=e;const[i,o]=(0,r.useState)(!1);return(0,pm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20,animation:"fadeIn 0.3s ease-out"},children:(0,pm.jsxs)("div",{style:{background:"white",borderRadius:16,maxWidth:600,width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 40px rgba(0,0,0,0.3)",animation:"slideInUp 0.3s ease-out"},children:[(0,pm.jsxs)("div",{style:{padding:"24px 24px 20px",borderBottom:"2px solid #f0f0f0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px 16px 0 0",color:"white"},children:[(0,pm.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"\ud83d\udcac Community Chat Guidelines"}),(0,pm.jsx)("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",opacity:.95},children:"Please read and accept our community rules"})]}),(0,pm.jsxs)("div",{onScroll:e=>{const t=e.currentTarget;(t.scrollTop/(t.scrollHeight-t.clientHeight)*100>=80||t.scrollHeight<=t.clientHeight)&&!i&&o(!0)},style:{flex:1,overflowY:"auto",padding:24,fontSize:"1rem",lineHeight:1.6,color:"var(--gray-dark)"},children:[(0,pm.jsx)("h3",{style:{color:"#667eea",marginTop:0},children:"\ud83e\udd1d Our Community Values"}),(0,pm.jsx)("p",{children:"T-Break Community Chat is a safe, supportive space for people on their cannabis break journey. By using this chat, you agree to:"}),(0,pm.jsx)("h4",{style:{color:"#667eea",marginTop:20},children:"\u2705 Do:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Be respectful and supportive"})," - We're all in this together"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Share your experiences"})," - Your story can help others"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Encourage others"})," - Celebrate wins, big or small"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Keep it positive"})," - Focus on recovery and growth"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Respect privacy"})," - What's shared here stays here"]})]}),(0,pm.jsx)("h4",{style:{color:"#ff4d4d",marginTop:20},children:"\u274c Don't:"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"No harassment or bullying"})," - Zero tolerance policy"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"No promoting substance use"})," - This is a recovery space"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"No spam or advertising"})," - Keep it relevant"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"No personal attacks"})," - Debate ideas, not people"]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"No sharing personal contact info"})," - Stay safe online"]})]}),(0,pm.jsx)("h4",{style:{color:"#667eea",marginTop:20},children:"\ud83d\udd12 Privacy & Safety"}),(0,pm.jsxs)("ul",{style:{paddingLeft:20},children:[(0,pm.jsxs)("li",{children:["Your chat identity is ",(0,pm.jsx)("strong",{children:"anonymous"})," and separate from your account"]}),(0,pm.jsx)("li",{children:"Messages are visible to all community members"}),(0,pm.jsx)("li",{children:"We reserve the right to remove inappropriate content"}),(0,pm.jsx)("li",{children:"Serious violations may result in loss of chat access"})]}),(0,pm.jsx)("div",{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",padding:16,borderRadius:12,marginTop:24,borderLeft:"4px solid #667eea"},children:(0,pm.jsxs)("p",{style:{margin:0,fontSize:"0.95rem"},children:[(0,pm.jsx)("strong",{children:"Remember:"})," This chat is for mutual support. If you're experiencing a crisis, please reach out to a professional helpline or healthcare provider."]})}),(0,pm.jsx)("div",{style:{textAlign:"center",marginTop:20,color:i?"#4CAF50":"var(--gray-medium)",fontSize:"0.85rem",fontWeight:i?600:400,fontStyle:i?"normal":"italic"},children:i?"\u2705 Ready to accept!":"\ud83d\udcdc Scroll down to continue"})]}),(0,pm.jsxs)("div",{style:{padding:20,borderTop:"2px solid #f0f0f0",display:"flex",justifyContent:"space-between",gap:12},children:[(0,pm.jsx)("button",{onClick:n,style:{padding:"14px 24px",background:"white",color:"#666",border:"2px solid #e0e0e0",borderRadius:25,fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#999",e.currentTarget.style.color="#333"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#e0e0e0",e.currentTarget.style.color="#666"},children:"\u2190 Go Back"}),(0,pm.jsx)("button",{onClick:t,disabled:!i,style:{padding:"14px 32px",background:i?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#ccc",color:"white",border:"none",borderRadius:25,fontSize:"1rem",fontWeight:700,cursor:i?"pointer":"not-allowed",transition:"all 0.2s ease",boxShadow:i?"0 4px 15px rgba(102, 126, 234, 0.4)":"none"},onMouseEnter:e=>{i&&(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=i?"0 4px 15px rgba(102, 126, 234, 0.4)":"none"},children:"\u2728 I Accept - Let's Chat!"})]})]})})}(0,kt.om)(new It.uA(hy,py,"PUBLIC").setMultipleInstances(!0)),(0,kt.KO)(uy,dy,""),(0,kt.KO)(uy,dy,"esm2020");const yy=e=>e>=90?"#B9F2FF":e>=30?"#FFD700":e>=14?"#C0C0C0":e>=7?"#CD7F32":"#4CAF50";function vy(){var e;const{user:t}=gm(),{isOnline:n}=Gm(),i=ge(),[o,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(0),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=(t=s,im(Mp(Yf(cm,Wm),Bp("createdAt","desc")),e=>{const n=e.docs.map(e=>{var t,n,r,i,o;const s=e.data();return{id:e.id,userId:s.userId,chatDisplayName:s.chatDisplayName||"Anonymous",chatAvatar:s.chatAvatar||"smile",chatAvatarCustom:s.chatAvatarCustom,avatarType:s.avatarType,message:s.message,streakDays:s.streakDays,relapse:s.relapse,medals:null!==(t=s.medals)&&void 0!==t?t:[],coins:null!==(n=s.coins)&&void 0!==n?n:0,createdAt:null!==(r=null===(i=s.createdAt)||void 0===i||null===(o=i.toMillis)||void 0===o?void 0:o.call(i))&&void 0!==r?r:Date.now()}});t(n)}));var t;return()=>e()},[]),(0,r.useEffect)(()=>{t?(async()=>{try{const e=await bm(t.uid);if(null===e||void 0===e||!e.chatPolicyAccepted)return y(!0),void x(!1);null!==e&&void 0!==e&&e.chatDisplayName&&null!==e&&void 0!==e&&e.chatAvatar?b({displayName:e.chatDisplayName,avatar:e.chatAvatar}):m(!0)}catch(e){console.error("Error loading chat profile:",e)}finally{x(!1)}})():x(!1)},[t]),(0,r.useEffect)(()=>{const e=l.trim().split(/\s+/).filter(e=>e.length>0);d(e.length)},[l]);const S=async()=>{if(!t||!l.trim()||!v)return;if(l.trim().split(/\s+/).filter(e=>e.length>0).length>30)alert("\u26a0\ufe0f Message too long! Please keep it under 30 words to maintain chat flow.");else{f(!0);try{const e=await bm(t.uid);await async function(e,t,n,r,i,o,s,l){const c={userId:e,chatDisplayName:t,chatAvatar:n,chatAvatarCustom:arguments.length>9?arguments[9]:void 0,avatarType:r,message:i,streakDays:o,relapse:s,medals:l,coins:arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,createdAt:new vp("serverTimestamp")};try{await rm(Yf(cm,Wm),c),Hm().catch(e=>console.warn("Cleanup failed:",e))}catch(u){if(!Lm())return console.log("Offline: Queuing chat message for sync"),await Om("/chatMessages","POST",(0,a.A)((0,a.A)({},c),{},{createdAt:Date.now()})),{success:!0,queued:!0};throw u}}(t.uid,v.displayName,v.avatar,(null===e||void 0===e?void 0:e.avatarType)||"hero",l.trim(),(null===e||void 0===e?void 0:e.streakDays)||0,!1,(null===e||void 0===e?void 0:e.avatarMedals)||[],0,null===e||void 0===e?void 0:e.chatAvatarCustom),c("")}catch(e){console.error("Error sending message:",e),alert("Failed to send message. Please try again.")}finally{f(!1)}}};return(0,pm.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column"},children:[g&&t&&(0,pm.jsx)(gy,{onAccept:async()=>{if(t)try{await vm(t.uid,{chatPolicyAccepted:!0}),y(!1);const e=await bm(t.uid);null!==e&&void 0!==e&&e.chatDisplayName&&null!==e&&void 0!==e&&e.chatAvatar?b({displayName:e.chatDisplayName,avatar:e.chatAvatar}):m(!0)}catch(e){console.error("Error accepting policy:",e),alert("Failed to save policy acceptance. Please try again.")}},onDecline:()=>i("/dashboard")}),p&&t&&(0,pm.jsx)(my,{onComplete:async(e,n,r)=>{if(t)try{await vm(t.uid,{chatDisplayName:e,chatAvatar:n,chatAvatarCustom:r}),b({displayName:e,avatar:n}),m(!1)}catch(i){console.error("Error saving chat profile:",i),alert("Failed to save profile. Please try again.")}},onCancel:()=>m(!1)}),(0,pm.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",maxWidth:1200,width:"100%",margin:"0 auto",padding:20},children:[(0,pm.jsxs)("div",{style:{background:"rgba(255,255,255,0.95)",borderRadius:"12px 12px 0 0",padding:"15px 20px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",animation:"slideInDown 0.6s ease-out"},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,pm.jsx)("div",{style:{width:10,height:10,borderRadius:"50%",background:"#4CAF50",boxShadow:"0 0 10px #4CAF50",animation:"pulse 2s infinite"}}),(0,pm.jsxs)("div",{children:[(0,pm.jsx)("h1",{style:{fontSize:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:"\ud83d\udcac T-Break Community"}),(0,pm.jsxs)("p",{style:{color:"var(--gray-medium)",margin:0,fontSize:"0.85rem"},children:[o.length," messages \u2022 ",t?"Online":"Offline"]})]})]}),v&&(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"8px 16px",borderRadius:20,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[(0,pm.jsx)("span",{style:{fontSize:"1.2rem"},children:null===(e=Qm.find(e=>e.id===v.avatar))||void 0===e?void 0:e.display}),(0,pm.jsx)("span",{style:{fontWeight:600,color:"white",fontSize:"0.9rem"},children:v.displayName}),(0,pm.jsx)("button",{onClick:()=>m(!0),style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white",cursor:"pointer",fontSize:"0.85rem",padding:"4px 8px",borderRadius:6},title:"Change identity",children:"Edit"})]})]}),!t&&(0,pm.jsxs)("div",{style:{background:"var(--gradient-warm)",color:"white",padding:20,borderRadius:"var(--radius-lg)",textAlign:"center",marginBottom:20,boxShadow:"var(--shadow-md)",animation:"slideInUp 0.6s ease-out"},children:[(0,pm.jsx)("p",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:15},children:"\ud83d\udd10 You must be logged in to send messages."}),(0,pm.jsxs)("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:[(0,pm.jsx)("button",{onClick:()=>i("/login"),style:{padding:"10px 24px",background:"white",color:"var(--joy-orange)",border:"none",borderRadius:8,fontSize:"1rem",fontWeight:700,cursor:"pointer",boxShadow:"var(--shadow-md)"},children:"Sign In"}),(0,pm.jsx)("button",{onClick:()=>i("/signup"),style:{padding:"10px 24px",background:"rgba(255,255,255,0.2)",color:"white",border:"2px solid white",borderRadius:8,fontSize:"1rem",fontWeight:700,cursor:"pointer"},children:"Sign Up"})]})]}),w&&t&&(0,pm.jsx)("div",{style:{textAlign:"center",padding:40,color:"var(--gray-medium)"},children:"Loading chat profile..."}),!n&&t&&!w&&(0,pm.jsx)("div",{style:{background:"var(--gradient-warm)",color:"white",border:"none",borderRadius:"var(--radius-lg)",padding:16,marginBottom:20,fontSize:"1rem",fontWeight:600,textAlign:"center",animation:"slideInUp 0.6s ease-out",boxShadow:"var(--shadow-md)"},children:"\u26a0\ufe0f You're offline. Messages will queue and send automatically when you're back online! \u2728"}),!w&&(0,pm.jsx)("div",{style:{background:"#36393f",border:"none",borderRadius:0,height:500,overflowY:"auto",padding:16,marginBottom:0,boxShadow:"inset 0 2px 10px rgba(0,0,0,0.3)",animation:"slideInUp 0.65s ease-out",fontFamily:"'Courier New', monospace"},children:0===o.length?(0,pm.jsxs)("div",{style:{textAlign:"center",color:"#72767d",padding:"40px 20px",fontSize:"0.95rem"},children:[(0,pm.jsx)("p",{style:{fontSize:"2rem",margin:"0 0 10px 0"},children:"\ud83d\udcac"}),(0,pm.jsx)("p",{style:{fontStyle:"italic"},children:"Welcome to #t-break-community"}),(0,pm.jsx)("p",{style:{fontSize:"0.85rem",marginTop:8},children:"No messages yet. Start the conversation!"})]}):o.map((e,n)=>{const r=Qm.find(t=>t.id===e.chatAvatar),i=(null===t||void 0===t?void 0:t.uid)===e.userId,o=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,padding:"8px 12px",background:i?"rgba(114, 137, 218, 0.1)":"transparent",borderRadius:4,transition:"background 0.15s ease",borderLeft:i?"3px solid #7289da":"3px solid transparent"},onMouseEnter:e=>e.currentTarget.style.background=i?"rgba(114, 137, 218, 0.15)":"rgba(255,255,255,0.03)",onMouseLeave:e=>e.currentTarget.style.background=i?"rgba(114, 137, 218, 0.1)":"transparent",children:[(0,pm.jsx)("div",{style:{flexShrink:0,marginRight:12},children:e.chatAvatarCustom?(0,pm.jsx)("img",{src:e.chatAvatarCustom,alt:"avatar",style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",border:"2px solid ".concat(yy(e.streakDays))}}):(0,pm.jsx)("div",{style:{fontSize:"2rem",width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"2px solid ".concat(yy(e.streakDays)),background:"#40444b"},children:(null===r||void 0===r?void 0:r.display)||"\ud83d\ude0a"})}),(0,pm.jsxs)("div",{style:{flex:1},children:[(0,pm.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:8,marginBottom:4},children:[(0,pm.jsx)("span",{style:{fontSize:"0.95rem",color:yy(e.streakDays),fontWeight:700},children:e.chatDisplayName}),(0,pm.jsx)("span",{style:{fontSize:"0.7rem",color:"#72767d"},children:o}),e.streakDays>=7&&(0,pm.jsx)("span",{style:{fontSize:"0.7rem",background:yy(e.streakDays),color:"white",padding:"2px 6px",borderRadius:8,fontWeight:600},children:(s=e.streakDays,s>=90?"\ud83d\udc8e Diamond":s>=30?"\ud83e\udd47 Gold":s>=14?"\ud83e\udd48 Silver":s>=7?"\ud83e\udd49 Bronze":"\ud83c\udf31 Starting")})]}),(0,pm.jsx)("div",{style:{fontSize:"0.95rem",lineHeight:1.4,color:"#dcddde",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:e.message})]})]},e.id);var s})}),t&&v&&!w&&(0,pm.jsxs)("div",{style:{background:"#40444b",padding:"16px 20px",borderRadius:"0 0 12px 12px",boxShadow:"0 -2px 10px rgba(0,0,0,0.2)"},children:[(0,pm.jsxs)("div",{style:{display:"flex",gap:12,animation:"slideInUp 0.7s ease-out"},children:[(0,pm.jsx)("input",{value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&S(),placeholder:"Message #t-break-community",disabled:h,style:{flex:1,padding:"12px 16px",border:u>30?"2px solid #ff4444":"none",borderRadius:8,fontSize:"0.95rem",fontFamily:"inherit",transition:"all 0.2s ease",background:"#2c2f33",color:"#dcddde",outline:"none"}}),(0,pm.jsx)("button",{onClick:S,disabled:h||!l.trim()||u>30,style:{padding:"12px 24px",background:h||!l.trim()||u>30?"#4f545c":"#7289da",color:"white",border:"none",borderRadius:8,fontSize:"0.95rem",fontWeight:700,cursor:h||!l.trim()||u>30?"not-allowed":"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:e=>{!h&&l.trim()&&u<=30&&(e.currentTarget.style.background="#5b6eae")},onMouseLeave:e=>{!h&&l.trim()&&u<=30&&(e.currentTarget.style.background="#7289da")},children:h?"\u23f3":"Send"})]}),(0,pm.jsxs)("div",{style:{marginTop:8,fontSize:"0.75rem",color:u>30?"#ff4444":"#72767d",textAlign:"right",fontWeight:u>30?600:400},children:[u>30?"\u26a0\ufe0f ":"",u,"/30 words ",u>30&&"- Too long!"]})]})]})]})}function by(){const{user:e}=gm(),t=ge(),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)("smoke"),[f,p]=(0,r.useState)("moderate"),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(40),[b,w]=(0,r.useState)(!1),[x,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{var n;const r=await bm(e.uid);if(!t)return;if(null!==r&&void 0!==r&&r.startDate){const e=new Date(r.startDate).toISOString().slice(0,10);i(e)}null!==r&&void 0!==r&&r.age&&s(r.age),null!==r&&void 0!==r&&r.weight&&l(r.weight),null!==r&&void 0!==r&&r.yearsOfUse&&u(r.yearsOfUse),null!==r&&void 0!==r&&r.usageType&&h(r.usageType),null!==r&&void 0!==r&&r.frequency&&p(r.frequency),void 0!==(null===r||void 0===r||null===(n=r.notifications)||void 0===n?void 0:n.enabled)&&g(r.notifications.enabled),null!==r&&void 0!==r&&r.recommendedBreakDays&&v(r.recommendedBreakDays)}catch(r){console.error(r)}})(),()=>{t=!1}},[e]),(0,r.useEffect)(()=>{let e=40;"light"===f?e=21:"moderate"===f?e=30:"heavy"===f?e=40:"chronic"===f&&(e=60),c&&c>5&&(e+=10),c&&c>10&&(e+=10),"edible"===d&&(e+=7),v(e)},[f,c,d]);return(0,pm.jsxs)("div",{style:{padding:20,maxWidth:700,margin:"0 auto",background:"linear-gradient(135deg, rgba(26, 188, 156, 0.03) 0%, rgba(142, 68, 173, 0.03) 100%)",minHeight:"100vh"},children:[(0,pm.jsx)("h1",{style:{background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10},children:"My Profile"}),(0,pm.jsx)("p",{style:{color:"var(--gray-medium)",marginBottom:30},children:"Help us personalize your T-break journey"}),(0,pm.jsxs)("div",{style:{background:"white",padding:30,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("strong",{children:"Signed in as:"})," ",(0,pm.jsx)("span",{style:{color:"var(--joy-teal)"},children:e?e.email:"Not signed in"})]}),(0,pm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,pm.jsx)("h3",{style:{color:"var(--joy-purple)",marginBottom:15},children:"\ud83d\udccb Personal Information"}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Age (years)"}),(0,pm.jsx)("input",{type:"number",placeholder:"25",value:null!==o&&void 0!==o?o:"",onChange:e=>s(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Weight (kg)"}),(0,pm.jsx)("input",{type:"number",placeholder:"70",value:null!==a&&void 0!==a?a:"",onChange:e=>l(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}}),(0,pm.jsx)("small",{style:{color:"var(--gray-medium)"},children:"Used for metabolite calculations"})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,pm.jsx)("h3",{style:{color:"var(--joy-orange)",marginBottom:15},children:"\ud83c\udf3f Cannabis Usage History"}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Years of use"}),(0,pm.jsx)("input",{type:"number",placeholder:"5",value:null!==c&&void 0!==c?c:"",onChange:e=>u(e.target.value?parseInt(e.target.value):null),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Primary consumption method"}),(0,pm.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"},children:[(0,pm.jsx)("option",{value:"smoke",children:"\ud83d\udeac Smoke (joints, bongs)"}),(0,pm.jsx)("option",{value:"vape",children:"\ud83d\udca8 Vape"}),(0,pm.jsx)("option",{value:"edible",children:"\ud83c\udf6a Edibles"}),(0,pm.jsx)("option",{value:"dab",children:"\ud83d\udc8e Dabs/Concentrates"}),(0,pm.jsx)("option",{value:"other",children:"\ud83c\udf1f Other"})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Usage frequency"}),(0,pm.jsxs)("select",{value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"},children:[(0,pm.jsx)("option",{value:"light",children:"\ud83d\udc9a Light (1-2 times/week)"}),(0,pm.jsx)("option",{value:"moderate",children:"\ud83d\udc9b Moderate (3-4 times/week)"}),(0,pm.jsx)("option",{value:"heavy",children:"\ud83e\udde1 Heavy (daily, 1-2 times/day)"}),(0,pm.jsx)("option",{value:"chronic",children:"\u2764\ufe0f Chronic (multiple times daily)"})]})]}),(0,pm.jsxs)("div",{style:{padding:15,background:"var(--joy-purple-light)",borderRadius:8,border:"2px solid var(--joy-purple)"},children:[(0,pm.jsxs)("strong",{style:{color:"var(--joy-purple)"},children:["\ud83d\udcca Recommended break duration: ",y," days"]}),(0,pm.jsxs)("p",{style:{marginTop:8,fontSize:"0.9rem",color:"var(--gray-dark)"},children:["Based on your usage pattern, we recommend a ",y,"-day break for optimal THC clearance."]})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:30,paddingBottom:20,borderBottom:"1px solid var(--gray-light)"},children:[(0,pm.jsx)("h3",{style:{color:"var(--joy-teal)",marginBottom:15},children:"\ud83d\udcc5 T-Break Timeline"}),(0,pm.jsxs)("div",{style:{marginBottom:15},children:[(0,pm.jsx)("label",{style:{display:"block",marginBottom:5,fontWeight:600},children:"Start date"}),(0,pm.jsx)("input",{type:"date",value:null!==n&&void 0!==n?n:"",onChange:e=>i(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid var(--gray-light)"}})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:30},children:[(0,pm.jsx)("h3",{style:{color:"var(--joy-green)",marginBottom:15},children:"\ud83d\udd14 Notifications"}),(0,pm.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,pm.jsx)("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),style:{marginRight:10,width:20,height:20}}),(0,pm.jsx)("span",{children:"Enable daily reminders and milestone notifications"})]})]}),(0,pm.jsxs)("div",{style:{marginTop:30},children:[(0,pm.jsx)("button",{onClick:async()=>{if(e){w(!0),S(null);try{const r=n?new Date(n).toISOString():void 0;await bm(e.uid);await vm(e.uid,{usageType:d,frequency:f,startDate:r,age:o||void 0,weight:a||void 0,yearsOfUse:c||void 0,recommendedBreakDays:y,notifications:{enabled:m,dailyReminder:m,milestones:m,encouragement:m}}),S("Saved! Redirecting to dashboard..."),setTimeout(()=>{t("/")},1e3)}catch(r){console.error("Profile save error:",r),S("Failed to save profile.")}finally{w(!1)}}else S("Please sign in to update your profile.")},disabled:b,style:{width:"100%",padding:"14px 24px",background:b?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:600,cursor:b?"not-allowed":"pointer",transition:"transform 0.2s"},onMouseEnter:e=>!b&&(e.currentTarget.style.transform="scale(1.02)"),onMouseLeave:e=>!b&&(e.currentTarget.style.transform="scale(1)"),children:b?"Saving...":"\ud83d\udcbe Save Profile"}),x&&(0,pm.jsx)("div",{style:{marginTop:15,padding:12,borderRadius:8,background:x.includes("Failed")?"#ffebee":"#e8f5e9",color:x.includes("Failed")?"#c62828":"#2e7d32",fontWeight:600,textAlign:"center"},children:x})]})]}),(0,pm.jsx)("div",{style:{marginTop:30,textAlign:"center"},children:(0,pm.jsx)(yt,{to:"/",style:{display:"inline-block",padding:"12px 24px",background:"var(--gradient-ocean)",color:"white",textDecoration:"none",borderRadius:8,fontWeight:600,transition:"transform 0.2s"},children:"\u2190 Back to Dashboard"})})]})}function wy(){return(0,pm.jsxs)("div",{children:[(0,pm.jsx)("h1",{children:"Nutrition Support"}),(0,pm.jsx)("p",{children:"Foods, herbs, teas, vitamins"})]})}function xy(){const[e,t]=(0,r.useState)("heavy"),[n,i]=(0,r.useState)(0),[o,s]=(0,r.useState)(null);return(0,pm.jsxs)("div",{style:{padding:20},children:[(0,pm.jsx)("h1",{children:"Metabolite Clearance Estimator"}),(0,pm.jsx)("p",{style:{fontSize:12},children:"This is an approximate educational tool, not medical or legal advice."}),(0,pm.jsxs)("div",{style:{marginTop:10},children:[(0,pm.jsx)("label",{children:"Usage frequency:"}),(0,pm.jsxs)("select",{value:e,onChange:e=>t(e.target.value),style:{marginLeft:8},children:[(0,pm.jsx)("option",{value:"light",children:"Light"}),(0,pm.jsx)("option",{value:"moderate",children:"Moderate"}),(0,pm.jsx)("option",{value:"heavy",children:"Heavy"}),(0,pm.jsx)("option",{value:"chronic",children:"Chronic"})]})]}),(0,pm.jsxs)("div",{style:{marginTop:10},children:[(0,pm.jsx)("label",{children:"Days since last use:"}),(0,pm.jsx)("input",{type:"number",value:n,onChange:e=>i(Number(e.target.value)),style:{marginLeft:8,width:80}})]}),(0,pm.jsx)("button",{style:{marginTop:15},onClick:()=>{const t=(e=>{let{frequency:t,daysSinceLastUse:n}=e;const[r,i]={light:[2,5],moderate:[5,15],heavy:[10,30],chronic:[20,60]}[t],o=Math.min(Math.max(n,0),i)/i*100;return{estimatedPercentCleared:Math.round(o),minDaysToClear:r,maxDaysToClear:i}})({frequency:e,daysSinceLastUse:n});s(t)},children:"Estimate"}),o&&(0,pm.jsxs)("div",{style:{marginTop:20},children:[(0,pm.jsxs)("p",{children:["Estimated cleared: ",(0,pm.jsxs)("b",{children:[o.estimatedPercentCleared,"%"]})]}),(0,pm.jsxs)("p",{children:["Estimated days to pass a urine test:"," ",(0,pm.jsxs)("b",{children:[o.minDaysToClear,"\u2013",o.maxDaysToClear," days"]})]}),(0,pm.jsx)("p",{style:{color:"#777",marginTop:10},children:"\u26a0 Not medical or legal advice. Educational only."})]})]})}function Sy(){return(0,pm.jsxs)("div",{children:[(0,pm.jsx)("h1",{children:"Onboarding"}),(0,pm.jsx)("p",{children:"Let's customize your T-Break Plan"})]})}function _y(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),m=ge(),g=fe();return(0,pm.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(142, 68, 173, 0.1) 0%, rgba(26, 188, 156, 0.1) 100%)",padding:20},children:(0,pm.jsxs)("div",{style:{background:"white",padding:40,borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-xl)",maxWidth:450,width:"100%"},children:[(0,pm.jsx)("h1",{style:{fontSize:"2rem",background:"var(--gradient-ocean)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:0,marginBottom:10,textAlign:"center"},children:a?"\ud83d\udd11 Reset Password":"\ud83d\udd10 Sign In"}),(0,pm.jsx)("p",{style:{textAlign:"center",color:"var(--gray-dark)",marginBottom:30},children:a?"Enter your email to receive a password reset link":"Welcome back to T-Break!"}),a?(0,pm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()){p(!0),s(null),h(!1);try{await hm(c),h(!0),u("")}catch(n){var t;s(null!==(t=null===n||void 0===n?void 0:n.message)&&void 0!==t?t:"Failed to send reset email")}finally{p(!1)}}else s("Please enter your email address")},children:[(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Email Address"}),(0,pm.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"Enter your email",style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),d&&(0,pm.jsx)("div",{style:{background:"#e8f5e9",color:"#2e7d32",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:"\u2713 Password reset email sent! Check your inbox."}),o&&(0,pm.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:o}),(0,pm.jsx)("button",{type:"submit",disabled:f,style:{width:"100%",padding:14,background:f?"var(--gray-medium)":"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:700,cursor:f?"not-allowed":"pointer",boxShadow:"var(--shadow-md)",marginBottom:15},children:f?"Sending...":"\ud83d\udce7 Send Reset Link"}),(0,pm.jsx)("button",{type:"button",onClick:()=>{l(!1),s(null),h(!1),u("")},style:{width:"100%",padding:12,background:"white",color:"var(--gray-dark)",border:"2px solid var(--gray-light)",borderRadius:8,fontSize:"1rem",fontWeight:600,cursor:"pointer"},children:"\u2190 Back to Sign In"})]}):(0,pm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(null);try{var r,i,o;await dm(e,n);const t=null!==(r=null===(i=g.state)||void 0===i||null===(o=i.from)||void 0===o?void 0:o.pathname)&&void 0!==r?r:"/profile";m(t,{replace:!0})}catch(l){var a;s(null!==(a=null===l||void 0===l?void 0:l.message)&&void 0!==a?a:"Sign in failed")}},children:[(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Email"}),(0,pm.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),(0,pm.jsxs)("div",{style:{marginBottom:20},children:[(0,pm.jsx)("label",{style:{display:"block",fontWeight:600,color:"var(--joy-purple)",marginBottom:8},children:"Password"}),(0,pm.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0,style:{width:"100%",padding:12,border:"2px solid var(--joy-teal)",borderRadius:8,fontSize:"1rem",boxSizing:"border-box"}})]}),(0,pm.jsx)("button",{type:"button",onClick:()=>{l(!0),s(null)},style:{background:"none",border:"none",color:"var(--joy-teal)",cursor:"pointer",fontSize:"0.9rem",padding:0,marginBottom:20,textDecoration:"underline"},children:"Forgot your password?"}),(0,pm.jsx)("button",{type:"submit",style:{width:"100%",padding:14,background:"var(--gradient-sunset)",color:"white",border:"none",borderRadius:8,fontSize:"1.1rem",fontWeight:700,cursor:"pointer",boxShadow:"var(--shadow-md)",marginBottom:15},children:"\u2728 Sign In"}),o&&(0,pm.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:12,borderRadius:8,fontSize:"0.9rem",marginBottom:15},children:o}),(0,pm.jsxs)("div",{style:{textAlign:"center",fontSize:"0.9rem",color:"var(--gray-dark)"},children:["Don't have an account?"," ",(0,pm.jsx)("button",{type:"button",onClick:()=>m("/signup"),style:{background:"none",border:"none",color:"var(--joy-purple)",cursor:"pointer",fontWeight:600,textDecoration:"underline"},children:"Sign Up"})]})]})]})})}function Ey(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(null),a=ge(),l=fe();return(0,pm.jsxs)("div",{children:[(0,pm.jsx)("h1",{children:"Create Account"}),(0,pm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(null);try{var r,i,o;await um(e,n);const t=null!==(r=null===(i=l.state)||void 0===i||null===(o=i.from)||void 0===o?void 0:o.pathname)&&void 0!==r?r:"/profile";a(t,{replace:!0})}catch(u){var c;s(null!==(c=null===u||void 0===u?void 0:u.message)&&void 0!==c?c:"Sign up failed")}},children:[(0,pm.jsx)("div",{children:(0,pm.jsxs)("label",{children:["Email",(0,pm.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]})}),(0,pm.jsx)("div",{children:(0,pm.jsxs)("label",{children:["Password",(0,pm.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0})]})}),(0,pm.jsx)("div",{style:{marginTop:12},children:(0,pm.jsx)("button",{type:"submit",children:"Sign Up"})}),o&&(0,pm.jsx)("div",{style:{color:"red",marginTop:12},children:o})]})]})}var ky,Ty,Cy=n(403);!function(e){e[e.Min=1]="Min",e[e.Low=2]="Low",e[e.Default=3]="Default",e[e.High=4]="High",e[e.Max=5]="Max"}(ky||(ky={})),function(e){e[e.Secret=-1]="Secret",e[e.Private=0]="Private",e[e.Public=1]="Public"}(Ty||(Ty={}));const Iy=(0,Cy.F3)("FirebaseMessaging",{web:()=>n.e(572).then(n.bind(n,572)).then(e=>new e.FirebaseMessagingWeb)}),Ay=async(e,t)=>{try{const n=await bm(e),r=null===n||void 0===n?void 0:n.notifications;if(!r)return!0;switch(t){case"chat_mention":return!1!==r.chatMention;case"daily_checkin":return!1!==r.dailyCheckin;case"quote_of_day":return!1!==r.quoteOfDay;case"promotional":return!0===r.promotional;default:return!0}}catch(n){return console.error("Error checking notification preferences:",n),!0}},Ry=(e,t)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t}),console.log("[".concat(e,"] ").concat(t)),window.dispatchEvent(new CustomEvent("app-notification",{detail:{title:e,body:t}}))},Ny=async(e,t)=>{try{await vm(e,{fcmToken:t}),console.log("FCM token stored for user:",e)}catch(n){console.error("Failed to store FCM token:",n)}},Py=async(e,t)=>{try{return await vm(e,{notifications:t}),console.log("Notification preferences updated:",t),!0}catch(n){return console.error("Failed to update notification preferences:",n),!1}};function Dy(){const{user:e}=gm(),[t,n]=(0,r.useState)({chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}),[i,o]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{const r=await(async e=>{try{const t=await bm(e);return(null===t||void 0===t?void 0:t.notifications)||null}catch(t){return console.error("Failed to get notification preferences:",t),null}})(e.uid);if(!t)return;r&&n(r)}catch(r){console.error(r)}})(),()=>{t=!1}},[e]);return(0,pm.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"0 auto"},children:[(0,pm.jsx)("h1",{children:"\ud83d\udd14 Notification Preferences"}),(0,pm.jsx)("p",{style:{fontSize:13,color:"#666",marginBottom:16},children:"All notifications are optional. Control exactly what you want to receive."}),(0,pm.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:20},children:[(0,pm.jsx)("button",{onClick:async()=>{if(e){o(!0);try{await(async e=>Py(e,{chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}))(e.uid),n({chatMention:!0,dailyCheckin:!0,quoteOfDay:!0,promotional:!1}),l("\u2713 Recommended notifications enabled.")}catch(t){console.error(t),l("Failed to enable notifications.")}finally{o(!1)}}},disabled:i,style:{padding:"10px 12px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontSize:13,fontWeight:600,opacity:i?.6:1},children:"\u2713 Recommended"}),(0,pm.jsx)("button",{onClick:async()=>{if(e){o(!0);try{await(async e=>Py(e,{chatMention:!1,dailyCheckin:!1,quoteOfDay:!1,promotional:!1}))(e.uid),n({chatMention:!1,dailyCheckin:!1,quoteOfDay:!1,promotional:!1}),l("\u2713 All notifications disabled.")}catch(t){console.error(t),l("Failed to disable notifications.")}finally{o(!1)}}},disabled:i,style:{padding:"10px 12px",background:"#f44336",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontSize:13,fontWeight:600,opacity:i?.6:1},children:"\u2717 Disable All"})]}),(0,pm.jsxs)("div",{style:{background:"#f9f9f9",padding:16,borderRadius:8,marginBottom:16},children:[(0,pm.jsx)("h3",{style:{marginTop:0,fontSize:14,color:"#333"},children:"Individual Settings"}),(0,pm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,pm.jsx)("input",{type:"checkbox",checked:!!t.chatMention,onChange:e=>n((0,a.A)((0,a.A)({},t),{},{chatMention:e.target.checked})),disabled:i})," ",(0,pm.jsx)("strong",{children:"Chat mentions"}),(0,pm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Notified when someone mentions you in community chat"})]}),(0,pm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,pm.jsx)("input",{type:"checkbox",checked:!!t.dailyCheckin,onChange:e=>n((0,a.A)((0,a.A)({},t),{},{dailyCheckin:e.target.checked})),disabled:i})," ",(0,pm.jsx)("strong",{children:"Daily check-in reminder"}),(0,pm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Daily reminder to log your mood and symptoms"})]}),(0,pm.jsxs)("label",{style:{display:"block",marginBottom:12},children:[(0,pm.jsx)("input",{type:"checkbox",checked:!!t.quoteOfDay,onChange:e=>n((0,a.A)((0,a.A)({},t),{},{quoteOfDay:e.target.checked})),disabled:i})," ",(0,pm.jsx)("strong",{children:"Daily motivational quotes"}),(0,pm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"Receive daily inspiration messages"})]}),(0,pm.jsxs)("label",{style:{display:"block"},children:[(0,pm.jsx)("input",{type:"checkbox",checked:!!t.promotional,onChange:e=>n((0,a.A)((0,a.A)({},t),{},{promotional:e.target.checked})),disabled:i})," ",(0,pm.jsx)("strong",{children:"Promotional messages"}),(0,pm.jsx)("p",{style:{margin:"4px 0 0 24px",fontSize:12,color:"#666"},children:"App updates, new features, donation appeals"})]})]}),(0,pm.jsxs)("div",{style:{marginBottom:16},children:[(0,pm.jsx)("button",{onClick:async()=>{o(!0);try{const e=await(async()=>{try{const e=await Iy.requestPermissions();return console.log("Notification permission result:",e),"granted"===e.receive||"denied"===e.receive}catch(e){return console.error("Failed to request notification permissions:",e),!1}})();l(e?"\u2713 Notification permissions granted.":"Notification permissions required to receive notifications.")}catch(e){console.error(e),l("Failed to request permissions.")}finally{o(!1)}},disabled:i,style:{width:"100%",padding:"12px 16px",background:"#2196F3",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontWeight:600,marginBottom:8,opacity:i?.6:1},children:"Enable Device Notifications"}),(0,pm.jsx)("button",{onClick:async()=>{if(e){o(!0),l(null);try{const n=await Py(e.uid,t);l(n?"\u2713 Notification preferences saved.":"Failed to save preferences.")}catch(n){console.error(n),l("Failed to save preferences.")}finally{o(!1)}}else l("Please sign in to update notifications.")},disabled:i,style:{width:"100%",padding:"12px 16px",background:"#2e7d32",color:"#fff",border:"none",borderRadius:4,cursor:i?"not-allowed":"pointer",fontWeight:600,opacity:i?.6:1},children:i?"Saving...":"Save Preferences"})]}),s&&(0,pm.jsx)("div",{style:{background:s.includes("\u2713")?"#e8f5e9":"#ffebee",color:s.includes("\u2713")?"#2e7d32":"#c62828",padding:12,borderRadius:4,textAlign:"center",fontSize:14,marginBottom:16},children:s}),(0,pm.jsxs)("div",{style:{background:"#e3f2fd",padding:12,borderRadius:4,fontSize:12,color:"#1565c0",lineHeight:1.6},children:[(0,pm.jsx)("strong",{children:"\u2139\ufe0f How notifications work:"}),(0,pm.jsxs)("ul",{style:{margin:"8px 0 0 16px",paddingLeft:0},children:[(0,pm.jsx)("li",{children:"Device permissions allow us to send push notifications"}),(0,pm.jsx)("li",{children:"Your preferences control which types you receive"}),(0,pm.jsx)("li",{children:"You can change settings anytime"}),(0,pm.jsx)("li",{children:"Disable all notifications if you prefer not to receive any"})]})]})]})}const jy="https://us-central1-tbreakapp.cloudfunctions.net/donations",Oy=async e=>{try{const t=await fetch("".concat(jy,"/initiate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error("Donation failed: ".concat(t.status," ").concat(e))}return await t.json()}catch(t){if(!Lm())return console.log("Offline: Queuing donation for sync"),await Om("/donations/initiate","POST",e),{success:!0,queued:!0};throw console.error("Error initiating donation:",t),t}};function Ly(){const{user:e,profile:t}=gm(),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f(/iPhone|iPad|Android/i.test(navigator.userAgent))},[]);const p=[{id:"donation_coffee",name:"Buy me a coffee \u2615",amount:5,description:"Support development with a small gift",stripePrice:"price_coffee_5",revenuecat:"com.tbreak.donation.coffee"},{id:"donation_meal",name:"Buy me a meal \ud83c\udf7d\ufe0f",amount:15,description:"Help keep the lights on",stripePrice:"price_meal_15",revenuecat:"com.tbreak.donation.meal"},{id:"donation_month",name:"Monthly supporter \ud83d\udcaa",amount:25,description:"Recurring monthly support",stripePrice:"price_month_25",revenuecat:"com.tbreak.donation.month"},{id:"donation_hero",name:"Be a hero \ud83e\uddb8",amount:50,description:"Major contributor to the mission",stripePrice:"price_hero_50",revenuecat:"com.tbreak.donation.hero"}],m=async t=>{if(!e)return void c("Please sign in to make a donation.");const n=t?t.amount:parseFloat(o);if(!n||n<=0)c("Please select a tier or enter a valid amount.");else{d(!0),c("");try{h&&null!==t&&void 0!==t&&t.revenuecat?await g(t):await y(t||(0,a.A)((0,a.A)({},p[0]),{},{amount:n,id:"custom"}))}catch(r){console.error("Donation error:",r),c("Error processing donation: ".concat(r instanceof Error?r.message:"Unknown error"))}finally{d(!1)}}},g=async t=>{(await Oy({type:"revenuecat",userId:e.uid,productId:t.revenuecat,amount:t.amount,tierName:t.name})).success?(c("Thank you! Your donation of $".concat(t.amount," is being processed. \ud83d\ude4f")),i(null)):c("RevenueCat donation failed. Please try again.")},y=async t=>{const n=await Oy({type:"stripe",userId:e.uid,amount:t.amount,tierName:t.name,stripePrice:t.stripePrice});n.sessionUrl?window.location.href=n.sessionUrl:c("Failed to initiate donation. Please try again.")};return(0,pm.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"0 auto"},children:[(0,pm.jsx)("h1",{children:"Support Us \ud83d\udc9a"}),(0,pm.jsxs)("div",{style:{background:"#f5f5f5",padding:16,borderRadius:8,marginBottom:24},children:[(0,pm.jsxs)("p",{style:{margin:0,lineHeight:1.6},children:[(0,pm.jsx)("strong",{children:"Why donate?"})," This app is built with care to help you succeed on your T-break. Donations help us:"]}),(0,pm.jsxs)("ul",{style:{marginTop:8,marginBottom:0},children:[(0,pm.jsx)("li",{children:"Keep servers running 24/7"}),(0,pm.jsx)("li",{children:"Develop new features (meditation guides, community challenges, etc.)"}),(0,pm.jsx)("li",{children:"Improve the app based on your feedback"}),(0,pm.jsx)("li",{children:"Stay ad-free and completely private"})]})]}),(0,pm.jsx)("h2",{children:"Choose Your Support Level"}),(0,pm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},children:p.map(e=>(0,pm.jsxs)("button",{onClick:()=>{i(e.id),s(""),m(e)},disabled:u,style:{padding:16,border:n===e.id?"2px solid #2e7d32":"1px solid #ddd",borderRadius:8,background:n===e.id?"#e8f5e9":"#fff",cursor:u?"not-allowed":"pointer",textAlign:"center",transition:"all 0.2s",opacity:u?.6:1},children:[(0,pm.jsx)("div",{style:{fontWeight:600,fontSize:14,marginBottom:4},children:e.name}),(0,pm.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:e.description}),(0,pm.jsxs)("div",{style:{fontSize:18,fontWeight:600,color:"#2e7d32"},children:["$",e.amount]})]},e.id))}),(0,pm.jsx)("h2",{children:"Custom Amount"}),(0,pm.jsx)("div",{style:{marginBottom:24},children:(0,pm.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,pm.jsx)("span",{style:{fontSize:18,fontWeight:600},children:"$"}),(0,pm.jsx)("input",{type:"number",min:"1",step:"0.01",value:o,onChange:e=>{s(e.target.value),i(null)},placeholder:"Enter custom amount",disabled:u,style:{flex:1,padding:"10px 12px",border:"1px solid #ddd",borderRadius:4,fontSize:16,opacity:u?.6:1}}),(0,pm.jsx)("button",{onClick:()=>m(null),disabled:u,style:{padding:"10px 16px",background:u?"#ccc":"#2e7d32",color:"#fff",border:"none",borderRadius:4,cursor:u?"not-allowed":"pointer",fontWeight:600},children:u?"Processing...":"Donate"})]})}),l&&(0,pm.jsx)("div",{style:{background:l.includes("Error")?"#ffebee":"#e8f5e9",color:l.includes("Error")?"#c62828":"#2e7d32",padding:12,borderRadius:4,marginBottom:24,textAlign:"center",fontSize:14},children:l}),(0,pm.jsxs)("div",{style:{background:"#f9f9f9",padding:16,borderRadius:8,marginTop:24},children:[(0,pm.jsx)("h3",{style:{marginTop:0},children:"About Donations"}),(0,pm.jsxs)("ul",{style:{fontSize:14,lineHeight:1.8,color:"#555"},children:[(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Privacy First:"})," We never share your donation info with third parties."]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Transparent:"})," 100% of donations go toward app development and operations."]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"Secure:"})," Payments processed by ",h?"RevenueCat":"Stripe",", industry-leading providers."]}),(0,pm.jsxs)("li",{children:[(0,pm.jsx)("strong",{children:"100% Optional:"})," The app works fully without donations. This is purely optional support."]})]})]}),(0,pm.jsxs)("div",{style:{marginTop:24,padding:16,background:"#fff3e0",borderRadius:8,textAlign:"center"},children:[(0,pm.jsx)("p",{style:{margin:0,color:"#e65100"},children:(0,pm.jsx)("strong",{children:"Thank you for believing in this mission! \ud83d\ude4f"})}),(0,pm.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:12,color:"#666"},children:"Every donation brings us closer to building the best T-break companion app."})]}),(0,pm.jsx)("div",{style:{marginTop:24,fontSize:12,color:"#999",textAlign:"center"},children:(0,pm.jsx)("p",{style:{margin:0},children:"Questions? Email us at support@tbreak.app or visit our community chat."})})]})}const My=e=>{(0,r.useEffect)(()=>{e&&((e=>{Iy.addListener("notificationReceived",async t=>{var n,r;console.log("Foreground notification received:",t);const i=(null===(n=t.notification)||void 0===n?void 0:n.title)||"T-Break",o=(null===(r=t.notification)||void 0===r?void 0:r.body)||"You have a new message";let s=!0;i.toLowerCase().includes("mention")||i.toLowerCase().includes("chat")?s=await Ay(e,"chat_mention"):i.toLowerCase().includes("check-in")?s=await Ay(e,"daily_checkin"):i.toLowerCase().includes("quote")||i.toLowerCase().includes("inspiration")?s=await Ay(e,"quote_of_day"):(i.toLowerCase().includes("promotional")||i.toLowerCase().includes("update"))&&(s=await Ay(e,"promotional")),s?Ry(i,o):console.log("Notification disabled by user preferences")}),Iy.addListener("tokenReceived",t=>{console.log("FCM token refreshed:",t.token),Ny(e,t.token)})})(e),(async()=>{try{const e=await(async()=>{try{const e=await Iy.getToken();if(null!==e&&void 0!==e&&e.token)return console.log("FCM token:",e.token),e.token}catch(e){console.error("Failed to get FCM token:",e)}return null})();e&&console.log("FCM token obtained:",e)}catch(e){console.error("Failed to get FCM token:",e)}})())},[e])},Fy=()=>{const{isOnline:e,pendingChangesCount:t,isSyncing:n}=Gm();return e&&0===t?null:(0,pm.jsx)("div",{className:"offline-banner ".concat(e?"syncing":"offline"),children:(0,pm.jsx)("div",{className:"offline-banner-content",children:e?(0,pm.jsxs)(pm.Fragment,{children:[(0,pm.jsx)("span",{className:"offline-banner-icon",children:"\ud83d\udd04"}),(0,pm.jsxs)("span",{className:"offline-banner-text",children:[n?"Syncing changes...":"",!n&&t>0?"".concat(t," change").concat(1===t?"":"s"," ready to sync"):""]})]}):(0,pm.jsxs)(pm.Fragment,{children:[(0,pm.jsx)("span",{className:"offline-banner-icon",children:"\ud83d\udce1"}),(0,pm.jsx)("span",{className:"offline-banner-text",children:"You're offline. Your changes will sync when connected."})]})})})};function Uy(){const{user:e}=gm();function t(t){let{children:n}=t;const{pathname:r,search:i}=window.location;return e?n:(0,pm.jsx)(De,{to:"/login",replace:!0,state:{from:{pathname:r,search:i}}})}return My(null===e||void 0===e?void 0:e.uid),(0,pm.jsxs)(Km,{children:[(0,pm.jsx)(Fy,{}),(0,pm.jsx)(mt,{children:(0,pm.jsxs)(Le,{children:[(0,pm.jsx)(je,{path:"/",element:(0,pm.jsx)(Pm,{})}),(0,pm.jsx)(je,{path:"/checkin",element:(0,pm.jsx)(Vm,{})}),(0,pm.jsx)(je,{path:"/calendar",element:(0,pm.jsx)(Bm,{})}),(0,pm.jsx)(je,{path:"/chat",element:(0,pm.jsx)(vy,{})}),(0,pm.jsx)(je,{path:"/nutrition",element:(0,pm.jsx)(wy,{})}),(0,pm.jsx)(je,{path:"/estimator",element:(0,pm.jsx)(xy,{})}),(0,pm.jsx)(je,{path:"/profile",element:(0,pm.jsx)(t,{children:(0,pm.jsx)(by,{})})}),(0,pm.jsx)(je,{path:"/notifications",element:(0,pm.jsx)(t,{children:(0,pm.jsx)(Dy,{})})}),(0,pm.jsx)(je,{path:"/donations",element:(0,pm.jsx)(Ly,{})}),(0,pm.jsx)(je,{path:"/login",element:(0,pm.jsx)(_y,{})}),(0,pm.jsx)(je,{path:"/signup",element:(0,pm.jsx)(Ey,{})}),(0,pm.jsx)(je,{path:"/onboarding",element:(0,pm.jsx)(Sy,{})})]})})]})}const Vy=document.getElementById("root");o.createRoot(Vy).render((0,pm.jsx)(r.StrictMode,{children:(0,pm.jsx)(ym,{children:(0,pm.jsx)(Uy,{})})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered successfully:",e)}).catch(e=>{console.warn("Service Worker registration failed:",e)})})})();
//# sourceMappingURL=main.d7038b0d.js.map